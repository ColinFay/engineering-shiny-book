<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 17 Using JavaScript | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 17 Using JavaScript | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg" />
  <meta property="og:description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="github-repo" content="ThinkR-open/engineering-shiny-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 17 Using JavaScript | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg" />

<meta name="author" content="Colin Fay" />
<meta name="author" content="Sébastien Rochette" />
<meta name="author" content="Vincent Guyader" />
<meta name="author" content="Cervan Girard" />


<meta name="date" content="2024-03-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="optimizing-shiny-code.html"/>
<link rel="next" href="css.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audience-for-this-book"><i class="fa fa-check"></i>Audience for this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-production"><i class="fa fa-check"></i>What is “production”?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#colin-fay"><i class="fa fa-check"></i><a href="https://colinfay.me/">Colin Fay</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sébastien-rochette"><i class="fa fa-check"></i><a href="https://statnmap.com/">Sébastien Rochette</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#vincent-guyader"><i class="fa fa-check"></i><a href="https://twitter.com/VincentGuyader">Vincent Guyader</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cervan-girard"><i class="fa fa-check"></i><a href="https://twitter.com/CervanGirard">Cervan Girard</a></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#want-to-help"><i class="fa fa-check"></i>Want to help?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-started-with-shiny"><i class="fa fa-check"></i>Getting started with <code>{shiny}</code></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#putting-shiny-into-production"><i class="fa fa-check"></i>Putting <code>{shiny}</code> into production</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#special-thanks"><i class="fa fa-check"></i>Special thanks</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors-to-this-book"><i class="fa fa-check"></i>Contributors to this book</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html"><i class="fa fa-check"></i>Application presentation</a>
<ul>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#hexmake"><i class="fa fa-check"></i><code>{hexmake}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#tidytuesday201942"><i class="fa fa-check"></i><code>{tidytuesday201942}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#minifying"><i class="fa fa-check"></i><code>{minifying}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#other-applications"><i class="fa fa-check"></i>Other applications</a></li>
</ul></li>
<li class="part"><span><b>I Building Successful {shiny} Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html"><i class="fa fa-check"></i><b>1</b> About Successful <code>{shiny}</code> Apps</a>
<ul>
<li class="chapter" data-level="1.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#a-very-short-introduction-to-shiny"><i class="fa fa-check"></i><b>1.1</b> A (very) short introduction to <code>{shiny}</code></a></li>
<li class="chapter" data-level="1.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#complex-shiny"><i class="fa fa-check"></i><b>1.2</b> What is a complex <code>{shiny}</code> application?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#reaching-the-cliff-of-complexity"><i class="fa fa-check"></i><b>1.2.1</b> Reaching the cliff of complexity</a></li>
<li class="chapter" data-level="1.2.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#balancing-complexities"><i class="fa fa-check"></i><b>1.2.2</b> Balancing complexities</a></li>
<li class="chapter" data-level="1.2.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#assessing-code-complexity"><i class="fa fa-check"></i><b>1.2.3</b> Assessing code complexity</a></li>
<li class="chapter" data-level="1.2.4" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#production-grade-software-engineering"><i class="fa fa-check"></i><b>1.2.4</b> Production-grade software engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#what-is-a-successful-shiny-app"><i class="fa fa-check"></i><b>1.3</b> What is a successful <code>{shiny}</code> app?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-exists"><i class="fa fa-check"></i><b>1.3.1</b> It exists</a></li>
<li class="chapter" data-level="1.3.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-accurate"><i class="fa fa-check"></i><b>1.3.2</b> It is accurate</a></li>
<li class="chapter" data-level="1.3.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-usable"><i class="fa fa-check"></i><b>1.3.3</b> It is usable</a></li>
<li class="chapter" data-level="1.3.4" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-immortal"><i class="fa fa-check"></i><b>1.3.4</b> It is immortal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="planning-ahead.html"><a href="planning-ahead.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a>
<ul>
<li class="chapter" data-level="2.1" data-path="planning-ahead.html"><a href="planning-ahead.html#working-with-a-long-term-mindset"><i class="fa fa-check"></i><b>2.1</b> Working with a “long-term” mindset</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="planning-ahead.html"><a href="planning-ahead.html#prepare-for-success"><i class="fa fa-check"></i><b>2.1.1</b> Prepare for success</a></li>
<li class="chapter" data-level="2.1.2" data-path="planning-ahead.html"><a href="planning-ahead.html#develop-with-the-kiss-principle"><i class="fa fa-check"></i><b>2.1.2</b> Develop with the KISS principle</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="planning-ahead.html"><a href="planning-ahead.html#working-as-a-team-tools-and-structure"><i class="fa fa-check"></i><b>2.2</b> Working as a team: Tools and structure</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="planning-ahead.html"><a href="planning-ahead.html#from-the-tools-point-of-view"><i class="fa fa-check"></i><b>2.2.1</b> From the tools point of view</a></li>
<li class="chapter" data-level="2.2.2" data-path="planning-ahead.html"><a href="planning-ahead.html#from-the-team-point-of-view"><i class="fa fa-check"></i><b>2.2.2</b> From the team point of view</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structuring-project.html"><a href="structuring-project.html"><i class="fa fa-check"></i><b>3</b> Structuring Your Project</a>
<ul>
<li class="chapter" data-level="3.1" data-path="structuring-project.html"><a href="structuring-project.html#shiny-app-as-a-package"><i class="fa fa-check"></i><b>3.1</b> <code>{shiny}</code> app as a package</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="structuring-project.html"><a href="structuring-project.html#what-is-in-a-production-grade-shiny-app"><i class="fa fa-check"></i><b>3.1.1</b> What is in a production-grade <code>{shiny}</code> app?</a></li>
<li class="chapter" data-level="3.1.2" data-path="structuring-project.html"><a href="structuring-project.html#resources"><i class="fa fa-check"></i><b>3.1.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="structuring-project.html"><a href="structuring-project.html#using-shiny-modules"><i class="fa fa-check"></i><b>3.2</b> Using <code>{shiny}</code> modules</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="structuring-project.html"><a href="structuring-project.html#why-shiny-modules"><i class="fa fa-check"></i><b>3.2.1</b> Why <code>{shiny}</code> modules?</a></li>
<li class="chapter" data-level="3.2.2" data-path="structuring-project.html"><a href="structuring-project.html#when-to-use-shiny-modules"><i class="fa fa-check"></i><b>3.2.2</b> When to use <code>{shiny}</code> modules</a></li>
<li class="chapter" data-level="3.2.3" data-path="structuring-project.html"><a href="structuring-project.html#a-practical-walkthrough"><i class="fa fa-check"></i><b>3.2.3</b> A practical walkthrough</a></li>
<li class="chapter" data-level="3.2.4" data-path="structuring-project.html"><a href="structuring-project.html#communication-between-modules"><i class="fa fa-check"></i><b>3.2.4</b> Communication between modules</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="structuring-project.html"><a href="structuring-project.html#structuring-your-app"><i class="fa fa-check"></i><b>3.3</b> Structuring your app</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="structuring-project.html"><a href="structuring-project.html#business-logic-and-application-logic"><i class="fa fa-check"></i><b>3.3.1</b> Business logic and application logic</a></li>
<li class="chapter" data-level="3.3.2" data-path="structuring-project.html"><a href="structuring-project.html#small-is-beautiful-bis-repetita"><i class="fa fa-check"></i><b>3.3.2</b> Small is beautiful (bis repetita)</a></li>
<li class="chapter" data-level="3.3.3" data-path="structuring-project.html"><a href="structuring-project.html#conventions-matter"><i class="fa fa-check"></i><b>3.3.3</b> Conventions matter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="golem.html"><a href="golem.html#what-is-golem"><i class="fa fa-check"></i><b>4.1</b> What is <code>{golem}</code>?</a></li>
<li class="chapter" data-level="4.2" data-path="golem.html"><a href="golem.html#understanding-golem-app-structure"><i class="fa fa-check"></i><b>4.2</b> Understanding <code>{golem}</code> app structure</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="golem.html"><a href="golem.html#description-and-namespace"><i class="fa fa-check"></i><b>4.2.1</b> <code>DESCRIPTION</code> and <code>NAMESPACE</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="golem.html"><a href="golem.html#r"><i class="fa fa-check"></i><b>4.2.2</b> R/</a></li>
<li class="chapter" data-level="4.2.3" data-path="golem.html"><a href="golem.html#golem-config"><i class="fa fa-check"></i><b>4.2.3</b> <code>golem-config</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="golem.html"><a href="golem.html#instappwww"><i class="fa fa-check"></i><b>4.2.4</b> <code>inst/app/www/</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="golem.html"><a href="golem.html#dev"><i class="fa fa-check"></i><b>4.2.5</b> <code>dev/</code></a></li>
<li class="chapter" data-level="4.2.6" data-path="golem.html"><a href="golem.html#man"><i class="fa fa-check"></i><b>4.2.6</b> <code>man/</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The Workflow</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workflow.html"><a href="workflow.html#step-1-design"><i class="fa fa-check"></i><b>5.1</b> Step 1: Design</a></li>
<li class="chapter" data-level="5.2" data-path="workflow.html"><a href="workflow.html#step-2-prototype"><i class="fa fa-check"></i><b>5.2</b> Step 2: Prototype</a></li>
<li class="chapter" data-level="5.3" data-path="workflow.html"><a href="workflow.html#step-3-build"><i class="fa fa-check"></i><b>5.3</b> Step 3: Build</a></li>
<li class="chapter" data-level="5.4" data-path="workflow.html"><a href="workflow.html#step-4-strengthen"><i class="fa fa-check"></i><b>5.4</b> Step 4: Strengthen</a></li>
<li class="chapter" data-level="5.5" data-path="workflow.html"><a href="workflow.html#step-5-deploy"><i class="fa fa-check"></i><b>5.5</b> Step 5: Deploy</a></li>
</ul></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="ux-matters.html"><a href="ux-matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ux-matters.html"><a href="ux-matters.html#simplicity-is-gold"><i class="fa fa-check"></i><b>6.1</b> Simplicity is gold</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ux-matters.html"><a href="ux-matters.html#how-we-read-the-web-scanning-content"><i class="fa fa-check"></i><b>6.1.1</b> How we read the web: Scanning content</a></li>
<li class="chapter" data-level="6.1.2" data-path="ux-matters.html"><a href="ux-matters.html#building-a-self-evident-app-or-at-least-self-explanatory"><i class="fa fa-check"></i><b>6.1.2</b> Building a self-evident app (or at least self-explanatory)</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ux-matters.html"><a href="ux-matters.html#the-danger-of-feature-creep"><i class="fa fa-check"></i><b>6.2</b> The danger of feature-creep</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="ux-matters.html"><a href="ux-matters.html#what-is-feature-creep"><i class="fa fa-check"></i><b>6.2.1</b> What is feature-creep?</a></li>
<li class="chapter" data-level="6.2.2" data-path="ux-matters.html"><a href="ux-matters.html#too-much-reactivity"><i class="fa fa-check"></i><b>6.2.2</b> Too much reactivity</a></li>
<li class="chapter" data-level="6.2.3" data-path="ux-matters.html"><a href="ux-matters.html#too-much-interactivity"><i class="fa fa-check"></i><b>6.2.3</b> Too much interactivity</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="ux-matters.html"><a href="ux-matters.html#web-accessibility"><i class="fa fa-check"></i><b>6.3</b> Web accessibility</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="ux-matters.html"><a href="ux-matters.html#about-accessibility"><i class="fa fa-check"></i><b>6.3.1</b> About accessibility</a></li>
<li class="chapter" data-level="6.3.2" data-path="ux-matters.html"><a href="ux-matters.html#making-your-app-accessible"><i class="fa fa-check"></i><b>6.3.2</b> Making your app accessible</a></li>
<li class="chapter" data-level="6.3.3" data-path="ux-matters.html"><a href="ux-matters.html#evaluating-your-app-accessibility-and-further-reading"><i class="fa fa-check"></i><b>6.3.3</b> Evaluating your app accessibility and further reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html"><i class="fa fa-check"></i><b>7</b> Don’t Rush into Coding</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#designing-before-coding"><i class="fa fa-check"></i><b>7.1</b> Designing before coding</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#the-urge-to-code"><i class="fa fa-check"></i><b>7.1.1</b> The urge to code</a></li>
<li class="chapter" data-level="7.1.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#knowing-where-to-search"><i class="fa fa-check"></i><b>7.1.2</b> Knowing where to search</a></li>
<li class="chapter" data-level="7.1.3" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#about-concept-map"><i class="fa fa-check"></i><b>7.1.3</b> About concept map</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#ask-questions"><i class="fa fa-check"></i><b>7.2</b> Ask questions</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#about-the-end-users"><i class="fa fa-check"></i><b>7.2.1</b> About the end users</a></li>
<li class="chapter" data-level="7.2.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#building-personas"><i class="fa fa-check"></i><b>7.2.2</b> Building personas</a></li>
<li class="chapter" data-level="7.2.3" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#pre-existing-code-base"><i class="fa fa-check"></i><b>7.2.3</b> Pre-existing code-base</a></li>
<li class="chapter" data-level="7.2.4" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#deployment"><i class="fa fa-check"></i><b>7.2.4</b> Deployment</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="8" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html"><i class="fa fa-check"></i><b>8</b> Setting up for Success with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#create-a-golem"><i class="fa fa-check"></i><b>8.1</b> Create a <code>{golem}</code></a></li>
<li class="chapter" data-level="8.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#setting-things-up-with-dev01_start.r"><i class="fa fa-check"></i><b>8.2</b> Setting things up with <code>dev/01_start.R</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#fill-the-description-and-set-options"><i class="fa fa-check"></i><b>8.2.1</b> Fill the DESCRIPTION and set options</a></li>
<li class="chapter" data-level="8.2.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#set-common-files"><i class="fa fa-check"></i><b>8.2.2</b> Set common files</a></li>
<li class="chapter" data-level="8.2.3" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#use-recommended-elements"><i class="fa fa-check"></i><b>8.2.3</b> Use recommended elements</a></li>
<li class="chapter" data-level="8.2.4" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-utility-functions"><i class="fa fa-check"></i><b>8.2.4</b> Add utility functions</a></li>
<li class="chapter" data-level="8.2.5" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#changing-the-favicon"><i class="fa fa-check"></i><b>8.2.5</b> Changing the favicon</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#setting-infrastructure-for-prototyping"><i class="fa fa-check"></i><b>8.3</b> Setting infrastructure for prototyping</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-modules-in-dev02_dev.r"><i class="fa fa-check"></i><b>8.3.1</b> Add modules in <code>dev/02_dev.R</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-css-and-js-files"><i class="fa fa-check"></i><b>8.3.2</b> Add CSS and JS files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="building-ispum-app.html"><a href="building-ispum-app.html"><i class="fa fa-check"></i><b>9</b> Building an “ipsum-app”</a>
<ul>
<li class="chapter" data-level="9.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototyping-is-crucial"><i class="fa fa-check"></i><b>9.1</b> Prototyping is crucial</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototype-then-polish"><i class="fa fa-check"></i><b>9.1.1</b> Prototype, then polish</a></li>
<li class="chapter" data-level="9.1.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#the-ui-first-approach"><i class="fa fa-check"></i><b>9.1.2</b> The “UI first” approach</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototyping-shiny"><i class="fa fa-check"></i><b>9.2</b> Prototyping <code>{shiny}</code></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#fast-ui-prototyping-with-shinipsum"><i class="fa fa-check"></i><b>9.2.1</b> Fast UI prototyping with <code>{shinipsum}</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#using-fakir-for-fake-data-generation"><i class="fa fa-check"></i><b>9.2.2</b> Using <code>{fakir}</code> for fake data generation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="building-ispum-app.html"><a href="building-ispum-app.html#proto-rmdfirst"><i class="fa fa-check"></i><b>9.3</b> Building with RMarkdown</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#define-the-content-of-the-application"><i class="fa fa-check"></i><b>9.3.1</b> Define the content of the application</a></li>
<li class="chapter" data-level="9.3.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#using-the-rmd-files-as-a-laboratory-notebook"><i class="fa fa-check"></i><b>9.3.2</b> Using the Rmd files as a laboratory notebook</a></li>
<li class="chapter" data-level="9.3.3" data-path="building-ispum-app.html"><a href="building-ispum-app.html#rmd-vignettes-and-documentation-first"><i class="fa fa-check"></i><b>9.3.3</b> Rmd, Vignettes, and documentation first</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="10" data-path="build-app-golem.html"><a href="build-app-golem.html"><i class="fa fa-check"></i><b>10</b> Building the App with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="build-app-golem.html"><a href="build-app-golem.html#add-dependencies"><i class="fa fa-check"></i><b>10.1</b> Add dependencies</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="build-app-golem.html"><a href="build-app-golem.html#package-dependencies"><i class="fa fa-check"></i><b>10.1.1</b> Package dependencies</a></li>
<li class="chapter" data-level="10.1.2" data-path="build-app-golem.html"><a href="build-app-golem.html#importing-packages-and-functions"><i class="fa fa-check"></i><b>10.1.2</b> Importing packages and functions</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="build-app-golem.html"><a href="build-app-golem.html#submodules-and-utility-functions"><i class="fa fa-check"></i><b>10.2</b> Submodules and utility functions</a></li>
<li class="chapter" data-level="10.3" data-path="build-app-golem.html"><a href="build-app-golem.html#add-tests"><i class="fa fa-check"></i><b>10.3</b> Add tests</a></li>
<li class="chapter" data-level="10.4" data-path="build-app-golem.html"><a href="build-app-golem.html#documentation-and-code-coverage"><i class="fa fa-check"></i><b>10.4</b> Documentation and code coverage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="build-app-golem.html"><a href="build-app-golem.html#vignette"><i class="fa fa-check"></i><b>10.4.1</b> Vignette</a></li>
<li class="chapter" data-level="10.4.2" data-path="build-app-golem.html"><a href="build-app-golem.html#code-coverage-and-continuous-integration"><i class="fa fa-check"></i><b>10.4.2</b> Code coverage and continuous integration</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="build-app-golem.html"><a href="build-app-golem.html#using-golem-dev-functions"><i class="fa fa-check"></i><b>10.5</b> Using <code>{golem}</code> dev functions</a></li>
</ul></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="11" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html"><i class="fa fa-check"></i><b>11</b> Build Yourself a Safety Net</a>
<ul>
<li class="chapter" data-level="11.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-your-app"><i class="fa fa-check"></i><b>11.1</b> Testing your app</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-business-logic"><i class="fa fa-check"></i><b>11.1.1</b> Testing the business logic</a></li>
<li class="chapter" data-level="11.1.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#shinytestserver"><i class="fa fa-check"></i><b>11.1.2</b> <code>shiny::testServer()</code></a></li>
<li class="chapter" data-level="11.1.3" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-interactive-logic"><i class="fa fa-check"></i><b>11.1.3</b> Testing the interactive logic</a></li>
<li class="chapter" data-level="11.1.4" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-app-load"><i class="fa fa-check"></i><b>11.1.4</b> Testing the app load</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#a-reproducible-environment"><i class="fa fa-check"></i><b>11.2</b> A reproducible environment</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#renv"><i class="fa fa-check"></i><b>11.2.1</b> <code>{renv}</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#docker"><i class="fa fa-check"></i><b>11.2.2</b> Docker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>12</b> Version Control</a>
<ul>
<li class="chapter" data-level="12.1" data-path="version-control.html"><a href="version-control.html#version-control-git"><i class="fa fa-check"></i><b>12.1</b> Using version control with <code>Git</code></a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="version-control.html"><a href="version-control.html#why-version-control"><i class="fa fa-check"></i><b>12.1.1</b> Why version control?</a></li>
<li class="chapter" data-level="12.1.2" data-path="version-control.html"><a href="version-control.html#git-basics-add---commit---push---pull"><i class="fa fa-check"></i><b>12.1.2</b> <code>Git</code> basics: <code>add</code> - <code>commit</code> - <code>push</code> - <code>pull</code></a></li>
<li class="chapter" data-level="12.1.3" data-path="version-control.html"><a href="version-control.html#about-branches"><i class="fa fa-check"></i><b>12.1.3</b> About branches</a></li>
<li class="chapter" data-level="12.1.4" data-path="version-control.html"><a href="version-control.html#issues"><i class="fa fa-check"></i><b>12.1.4</b> Issues</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="version-control.html"><a href="version-control.html#git-integration"><i class="fa fa-check"></i><b>12.2</b> <code>Git</code> integration</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="version-control.html"><a href="version-control.html#with-rstudio"><i class="fa fa-check"></i><b>12.2.1</b> With RStudio</a></li>
<li class="chapter" data-level="12.2.2" data-path="version-control.html"><a href="version-control.html#as-part-of-a-larger-world"><i class="fa fa-check"></i><b>12.2.2</b> As part of a larger world</a></li>
<li class="chapter" data-level="12.2.3" data-path="version-control.html"><a href="version-control.html#about-git-flow"><i class="fa fa-check"></i><b>12.2.3</b> About <code>git-flow</code></a></li>
<li class="chapter" data-level="12.2.4" data-path="version-control.html"><a href="version-control.html#further-readings-on-git"><i class="fa fa-check"></i><b>12.2.4</b> Further readings on <code>Git</code></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="version-control.html"><a href="version-control.html#automated-testing"><i class="fa fa-check"></i><b>12.3</b> Automated testing</a></li>
</ul></li>
<li class="part"><span><b>VI Step 5: Deploy</b></span></li>
<li class="chapter" data-level="13" data-path="deploy.html"><a href="deploy.html"><i class="fa fa-check"></i><b>13</b> Deploy Your Application</a>
<ul>
<li class="chapter" data-level="13.1" data-path="deploy.html"><a href="deploy.html#before-deployment-checklist"><i class="fa fa-check"></i><b>13.1</b> Before deployment checklist</a></li>
<li class="chapter" data-level="13.2" data-path="deploy.html"><a href="deploy.html#sharing-your-app-as-a-package"><i class="fa fa-check"></i><b>13.2</b> Sharing your app as a package</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="deploy.html"><a href="deploy.html#install-on-your-machine"><i class="fa fa-check"></i><b>13.2.1</b> Install on your machine</a></li>
<li class="chapter" data-level="13.2.2" data-path="deploy.html"><a href="deploy.html#share-as-a-built-package"><i class="fa fa-check"></i><b>13.2.2</b> Share as a built package</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="deploy.html"><a href="deploy.html#deploying-apps-with-golem"><i class="fa fa-check"></i><b>13.3</b> Deploying apps with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="deploy.html"><a href="deploy.html#rstudio-environments"><i class="fa fa-check"></i><b>13.3.1</b> RStudio environments</a></li>
<li class="chapter" data-level="13.3.2" data-path="deploy.html"><a href="deploy.html#docker-1"><i class="fa fa-check"></i><b>13.3.2</b> Docker</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Optimizing</b></span></li>
<li class="chapter" data-level="14" data-path="need-for-optimization.html"><a href="need-for-optimization.html"><i class="fa fa-check"></i><b>14</b> The Need for Optimization</a>
<ul>
<li class="chapter" data-level="14.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#build-first-then-optimize"><i class="fa fa-check"></i><b>14.1</b> Build first, then optimize</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#identifying-bottlenecks"><i class="fa fa-check"></i><b>14.1.1</b> Identifying bottlenecks</a></li>
<li class="chapter" data-level="14.1.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#do-you-need-faster-functions"><i class="fa fa-check"></i><b>14.1.2</b> Do you need faster functions?</a></li>
<li class="chapter" data-level="14.1.3" data-path="need-for-optimization.html"><a href="need-for-optimization.html#dont-sacrifice-readability"><i class="fa fa-check"></i><b>14.1.3</b> Don’t sacrifice readability</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#tools-for-profiling"><i class="fa fa-check"></i><b>14.2</b> Tools for profiling</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#profiling-r-code"><i class="fa fa-check"></i><b>14.2.1</b> Profiling R code</a></li>
<li class="chapter" data-level="14.2.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#profiling-shiny"><i class="fa fa-check"></i><b>14.2.2</b> Profiling <code>{shiny}</code></a></li>
<li class="chapter" data-level="14.2.3" data-path="need-for-optimization.html"><a href="need-for-optimization.html#more-resources-about-web-page-performance"><i class="fa fa-check"></i><b>14.2.3</b> More resources about web-page performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="common-app-caveats.html"><a href="common-app-caveats.html"><i class="fa fa-check"></i><b>15</b> Common Application Caveats</a>
<ul>
<li class="chapter" data-level="15.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reactivity-anti-patterns"><i class="fa fa-check"></i><b>15.1</b> Reactivity anti-patterns</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reactivity-is-awesome-until-it-is-not"><i class="fa fa-check"></i><b>15.1.1</b> Reactivity is awesome… until it is not</a></li>
<li class="chapter" data-level="15.1.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#observe-vs-observeevent"><i class="fa fa-check"></i><b>15.1.2</b> <code>observe</code> vs <code>observeEvent</code></a></li>
<li class="chapter" data-level="15.1.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#building-triggers-and-watchers"><i class="fa fa-check"></i><b>15.1.3</b> Building triggers and watchers</a></li>
<li class="chapter" data-level="15.1.4" data-path="common-app-caveats.html"><a href="common-app-caveats.html#using-r6-as-data-storage"><i class="fa fa-check"></i><b>15.1.4</b> Using R6 as data storage</a></li>
<li class="chapter" data-level="15.1.5" data-path="common-app-caveats.html"><a href="common-app-caveats.html#logging-reactivity-with-whereami"><i class="fa fa-check"></i><b>15.1.5</b> Logging reactivity with <code>{whereami}</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#r-does-too-much"><i class="fa fa-check"></i><b>15.2</b> R does too much</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#rendering-the-ui-from-the-server-side"><i class="fa fa-check"></i><b>15.2.1</b> Rendering the UI from the server side</a></li>
<li class="chapter" data-level="15.2.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#too-much-data-in-memory"><i class="fa fa-check"></i><b>15.2.2</b> Too much data in memory</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reading-data"><i class="fa fa-check"></i><b>15.3</b> Reading data</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#including-data-in-your-application"><i class="fa fa-check"></i><b>15.3.1</b> Including data in your application</a></li>
<li class="chapter" data-level="15.3.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reading-external-datasets"><i class="fa fa-check"></i><b>15.3.2</b> Reading external datasets</a></li>
<li class="chapter" data-level="15.3.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#using-external-databases"><i class="fa fa-check"></i><b>15.3.3</b> Using external databases</a></li>
<li class="chapter" data-level="15.3.4" data-path="common-app-caveats.html"><a href="common-app-caveats.html#data-source-checklist"><i class="fa fa-check"></i><b>15.3.4</b> Data-source checklist</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>16</b> Optimizing <code>{shiny}</code> Code</a>
<ul>
<li class="chapter" data-level="16.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#optimizing-r-code"><i class="fa fa-check"></i><b>16.1</b> Optimizing R code</a></li>
<li class="chapter" data-level="16.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-elements"><i class="fa fa-check"></i><b>16.2</b> Caching elements</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#what-is-caching"><i class="fa fa-check"></i><b>16.2.1</b> What is caching?</a></li>
<li class="chapter" data-level="16.2.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#native-caching-in-r"><i class="fa fa-check"></i><b>16.2.2</b> Native caching in R</a></li>
<li class="chapter" data-level="16.2.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-in-shiny"><i class="fa fa-check"></i><b>16.2.3</b> Caching in <code>{shiny}</code></a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#asynchronous-in-shiny"><i class="fa fa-check"></i><b>16.3</b> Asynchronous in <code>{shiny}</code></a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#how-to"><i class="fa fa-check"></i><b>16.3.1</b> How to</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="using-javascript.html"><a href="using-javascript.html"><i class="fa fa-check"></i><b>17</b> Using JavaScript</a>
<ul>
<li class="chapter" data-level="17.1" data-path="using-javascript.html"><a href="using-javascript.html#introduction-1"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="using-javascript.html"><a href="using-javascript.html#a-quick-introduction-to-javascript"><i class="fa fa-check"></i><b>17.2</b> A quick introduction to JavaScript</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="using-javascript.html"><a href="using-javascript.html#about-javascript"><i class="fa fa-check"></i><b>17.2.1</b> About JavaScript</a></li>
<li class="chapter" data-level="17.2.2" data-path="using-javascript.html"><a href="using-javascript.html#including-javascript-code-in-your-app"><i class="fa fa-check"></i><b>17.2.2</b> Including JavaScript code in your app</a></li>
<li class="chapter" data-level="17.2.3" data-path="using-javascript.html"><a href="using-javascript.html#understanding-html-class-and-id"><i class="fa fa-check"></i><b>17.2.3</b> Understanding HTML, class, and id</a></li>
<li class="chapter" data-level="17.2.4" data-path="using-javascript.html"><a href="using-javascript.html#querying-in-vanilla-javascript"><i class="fa fa-check"></i><b>17.2.4</b> Querying in Vanilla JavaScript</a></li>
<li class="chapter" data-level="17.2.5" data-path="using-javascript.html"><a href="using-javascript.html#about-dom-events"><i class="fa fa-check"></i><b>17.2.5</b> About DOM events</a></li>
<li class="chapter" data-level="17.2.6" data-path="using-javascript.html"><a href="using-javascript.html#about-jquery-and-jquery-selectors"><i class="fa fa-check"></i><b>17.2.6</b> About <code>jQuery</code> and <code>jQuery</code> selectors</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="using-javascript.html"><a href="using-javascript.html#client-side-javascript"><i class="fa fa-check"></i><b>17.3</b> Client-side JavaScript</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="using-javascript.html"><a href="using-javascript.html#common-patterns"><i class="fa fa-check"></i><b>17.3.1</b> Common patterns</a></li>
<li class="chapter" data-level="17.3.2" data-path="using-javascript.html"><a href="using-javascript.html#where-to-put-them-back-to-javascript-events"><i class="fa fa-check"></i><b>17.3.2</b> Where to put them: Back to JavaScript Events</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="using-javascript.html"><a href="using-javascript.html#javascript---shiny-communication"><i class="fa fa-check"></i><b>17.4</b> JavaScript &lt;-&gt; <code>{shiny}</code> communication</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="using-javascript.html"><a href="using-javascript.html#from-r-to-javascript"><i class="fa fa-check"></i><b>17.4.1</b> From R to JavaScript</a></li>
<li class="chapter" data-level="17.4.2" data-path="using-javascript.html"><a href="using-javascript.html#from-javascript-to-r"><i class="fa fa-check"></i><b>17.4.2</b> From JavaScript to R</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="using-javascript.html"><a href="using-javascript.html#about-shinyjs-js-functions"><i class="fa fa-check"></i><b>17.5</b> About <code>{shinyjs}</code> JS functions</a></li>
<li class="chapter" data-level="17.6" data-path="using-javascript.html"><a href="using-javascript.html#one-last-thing-api-calls"><i class="fa fa-check"></i><b>17.6</b> One last thing: API calls</a></li>
<li class="chapter" data-level="17.7" data-path="using-javascript.html"><a href="using-javascript.html#learn-more-about-javascript"><i class="fa fa-check"></i><b>17.7</b> Learn more about JavaScript</a>
<ul>
<li class="chapter" data-level="17.7.1" data-path="using-javascript.html"><a href="using-javascript.html#shiny-and-javascript"><i class="fa fa-check"></i><b>17.7.1</b> <code>{shiny}</code> and JavaScript</a></li>
<li class="chapter" data-level="17.7.2" data-path="using-javascript.html"><a href="using-javascript.html#javascript-basics"><i class="fa fa-check"></i><b>17.7.2</b> JavaScript basics</a></li>
<li class="chapter" data-level="17.7.3" data-path="using-javascript.html"><a href="using-javascript.html#jquery"><i class="fa fa-check"></i><b>17.7.3</b> jQuery</a></li>
<li class="chapter" data-level="17.7.4" data-path="using-javascript.html"><a href="using-javascript.html#intermediateadvanced-javascript"><i class="fa fa-check"></i><b>17.7.4</b> Intermediate/advanced JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>18</b> A Gentle Introduction to CSS</a>
<ul>
<li class="chapter" data-level="18.1" data-path="css.html"><a href="css.html#what-is-css"><i class="fa fa-check"></i><b>18.1</b> What is CSS?</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="css.html"><a href="css.html#about-css"><i class="fa fa-check"></i><b>18.1.1</b> About CSS</a></li>
<li class="chapter" data-level="18.1.2" data-path="css.html"><a href="css.html#shinys-default-fluidpage"><i class="fa fa-check"></i><b>18.1.2</b> <code>{shiny}</code>’s default: <code>fluidPage()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="css.html"><a href="css.html#getting-started-with-css"><i class="fa fa-check"></i><b>18.2</b> Getting started with CSS</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="css.html"><a href="css.html#about-css-syntax"><i class="fa fa-check"></i><b>18.2.1</b> About CSS syntax</a></li>
<li class="chapter" data-level="18.2.2" data-path="css.html"><a href="css.html#css-selectors"><i class="fa fa-check"></i><b>18.2.2</b> CSS selectors</a></li>
<li class="chapter" data-level="18.2.3" data-path="css.html"><a href="css.html#css-properties"><i class="fa fa-check"></i><b>18.2.3</b> CSS properties</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="css.html"><a href="css.html#integrate-css-files-in-your-shiny-app"><i class="fa fa-check"></i><b>18.3</b> Integrate CSS files in your <code>{shiny}</code> app</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="css.html"><a href="css.html#inline-css"><i class="fa fa-check"></i><b>18.3.1</b> Inline CSS</a></li>
<li class="chapter" data-level="18.3.2" data-path="css.html"><a href="css.html#writing-in-a-tagsstyle"><i class="fa fa-check"></i><b>18.3.2</b> Writing in a <code>tags$style()</code></a></li>
<li class="chapter" data-level="18.3.3" data-path="css.html"><a href="css.html#including-external-files"><i class="fa fa-check"></i><b>18.3.3</b> Including external files</a></li>
<li class="chapter" data-level="18.3.4" data-path="css.html"><a href="css.html#using-r-packages"><i class="fa fa-check"></i><b>18.3.4</b> Using R packages</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="css.html"><a href="css.html#external-resources"><i class="fa fa-check"></i><b>18.4</b> External resources</a></li>
</ul></li>
<li class="part"><span><b>VIII Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html"><i class="fa fa-check"></i>Appendix A - Use Case: Building an App from Start to Finish</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#about-the-application"><i class="fa fa-check"></i>About the application</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-1-design-1"><i class="fa fa-check"></i>Step 1: Design</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deciphering-the-specifications"><i class="fa fa-check"></i>Deciphering the specifications</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#building-a-concept-map"><i class="fa fa-check"></i>Building a concept map</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#asking-questions"><i class="fa fa-check"></i>Asking questions</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#building-personas-1"><i class="fa fa-check"></i>Building personas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-2-prototyping"><i class="fa fa-check"></i>Step 2: Prototyping</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#back-end-in-rmd"><i class="fa fa-check"></i>Back-end in Rmd</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#ui-prototyping"><i class="fa fa-check"></i>UI prototyping</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-3-build-1"><i class="fa fa-check"></i>Step 3: Build</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-4-strengthen-1"><i class="fa fa-check"></i>Step 4: Strengthen</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-5-deploy-1"><i class="fa fa-check"></i>Step 5: Deploy</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#before-deployment-checklist-1"><i class="fa fa-check"></i>Before deployment checklist</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-as-a-tar.gz"><i class="fa fa-check"></i>Deploy as a tar.gz</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-on-rstudio-connect"><i class="fa fa-check"></i>Deploy on RStudio Connect</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-with-docker"><i class="fa fa-check"></i>Deploy with Docker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-b---session-info.html"><a href="appendix-b---session-info.html"><i class="fa fa-check"></i>Appendix B - Session Info</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="using-javascript" class="section level1 hasAnchor" number="17">
<h1><span class="header-section-number">Chapter 17</span> Using JavaScript<a href="using-javascript.html#using-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="prelude" class="section level4 unnumbered hasAnchor">
<h4>Prelude<a href="using-javascript.html#prelude" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Note you can build a successful, production-grade <code>{shiny}</code><span class="citation">(<a href="#ref-R-shiny">Chang et al. 2023</a>)</span> application without ever writing a single line of JavaScript code.
Even more when you can use a lot of tools that already bundle JavaScript functionalities: a great example of that being <code>{shinyjs}</code> <span class="citation">(<a href="#ref-R-shinyjs">Attali 2021</a>)</span>, which allows you to interact with your application using JavaScript, without writing a single line of JavaScript.</p>
<p>We chose to include this chapter in this book as it will help you get a better understanding on how <code>{shiny}</code> works at its core, and show you that getting at ease with JavaScript can help you get better at building web applications using R in the long run.
It can also help you extend <code>{shiny}</code> with other JavaScript libraries, for example, using <code>{htmlwidgets}</code> <span class="citation">(<a href="#ref-R-htmlwidgets">Vaidyanathan et al. 2023</a>)</span>, when you get better at writing JavaScript.</p>
<p>That being said, note also that every inclusion of external JavaScript code or library can present a security risk for your application, so don’t include code you don’t know/understand in your application unless you are sure of what you are doing.
As a rule of thumb, always go for an existing and tested solution when you need JavaScript widgets/functionalities, instead of trying to implement them yourself.</p>
</div>
<div id="introduction-1" class="section level2 hasAnchor" number="17.1">
<h2><span class="header-section-number">17.1</span> Introduction<a href="using-javascript.html#introduction-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At its core, <strong>building a <code>{shiny}</code> app is building a JavaScript application</strong> that can talk with an R session.
This process is invisible to most <code>{shiny}</code> developers, who usually do everything in R.
In fact, most of the <code>{shiny}</code> apps out there are 100% written with R.</p>
<p>In fact, when you are writing UI elements in <code>{shiny}</code>, <strong>what you are actually doing is building a series of HTML tags</strong>.</p>
<p>For example, this simple <code>{shiny}</code> <span class="citation">(<a href="#ref-R-shiny">Chang et al. 2023</a>)</span> code returns a series of HTML tags:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="using-javascript.html#cb317-1" tabindex="-1"></a><span class="fu">fluidPage</span>(</span>
<span id="cb317-2"><a href="using-javascript.html#cb317-2" tabindex="-1"></a>  <span class="fu">h2</span>(<span class="st">&quot;hey&quot;</span>), </span>
<span id="cb317-3"><a href="using-javascript.html#cb317-3" tabindex="-1"></a>  <span class="fu">textInput</span>(<span class="st">&quot;act&quot;</span>, <span class="st">&quot;Ipt&quot;</span>)</span>
<span id="cb317-4"><a href="using-javascript.html#cb317-4" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb318"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb318-1"><a href="using-javascript.html#cb318-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;container-fluid&quot;</span><span class="dt">&gt;</span></span>
<span id="cb318-2"><a href="using-javascript.html#cb318-2" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>hey<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb318-3"><a href="using-javascript.html#cb318-3" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;form-group shiny-input-container&quot;</span><span class="dt">&gt;</span></span>
<span id="cb318-4"><a href="using-javascript.html#cb318-4" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;control-label&quot;</span><span class="ot"> for</span><span class="op">=</span><span class="st">&quot;act&quot;</span><span class="dt">&gt;</span>Ipt<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb318-5"><a href="using-javascript.html#cb318-5" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;act&quot;</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;form-control&quot;</span><span class="ot"> value</span><span class="op">=</span><span class="st">&quot;&quot;</span><span class="dt">/&gt;</span></span>
<span id="cb318-6"><a href="using-javascript.html#cb318-6" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb318-7"><a href="using-javascript.html#cb318-7" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Later on, when the app is launched, <code>{shiny}</code> binds events to UI elements, and these JavaScript events will communicate with R, in the sense that they will send data to R, and receive data from R.
What happens under the hood is a little bit complex and out of scope for this book, but the general idea is that R talks to your browser through a web socket (that you can imagine as a small “phone line” with both software listening at each end, both being able to send messages to the other),<a href="#fn66" class="footnote-ref" id="fnref66"><sup>66</sup></a> and this browser talks to R through the same web socket.</p>
<p>Most of the time, when the JavaScript side of the websocket receives one of these events, the page the user sees is modified (for example, a plot is drawn).
On the R end of the websocket, i.e. when R receives data from the web page, a value is fetched, and something is computed.</p>
<p>It’s important to note here that the <strong>communication happens in both directions</strong>: from R to JavaScript, and from JavaScript to R.
In fact, when we write a piece of code like <code>sliderInput("first_input", "Select a number", 1, 10, 5)</code>, what we are doing is creating a binding between JavaScript and R, where the JavaScript runtime (in the browser) listens to any event happening on the slider with the id <code>"plop"</code>, and whenever it detects that something happens to this element, something (most of the time its value) is sent back to R, and R does computation based on that value.
With <code>output$bla &lt;- renderPlot({})</code>, what we are doing is making the two communicate the other way around: we are telling JavaScript to listen to any incoming data from R for the <code>id</code> <code>"bla"</code>, and whenever JavaScript sees incoming data from R, it puts it into the proper HTML tag (here, JavaScript inserts the image received from R in the <code>&lt;img&gt;</code> tags with the id <code>bla</code>).</p>
<p>Even if everything is written in R, we <strong>are</strong> writing a web application, i.e..
HTML, CSS and JavaScript elements.
Once you have realized that, the possibilities are endless: in fact almost anything doable in a “classic” web app can be done in <code>{shiny}</code> with a little bit of tweaking.
What this also implies is that getting (even a little bit) better at writing HTML, CSS, and especially JavaScript will make your app better, smaller, and more user-friendly, as JavaScript is a language that has been designed to interact with a web page: change element appearances, hide and show things, click somewhere, show alerts and prompts, etc.
<strong>Knowing just enough JavaScript can improve the quality of your app</strong>: especially when you have been using R to render some complex UIs: think conditional panels, simulating a button click from the server, hide and show elements, etc.
All these things are good examples of where you should be using JavaScript instead of building more or less complex <code>renderUI</code> or <code>insertUI</code> patterns in your server.</p>
<p>Moreover, the number of JavaScript libraries available on the web is tremendous; and the good news is that <code>{shiny}</code> has everything it needs to bundle external JavaScript libraries inside your application.<a href="#fn67" class="footnote-ref" id="fnref67"><sup>67</sup></a></p>
<p>This is what this section of the book aims at: giving you just enough JavaScript knowledge to lighten your <code>{shiny}</code> app, in order to improve the global user and developer experience.
In this chapter, we will first review some JavaScript basics which can be used “client-side” only, i.e. only in your browser.
Then, we will talk about making R and JS communicate with each other, and explore some common patterns for JavaScript in <code>{shiny}</code>.
Finally, we will quickly present some of the functions available in <code>{golem}</code> <span class="citation">(<a href="#ref-R-golem">Fay et al. 2024</a>)</span> that can be used to launch JavaScript.</p>
<p><em>Note that this chapter does not try to be a comprehensive JavaScript course. External resources are linked all throughout this chapter and at the end.</em></p>
<div style="page-break-after: always;"></div>
</div>
<div id="a-quick-introduction-to-javascript" class="section level2 hasAnchor" number="17.2">
<h2><span class="header-section-number">17.2</span> A quick introduction to JavaScript<a href="using-javascript.html#a-quick-introduction-to-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="about-javascript" class="section level3 hasAnchor" number="17.2.1">
<h3><span class="header-section-number">17.2.1</span> About JavaScript<a href="using-javascript.html#about-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>JavaScript is a programming language which has been designed to work in the browser.<a href="#fn68" class="footnote-ref" id="fnref68"><sup>68</sup></a>
To play with a JavaScript console, the fastest way is to open your favorite web browser, and to open the developer tools.
In Google Chrome, it’s available under View &gt; Developer &gt; Developer Tools.
This will open a new interface where you can have access to a JavaScript console under the Console tab.
Here, you can try your first JavaScript code!
For example, you can try running <code>var message = "Hello world"; alert(message);</code>.</p>
<p>As you might have guessed, we will not be focusing on playing with JavaScript in your browser console: what we want to know is how to insert JavaScript code inside a <code>{shiny}</code> application.</p>
</div>
<div id="including-javascript-code-in-your-app" class="section level3 hasAnchor" number="17.2.2">
<h3><span class="header-section-number">17.2.2</span> Including JavaScript code in your app<a href="using-javascript.html#including-javascript-code-in-your-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are three ways to include the JavaScript code inside your web app:</p>
<ul>
<li>As an external file, which is served to the browser alongside your main application page</li>
<li>Inside a <code>&lt;script&gt;</code> HTML tag inside your page</li>
<li>Inline, on a specific tag, for example by adding an <code>onclick</code> event straight on a tag</li>
</ul>
<p><em>Note that good practice when it comes to including JavaScript is to add the code inside an external file.</em></p>
<p>If you are working with <code>{golem}</code>, including a JavaScript file is achieved via two functions:</p>
<ul>
<li><code>golem::add_js_file("name")</code>, which adds a standard JavaScript file, i.e. one which is not meant to be used to communicate with R. We’ll see in the first part of this chapter how to add JavaScript code there.</li>
<li><code>golem::add_js_handler("name")</code>, which creates a file with a skeleton for <code>{shiny}</code> handlers. We’ll see this second type of element in the <code>JavaScript &lt;-&gt; R communication</code> part.</li>
<li><code>golem::add_js_binding("name")</code>, for more advanced use cases, when you want to build your own custom inputs, i.e. when you want to create a custom HTML element that can be used to interact with <code>{shiny}</code>. See <a href="https://shiny.rstudio.com/articles/js-custom-input.html">shiny.rstudio.com/articles/js-custom-input.html</a> for more information about how to complete this skeleton.</li>
</ul>
<p>OK, good, but what do we do now?
Note that in this chapter, we will not be covering basic JavaScript object and manipulation.
Feel free to refer to the first chapter of <a href="http://connect.thinkr.fr/js4shinyfieldnotes/intro.html">JavaScript 4 <code>{shiny}</code> - Field Notes</a> for a detailed introduction to objects and object manipulation, or follow one of the resources linked at the end of this chapter.</p>
</div>
<div id="understanding-html-class-and-id" class="section level3 hasAnchor" number="17.2.3">
<h3><span class="header-section-number">17.2.3</span> Understanding HTML, class, and id<a href="using-javascript.html#understanding-html-class-and-id" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have to think of a web page as a tree, where the top of the web page is the root node, and every element in the page is a node in this tree (this tree is called a DOM, for Document Object Model).
<strong>You can work on any of these HTML nodes with JavaScript</strong>: modify it, bind events to it and/or listen to events, hide and show, etc.
But first, <strong>you have to find a way to identify these elements</strong>: either as a group of elements or as a unique element inside the whole tree.
That is what HTML semantic elements, classes, and ids are made for.
Consider this piece of code:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="using-javascript.html#cb319-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb319-2"><a href="using-javascript.html#cb319-2" tabindex="-1"></a><span class="fu">fluidPage</span>(</span>
<span id="cb319-3"><a href="using-javascript.html#cb319-3" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Hello Shiny&quot;</span>), </span>
<span id="cb319-4"><a href="using-javascript.html#cb319-4" tabindex="-1"></a>   <span class="fu">textInput</span>(<span class="st">&quot;act&quot;</span>, <span class="st">&quot;Ipt&quot;</span>)</span>
<span id="cb319-5"><a href="using-javascript.html#cb319-5" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb320"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb320-1"><a href="using-javascript.html#cb320-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;container-fluid&quot;</span><span class="dt">&gt;</span></span>
<span id="cb320-2"><a href="using-javascript.html#cb320-2" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Hello Shiny<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb320-3"><a href="using-javascript.html#cb320-3" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;form-group shiny-input-container&quot;</span><span class="dt">&gt;</span></span>
<span id="cb320-4"><a href="using-javascript.html#cb320-4" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;control-label&quot;</span><span class="ot"> for</span><span class="op">=</span><span class="st">&quot;act&quot;</span><span class="dt">&gt;</span>Ipt<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb320-5"><a href="using-javascript.html#cb320-5" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;act&quot;</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;form-control&quot;</span><span class="ot"> value</span><span class="op">=</span><span class="st">&quot;&quot;</span><span class="dt">/&gt;</span></span>
<span id="cb320-6"><a href="using-javascript.html#cb320-6" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb320-7"><a href="using-javascript.html#cb320-7" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code></pre></div>
<p>This <code>{shiny}</code> code creates a piece of HTML code containing three nodes: a <code>div</code> with a specific class (a Bootstrap container), an <code>h2</code>, which is a level-two header, and a button which has an id and a class.
Both are included in the <code>div</code>.
Let’s detail what we have here:</p>
<ul>
<li>HTML tags, which are the building blocks of the “tree”: here <code>div</code>, <code>h2</code> and <code>button</code> are HTML tags.</li>
<li>The button has an <code>id</code>, which is short for “identifier”. Note that this id has to be unique: the id of an element allows you to refer to this exact element. In the context of <code>{shiny}</code>, it allows JavaScript and R to talk to each other. For example, if you are rendering a plot, you have to be sure it is rendered at the correct spot in the UI, hence the need for a unique id in <code>renderPlot()</code>. Same goes for your inputs: if you are computing a value based on an input value, you have to be sure that this value is the correct one.</li>
<li>Elements can have a class which can apply to multiple elements. This can be used in JavaScript, but it is also very useful for styling elements in CSS.</li>
</ul>
</div>
<div id="querying-in-vanilla-javascript" class="section level3 hasAnchor" number="17.2.4">
<h3><span class="header-section-number">17.2.4</span> Querying in Vanilla JavaScript<a href="using-javascript.html#querying-in-vanilla-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In “Vanilla” JavaScript (i.e. without any external plugins installed), you can query these elements using methods from the <code>document</code> object.
For example:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb321-1"><a href="using-javascript.html#cb321-1" tabindex="-1"></a><span class="co">// Given</span></span>
<span id="cb321-2"><a href="using-javascript.html#cb321-2" tabindex="-1"></a><span class="op">&lt;</span>div id <span class="op">=</span> <span class="st">&quot;first&quot;</span> name<span class="op">=</span><span class="st">&quot;number&quot;</span> <span class="kw">class</span> <span class="op">=</span> <span class="st">&quot;widediv&quot;</span><span class="op">&gt;</span>Hey<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb321-3"><a href="using-javascript.html#cb321-3" tabindex="-1"></a></span>
<span id="cb321-4"><a href="using-javascript.html#cb321-4" tabindex="-1"></a><span class="co">// Query with the ID</span></span>
<span id="cb321-5"><a href="using-javascript.html#cb321-5" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;#first&quot;</span>)</span>
<span id="cb321-6"><a href="using-javascript.html#cb321-6" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;first&quot;</span>)</span>
<span id="cb321-7"><a href="using-javascript.html#cb321-7" tabindex="-1"></a></span>
<span id="cb321-8"><a href="using-javascript.html#cb321-8" tabindex="-1"></a><span class="co">// With the class</span></span>
<span id="cb321-9"><a href="using-javascript.html#cb321-9" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&quot;.widediv&quot;</span>)</span>
<span id="cb321-10"><a href="using-javascript.html#cb321-10" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementsByClassName</span>(<span class="st">&quot;widediv&quot;</span>) </span>
<span id="cb321-11"><a href="using-javascript.html#cb321-11" tabindex="-1"></a></span>
<span id="cb321-12"><a href="using-javascript.html#cb321-12" tabindex="-1"></a><span class="co">// With the name attribute</span></span>
<span id="cb321-13"><a href="using-javascript.html#cb321-13" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementsByName</span>(<span class="st">&quot;number&quot;</span>) </span>
<span id="cb321-14"><a href="using-javascript.html#cb321-14" tabindex="-1"></a></span>
<span id="cb321-15"><a href="using-javascript.html#cb321-15" tabindex="-1"></a><span class="co">// Using the tag name</span></span>
<span id="cb321-16"><a href="using-javascript.html#cb321-16" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementsByTagName</span>(<span class="st">&quot;div&quot;</span>)</span></code></pre></div>
<p>Note that some of these methods have been introduced with ES6, which is a version of JavaScript that came out in 2015.
This version of JavaScript is supported by most browsers since mid-2016 (and June 2017 for Firefox) (see <a href="https://www.w3schools.com/js/js_versions.asp">JavaScript Versions</a> from W3Schools).
Most of your users should now be using a browser version that is compatible with ES6, but that is something that you might want to keep in mind: browser version matters when it comes to using JavaScript.
Indeed, some companies (for internal reason) are still using old versions of Internet Explorer: a constraint you want to be aware of before starting to build the app, hence a question that you want to ask during the Design step.</p>
</div>
<div id="about-dom-events" class="section level3 hasAnchor" number="17.2.5">
<h3><span class="header-section-number">17.2.5</span> About DOM events<a href="using-javascript.html#about-dom-events" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When users navigate to a web page, they will generate events on the page: clicking, hovering over elements, pressing keys, etc.
All these events are listened to by the JavaScript runtime, plus some events that are not generated by the users: for example, there is a “ready” event generated when the web page has finished loading.
Most of these events are linked to a specific node in the tree: for example, if you click on something, you are clicking on a node in the DOM.
That is where JavaScript events come into play: when an event is triggered in JavaScript, you can link to it a “reaction”, in other words a piece of JavaScript code that is executed when this event occurs.</p>
<p>Here are some examples of events:</p>
<ul>
<li><p><code>click</code> / <code>dblclick</code></p></li>
<li><p><code>focus</code></p></li>
<li><p><code>keypress</code>, <code>keydown</code>, <code>keyup</code></p></li>
<li><p><code>mousedown</code>, <code>mouseenter</code>, <code>mouseleave</code>, <code>mousemove</code>, <code>mouseout</code>, <code>mouseover</code>, <code>mouseup</code></p></li>
<li><p><code>scroll</code></p></li>
</ul>
<p>For a full list, please refer to <a href="https://developer.mozilla.org/fr/docs/Web/Events" class="uri">https://developer.mozilla.org/fr/docs/Web/Events</a>.</p>
<p>Once you have this list in mind, you can select elements in the DOM, add an <code>addEventListener</code> to them, and define a callback function (which is executed when the event is triggered).
For example, the code below adds an event to the <code>input</code> when a key is pressed, showing a native <code>alert()</code> to the user.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb322-1"><a href="using-javascript.html#cb322-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> id </span><span class="op">=</span> <span class="st">&quot;firstinput&quot;</span><span class="dt">&gt;</span></span>
<span id="cb322-2"><a href="using-javascript.html#cb322-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span> </span>
<span id="cb322-3"><a href="using-javascript.html#cb322-3" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;firstinput&quot;</span>)<span class="op">.</span><span class="fu">addEventListener</span>(</span>
<span id="cb322-4"><a href="using-javascript.html#cb322-4" tabindex="-1"></a>    <span class="st">&quot;keypress&quot;</span><span class="op">,</span> </span>
<span id="cb322-5"><a href="using-javascript.html#cb322-5" tabindex="-1"></a>    <span class="kw">function</span>(){</span>
<span id="cb322-6"><a href="using-javascript.html#cb322-6" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&quot;Pressed!&quot;</span>)</span>
<span id="cb322-7"><a href="using-javascript.html#cb322-7" tabindex="-1"></a>    }</span>
<span id="cb322-8"><a href="using-javascript.html#cb322-8" tabindex="-1"></a>  )</span>
<span id="cb322-9"><a href="using-javascript.html#cb322-9" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span></code></pre></div>
<p>Note that <code>{shiny}</code> also generates events, meaning that you can customize the behavior of your application based on these events.
Here is a code that launches an alert when <code>{shiny}</code> is connected:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb323-1"><a href="using-javascript.html#cb323-1" tabindex="-1"></a><span class="fu">$</span>(<span class="bu">document</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;shiny:connected&#39;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb323-2"><a href="using-javascript.html#cb323-2" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="st">&#39;Connected to the server&#39;</span>)<span class="op">;</span> </span>
<span id="cb323-3"><a href="using-javascript.html#cb323-3" tabindex="-1"></a>})<span class="op">;</span> </span></code></pre></div>
<p>But wait, what is this weird <code>$()</code>?
That’s <code>jQuery</code>, and we will discover it in the very next section!</p>
</div>
<div id="about-jquery-and-jquery-selectors" class="section level3 hasAnchor" number="17.2.6">
<h3><span class="header-section-number">17.2.6</span> About <code>jQuery</code> and <code>jQuery</code> selectors<a href="using-javascript.html#about-jquery-and-jquery-selectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>jQuery</code> framework is natively included in <code>{shiny}</code>.</p>
<blockquote>
<p>jQuery is a fast, small, and feature-rich JavaScript library.
It makes things like HTML document traversal and manipulation, event handling, animation, and Ajax much simpler with an easy-to-use API that works across a multitude of browsers.<br />
</p>
<p><em>jQuery home page</em> (<a href="https://jquery.com" class="uri">https://jquery.com</a>)</p>
</blockquote>
<p><code>jQuery</code> is a very popular JavaScript library which is designed to manipulate the DOM, its events, and its elements.
It can be used to do a lot of things, like hide and show objects, change object classes, click somewhere, etc.
And to be able to do that, it comes with the notion of selectors, which will be put between <code>$()</code>.
You can use, for example:</p>
<ul>
<li><p><code>$("#firstinput")</code> to refer to the element with the id <code>firstinput</code></p></li>
<li><p><code>$(".widediv")</code> to refer to element(s) of class <code>widediv</code></p></li>
<li><p><code>$("button:contains('this')")</code> to refer to the buttons with a text containing <code>'this'</code></p></li>
</ul>
<p>You can also use special HTML attributes, which are specific to a tag.
For example, the following HTML code:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb324-1"><a href="using-javascript.html#cb324-1" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">a</span><span class="ot"> href </span><span class="op">=</span> <span class="st">&quot;https://thinkr.fr&quot;</span><span class="ot"> data-value </span><span class="op">=</span> <span class="st">&quot;panel2&quot;</span><span class="dt">&gt;</span>ThinkR<span class="dt">&lt;/</span><span class="kw">a</span><span class="dt">&gt;</span></span></code></pre></div>
<p>contains the <code>href</code> and <code>data-value</code> attributes.
You can refer to these with <code>[]</code> after the tag name.</p>
<ul>
<li><p><code>$("a[href = 'https://thinkr.fr']")</code> refers to link(s) with <code>href</code> being <code>https://thinkr.fr</code></p></li>
<li><p><code>$('a[data-value="panel2"]')</code> refers to link(s) with <code>data-value</code> being <code>"panel2"</code></p></li>
</ul>
<p>These and other selectors are <strong>used to identify one or more node(s) in the big tree which is a web page</strong>.
Once we have identified these elements, we can either extract or change data contained in these nodes, or invoke methods contained within these nodes.
Indeed JavaScript, like R, can be used as a functional language, but most of what we do is done in an object-oriented way.
In other words, you will interact with objects from the web page, and these objects will contain data and methods.</p>
<p>Note that this is not specific to <code>jQuery</code>: elements can also be selected with standard JavaScript.
<code>jQuery</code> has the advantage of simplifying selections and actions and is a cross-platform library, making it easier to ship applications that can work on all major browsers.
And it comes with <code>{shiny}</code> for free!</p>
<p>Choosing <code>jQuery</code> or vanilla JavaScript is up to you: and in the rest of this chapter we will try to mix both syntaxes, and put both when possible, so that you can choose the one you are the most comfortable with.</p>
</div>
</div>
<div id="client-side-javascript" class="section level2 hasAnchor" number="17.3">
<h2><span class="header-section-number">17.3</span> Client-side JavaScript<a href="using-javascript.html#client-side-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It is hard to give an exhaustive list of what you can do with JavaScript inside <code>{shiny}</code>.
As a <code>{shiny}</code> app is part JavaScript, part R, once you have a good grasp of JavaScript you can quickly enhance any of your applications.
That being said, a few common things can be done that would allow you to immediately optimize your application: i.e. small JavaScript functions that will prevent you from writing complex algorithmic logic in your application server.</p>
<div id="common-patterns" class="section level3 hasAnchor" number="17.3.1">
<h3><span class="header-section-number">17.3.1</span> Common patterns<a href="using-javascript.html#common-patterns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>alert("message")</code> uses the built-in alert-box mechanism from the user’s browser (i.e., the <code>alert()</code> function is not part of <code>jQuery</code> but it is built inside the user’s browser).
It works well as it relies on the browser instead of relying on R or on a specific JavaScript library.
You can use this functionality to replace a call to <code>{shinyalert}</code> <span class="citation">(<a href="#ref-R-shinyalert">Attali and Edwards 2021</a>)</span>: the result is a little less aesthetically pleasing, but is easier to implement and maintain.</p></li>
<li><p><code>var x = prompt("this", "that");</code> this function opens the built-in prompt, which is a text area where the user can input text.
With this code, when the user clicks “OK”, the text is stored in the <code>x</code> variable, which you can then send back to R (see later in this chapter for more info on how to do that).
This can replace something like the following:</p></li>
</ul>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="using-javascript.html#cb325-1" tabindex="-1"></a><span class="co"># Initiating a modalDialog that will ask the user to enter</span></span>
<span id="cb325-2"><a href="using-javascript.html#cb325-2" tabindex="-1"></a><span class="co"># some information</span></span>
<span id="cb325-3"><a href="using-javascript.html#cb325-3" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb325-4"><a href="using-javascript.html#cb325-4" tabindex="-1"></a>  <span class="co"># The modal box definition</span></span>
<span id="cb325-5"><a href="using-javascript.html#cb325-5" tabindex="-1"></a>  <span class="fu">modalDialog</span>(</span>
<span id="cb325-6"><a href="using-javascript.html#cb325-6" tabindex="-1"></a>    <span class="co"># Simple body with a textInput</span></span>
<span id="cb325-7"><a href="using-javascript.html#cb325-7" tabindex="-1"></a>    <span class="fu">tagList</span>(</span>
<span id="cb325-8"><a href="using-javascript.html#cb325-8" tabindex="-1"></a>      <span class="fu">textInput</span>(<span class="st">&quot;info&quot;</span>, <span class="st">&quot;Your info here&quot;</span>)</span>
<span id="cb325-9"><a href="using-javascript.html#cb325-9" tabindex="-1"></a>    ),</span>
<span id="cb325-10"><a href="using-javascript.html#cb325-10" tabindex="-1"></a>    <span class="at">footer =</span> <span class="fu">tagList</span>(</span>
<span id="cb325-11"><a href="using-javascript.html#cb325-11" tabindex="-1"></a>      <span class="fu">modalButton</span>(<span class="st">&quot;Cancel&quot;</span>),</span>
<span id="cb325-12"><a href="using-javascript.html#cb325-12" tabindex="-1"></a>      <span class="fu">actionButton</span>(<span class="st">&quot;ok&quot;</span>, <span class="st">&quot;OK&quot;</span>)</span>
<span id="cb325-13"><a href="using-javascript.html#cb325-13" tabindex="-1"></a>    )</span>
<span id="cb325-14"><a href="using-javascript.html#cb325-14" tabindex="-1"></a>  )</span>
<span id="cb325-15"><a href="using-javascript.html#cb325-15" tabindex="-1"></a>}</span>
<span id="cb325-16"><a href="using-javascript.html#cb325-16" tabindex="-1"></a></span>
<span id="cb325-17"><a href="using-javascript.html#cb325-17" tabindex="-1"></a><span class="co"># When the user clicks on the &quot;show&quot; button in the UI, </span></span>
<span id="cb325-18"><a href="using-javascript.html#cb325-18" tabindex="-1"></a><span class="co"># the modalDialog() is displayed</span></span>
<span id="cb325-19"><a href="using-javascript.html#cb325-19" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>show, {</span>
<span id="cb325-20"><a href="using-javascript.html#cb325-20" tabindex="-1"></a>  <span class="fu">showModal</span>(<span class="fu">mod</span>())</span>
<span id="cb325-21"><a href="using-javascript.html#cb325-21" tabindex="-1"></a>})</span>
<span id="cb325-22"><a href="using-javascript.html#cb325-22" tabindex="-1"></a></span>
<span id="cb325-23"><a href="using-javascript.html#cb325-23" tabindex="-1"></a><span class="co"># Whenever the &quot;ok&quot; button is clicked, the modal is removed</span></span>
<span id="cb325-24"><a href="using-javascript.html#cb325-24" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>ok, {</span>
<span id="cb325-25"><a href="using-javascript.html#cb325-25" tabindex="-1"></a>  <span class="fu">print</span>(input<span class="sc">$</span>info)</span>
<span id="cb325-26"><a href="using-javascript.html#cb325-26" tabindex="-1"></a>  <span class="fu">removeModal</span>()</span>
<span id="cb325-27"><a href="using-javascript.html#cb325-27" tabindex="-1"></a>})</span></code></pre></div>
<ul>
<li><p><code>$('#id').css('color', 'green');</code>, or in vanilla JavaScript <code>document.getElementById("demo").style.color = "green";</code> changes the CSS attributes of the selected element(s).
Here, we are switching to green on the <code>#id</code> element.</p></li>
<li><p><code>$("#id").text("this")</code>, or in vanilla JavaScript <code>document.getElementById("id").innerText = "this";</code> changes the text content to “this”.
This can be used to replace the following:</p></li>
</ul>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="using-javascript.html#cb326-1" tabindex="-1"></a>output<span class="sc">$</span>ui <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb326-2"><a href="using-javascript.html#cb326-2" tabindex="-1"></a>  <span class="co"># Conditionnal rendering of the UI</span></span>
<span id="cb326-3"><a href="using-javascript.html#cb326-3" tabindex="-1"></a>  <span class="cf">if</span> (this){</span>
<span id="cb326-4"><a href="using-javascript.html#cb326-4" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">p</span>(<span class="st">&quot;First&quot;</span>)</span>
<span id="cb326-5"><a href="using-javascript.html#cb326-5" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb326-6"><a href="using-javascript.html#cb326-6" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">p</span>(<span class="st">&quot;Second&quot;</span>)</span>
<span id="cb326-7"><a href="using-javascript.html#cb326-7" tabindex="-1"></a>  }</span>
<span id="cb326-8"><a href="using-javascript.html#cb326-8" tabindex="-1"></a>})</span></code></pre></div>
<ul>
<li><code>$("#id").remove();</code>, or in vanilla JavaScript <code>var elem = document.querySelector('#some-element'); elem.parentNode.removeChild(elem);</code> completely removes the element from the DOM. It can be used as a replacement for <code>shiny::removeUI()</code>, or as a conditional UI. Note that this code doesn’t remove the input values on the server side: the elements only disappear from the UI, but nothing is sent to the server side. For a safe implementation, see <code>{shinyjs}</code>.</li>
</ul>
</div>
<div id="where-to-put-them-back-to-javascript-events" class="section level3 hasAnchor" number="17.3.2">
<h3><span class="header-section-number">17.3.2</span> Where to put them: Back to JavaScript Events<a href="using-javascript.html#where-to-put-them-back-to-javascript-events" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>OK, now that we have some ideas about JS code that can be used in <code>{shiny}</code>, where do we put it?
HTML and JS have a concept called <code>events</code>, which are, well, events that happen when the user manipulates the web page: when the user clicks, hovers (the mouse goes over an element), presses keys on the keyboard, etc.
All these events can be used to trigger a JavaScript function.</p>
<p>Here are some examples of adding JavaScript functions to DOM events:</p>
<ul>
<li><code>onclick</code></li>
</ul>
<p>The <code>onclick</code> attribute can be added straight inside the HTML tag when possible:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="using-javascript.html#cb327-1" tabindex="-1"></a><span class="co"># Building a button using the native HTML tag </span></span>
<span id="cb327-2"><a href="using-javascript.html#cb327-2" tabindex="-1"></a><span class="co"># (i.e. not using the actionButton() function)</span></span>
<span id="cb327-3"><a href="using-javascript.html#cb327-3" tabindex="-1"></a><span class="co"># This button only goal is to launch this JS code</span></span>
<span id="cb327-4"><a href="using-javascript.html#cb327-4" tabindex="-1"></a><span class="co"># when it is clicked </span></span>
<span id="cb327-5"><a href="using-javascript.html#cb327-5" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">button</span>(</span>
<span id="cb327-6"><a href="using-javascript.html#cb327-6" tabindex="-1"></a>  <span class="st">&quot;Show&quot;</span>,</span>
<span id="cb327-7"><a href="using-javascript.html#cb327-7" tabindex="-1"></a>  <span class="at">onclick =</span> <span class="st">&quot;$(&#39;#plot&#39;).show()&quot;</span></span>
<span id="cb327-8"><a href="using-javascript.html#cb327-8" tabindex="-1"></a>)</span></code></pre></div>
<p>Or with <code>shiny::tagAppendAttributes()</code>:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="using-javascript.html#cb328-1" tabindex="-1"></a><span class="co"># Using tagAppendAttributes() allows to add attributes to the </span></span>
<span id="cb328-2"><a href="using-javascript.html#cb328-2" tabindex="-1"></a><span class="co"># outputed UI element</span></span>
<span id="cb328-3"><a href="using-javascript.html#cb328-3" tabindex="-1"></a><span class="fu">plotOutput</span>(</span>
<span id="cb328-4"><a href="using-javascript.html#cb328-4" tabindex="-1"></a>  <span class="st">&quot;plot&quot;</span></span>
<span id="cb328-5"><a href="using-javascript.html#cb328-5" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">tagAppendAttributes</span>(</span>
<span id="cb328-6"><a href="using-javascript.html#cb328-6" tabindex="-1"></a>  <span class="at">onclick =</span> <span class="st">&quot;alert(&#39;hello world&#39;)&quot;</span></span>
<span id="cb328-7"><a href="using-javascript.html#cb328-7" tabindex="-1"></a>)</span></code></pre></div>
<p>Here is, for example, a small <code>{shiny}</code> app that implements this behavior:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="using-javascript.html#cb329-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb329-2"><a href="using-javascript.html#cb329-2" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb329-3"><a href="using-javascript.html#cb329-3" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb329-4"><a href="using-javascript.html#cb329-4" tabindex="-1"></a>  <span class="fu">fluidPage</span>(</span>
<span id="cb329-5"><a href="using-javascript.html#cb329-5" tabindex="-1"></a>    <span class="co"># We create a plotOutput, which will show an alert when </span></span>
<span id="cb329-6"><a href="using-javascript.html#cb329-6" tabindex="-1"></a>    <span class="co"># it is clicked</span></span>
<span id="cb329-7"><a href="using-javascript.html#cb329-7" tabindex="-1"></a>    <span class="fu">plotOutput</span>(</span>
<span id="cb329-8"><a href="using-javascript.html#cb329-8" tabindex="-1"></a>      <span class="st">&quot;plot&quot;</span></span>
<span id="cb329-9"><a href="using-javascript.html#cb329-9" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">tagAppendAttributes</span>(</span>
<span id="cb329-10"><a href="using-javascript.html#cb329-10" tabindex="-1"></a>      <span class="at">onclick =</span> <span class="st">&quot;alert(&#39;iris plot!&#39;)&quot;</span></span>
<span id="cb329-11"><a href="using-javascript.html#cb329-11" tabindex="-1"></a>    )</span>
<span id="cb329-12"><a href="using-javascript.html#cb329-12" tabindex="-1"></a>  )</span>
<span id="cb329-13"><a href="using-javascript.html#cb329-13" tabindex="-1"></a>}</span>
<span id="cb329-14"><a href="using-javascript.html#cb329-14" tabindex="-1"></a></span>
<span id="cb329-15"><a href="using-javascript.html#cb329-15" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb329-16"><a href="using-javascript.html#cb329-16" tabindex="-1"></a>  output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb329-17"><a href="using-javascript.html#cb329-17" tabindex="-1"></a>    <span class="fu">plot</span>(iris)</span>
<span id="cb329-18"><a href="using-javascript.html#cb329-18" tabindex="-1"></a>  })</span>
<span id="cb329-19"><a href="using-javascript.html#cb329-19" tabindex="-1"></a>}</span>
<span id="cb329-20"><a href="using-javascript.html#cb329-20" tabindex="-1"></a></span>
<span id="cb329-21"><a href="using-javascript.html#cb329-21" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>You can find a real-life example of this <code>tagAppendAttributes</code> in the <code>{tidytuesday201942}</code> <span class="citation">(<a href="#ref-R-tidytuesday201942">Fay 2024f</a>)</span> app:</p>
<ul>
<li><a href="https://github.com/ColinFay/tidytuesday201942/blob/master/R/mod_dataviz.R#L109">R/mod_dataviz.R#L109</a>, where clicking the plot generates the creation of a <code>{shiny}</code> input (we will see this below)</li>
</ul>
<p>That, of course, works well with very short JavaScript code.
For longer JavaScript code, you can write a function inside an external file, and add it to your app.
In <code>{golem}</code>, this works by launching the <code>add_js_file("name")</code>, which will create a <code>.js</code> file.
The JavaScript file is then automatically linked in your application.</p>
<p>This, for example, could be:</p>
<ul>
<li>In <code>inst/app/www/script.js</code></li>
</ul>
<div class="sourceCode" id="cb330"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb330-1"><a href="using-javascript.html#cb330-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">alertme</span>(id){</span>
<span id="cb330-2"><a href="using-javascript.html#cb330-2" tabindex="-1"></a>  <span class="co">// Asking information</span></span>
<span id="cb330-3"><a href="using-javascript.html#cb330-3" tabindex="-1"></a>  <span class="kw">var</span> name <span class="op">=</span> <span class="fu">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></span>
<span id="cb330-4"><a href="using-javascript.html#cb330-4" tabindex="-1"></a>  <span class="co">// Showing an alert</span></span>
<span id="cb330-5"><a href="using-javascript.html#cb330-5" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! You&#39;re seeing &quot;</span> <span class="op">+</span> id)<span class="op">;</span></span>
<span id="cb330-6"><a href="using-javascript.html#cb330-6" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li>Then in R</li>
</ul>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="using-javascript.html#cb331-1" tabindex="-1"></a><span class="fu">plotOutput</span>(</span>
<span id="cb331-2"><a href="using-javascript.html#cb331-2" tabindex="-1"></a>  <span class="st">&quot;plot&quot;</span></span>
<span id="cb331-3"><a href="using-javascript.html#cb331-3" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">tagAppendAttributes</span>(</span>
<span id="cb331-4"><a href="using-javascript.html#cb331-4" tabindex="-1"></a>  <span class="co"># Calling the function which has been defined in the </span></span>
<span id="cb331-5"><a href="using-javascript.html#cb331-5" tabindex="-1"></a>  <span class="co"># external script</span></span>
<span id="cb331-6"><a href="using-javascript.html#cb331-6" tabindex="-1"></a>  <span class="at">onclick =</span> <span class="st">&quot;alertme(&#39;plot&#39;)&quot;</span></span>
<span id="cb331-7"><a href="using-javascript.html#cb331-7" tabindex="-1"></a>)</span></code></pre></div>
<p>Inside this <code>inst/app/www/script.js</code>, you can also attach a new behavior with <code>jQuery</code> to one or several elements.
For example, you can add this <code>alertme</code> / <code>onclick</code> behavior to all plots of the app:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb332-1"><a href="using-javascript.html#cb332-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">alertme</span>(id){</span>
<span id="cb332-2"><a href="using-javascript.html#cb332-2" tabindex="-1"></a>  <span class="kw">var</span> name <span class="op">=</span> <span class="fu">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></span>
<span id="cb332-3"><a href="using-javascript.html#cb332-3" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! You&#39;re seeing &quot;</span> <span class="op">+</span> id)<span class="op">;</span></span>
<span id="cb332-4"><a href="using-javascript.html#cb332-4" tabindex="-1"></a>}</span>
<span id="cb332-5"><a href="using-javascript.html#cb332-5" tabindex="-1"></a></span>
<span id="cb332-6"><a href="using-javascript.html#cb332-6" tabindex="-1"></a><span class="co">/* We&#39;re adding this so that the function is launched only</span></span>
<span id="cb332-7"><a href="using-javascript.html#cb332-7" tabindex="-1"></a><span class="co">when the document is ready */</span></span>
<span id="cb332-8"><a href="using-javascript.html#cb332-8" tabindex="-1"></a><span class="fu">$</span>(<span class="kw">function</span>(){ </span>
<span id="cb332-9"><a href="using-javascript.html#cb332-9" tabindex="-1"></a>  <span class="co">// Selecting all `{shiny}` plots</span></span>
<span id="cb332-10"><a href="using-javascript.html#cb332-10" tabindex="-1"></a>  <span class="fu">$</span>(<span class="st">&quot;.shiny-plot-output&quot;</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(){</span>
<span id="cb332-11"><a href="using-javascript.html#cb332-11" tabindex="-1"></a>    <span class="co">/* Calling the alertme function with the id </span></span>
<span id="cb332-12"><a href="using-javascript.html#cb332-12" tabindex="-1"></a><span class="co">    of the clicked plot */</span></span>
<span id="cb332-13"><a href="using-javascript.html#cb332-13" tabindex="-1"></a>    <span class="fu">alertme</span>(<span class="kw">this</span><span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb332-14"><a href="using-javascript.html#cb332-14" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb332-15"><a href="using-javascript.html#cb332-15" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>Then, all the plots from your app will receive this on-click event.<a href="#fn69" class="footnote-ref" id="fnref69"><sup>69</sup></a></p>
<p>Note that there is a series of events which are specific to <code>{shiny}</code>, but that can be used just like the one we have just seen:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb333-1"><a href="using-javascript.html#cb333-1" tabindex="-1"></a><span class="co">// We define a function that will ask for the visitor name, and </span></span>
<span id="cb333-2"><a href="using-javascript.html#cb333-2" tabindex="-1"></a><span class="co">// then show an alert to welcome the visitor</span></span>
<span id="cb333-3"><a href="using-javascript.html#cb333-3" tabindex="-1"></a><span class="kw">function</span> <span class="fu">alertme</span>(){</span>
<span id="cb333-4"><a href="using-javascript.html#cb333-4" tabindex="-1"></a>  <span class="kw">var</span> name <span class="op">=</span> <span class="fu">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></span>
<span id="cb333-5"><a href="using-javascript.html#cb333-5" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! Welcome to my app&quot;</span>)<span class="op">;</span></span>
<span id="cb333-6"><a href="using-javascript.html#cb333-6" tabindex="-1"></a>}</span>
<span id="cb333-7"><a href="using-javascript.html#cb333-7" tabindex="-1"></a></span>
<span id="cb333-8"><a href="using-javascript.html#cb333-8" tabindex="-1"></a><span class="fu">$</span>(<span class="kw">function</span>(){ </span>
<span id="cb333-9"><a href="using-javascript.html#cb333-9" tabindex="-1"></a>  <span class="co">// Waiting for `{shiny}` to be connected</span></span>
<span id="cb333-10"><a href="using-javascript.html#cb333-10" tabindex="-1"></a>  <span class="fu">$</span>(<span class="bu">document</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;shiny:connected&#39;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb333-11"><a href="using-javascript.html#cb333-11" tabindex="-1"></a>    <span class="fu">alertme</span>()<span class="op">;</span></span>
<span id="cb333-12"><a href="using-javascript.html#cb333-12" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb333-13"><a href="using-javascript.html#cb333-13" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>See <a href="https://shiny.rstudio.com/articles/js-events.html">JavaScript Events in <code>{shiny}</code></a> for the full list of JavaScript events available in <code>{shiny}</code>.</p>
</div>
</div>
<div id="javascript---shiny-communication" class="section level2 hasAnchor" number="17.4">
<h2><span class="header-section-number">17.4</span> JavaScript &lt;-&gt; <code>{shiny}</code> communication<a href="using-javascript.html#javascript---shiny-communication" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have seen some client-side optimization, i.e.
R does not do anything with these events when they happen (in fact R is not even aware they happened), let’s now see how we can make these two communicate with each other.</p>
<div id="from-r-to-javascript" class="section level3 hasAnchor" number="17.4.1">
<h3><span class="header-section-number">17.4.1</span> From R to JavaScript<a href="using-javascript.html#from-r-to-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Calling JS from the server side (i.e. from R) is done by defining a series of <code>CustomMessageHandler</code> functions: these are functions with one argument that can then be called using the <code>session$sendCustomMessage()</code> method from the server side.
Or if you are using <code>{golem}</code>, using the <code>invoke_js()</code> function.</p>
<p>You can define them using this skeleton:</p>
<pre><code>$( document ).ready(function() {
  Shiny.addCustomMessageHandler(&#39;fun&#39;, function(arg) {
 
  })
});</code></pre>
<p>This skeleton is the one from <code>golem::add_js_handler("first_handler")</code>.</p>
<p>Then, it can be called from server side with:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="using-javascript.html#cb335-1" tabindex="-1"></a>session<span class="sc">$</span><span class="fu">sendCustomMessage</span>(<span class="st">&quot;fun&quot;</span>, <span class="fu">list</span>())</span>
<span id="cb335-2"><a href="using-javascript.html#cb335-2" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb335-3"><a href="using-javascript.html#cb335-3" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">invoke_js</span>(<span class="st">&quot;fun&quot;</span>, ...)</span></code></pre></div>
<p>Note that the <code>list()</code> argument from your function will be converted to JSON, and read as such from JavaScript.
In other words, if you have an argument called <code>x</code>, and you call the function with <code>list(a = 1, b = 12)</code>, then in JavaScript you will be able to use <code>x.a</code> and <code>x.b</code>.</p>
<p>For example:</p>
<ul>
<li>In <code>inst/app/www/script.js</code>:</li>
</ul>
<div class="sourceCode" id="cb336"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb336-1"><a href="using-javascript.html#cb336-1" tabindex="-1"></a><span class="co">// We define a handler called &quot;computed&quot;, that can be called </span></span>
<span id="cb336-2"><a href="using-javascript.html#cb336-2" tabindex="-1"></a><span class="co">// from the server side of the {shiny} application</span></span>
<span id="cb336-3"><a href="using-javascript.html#cb336-3" tabindex="-1"></a>Shiny<span class="op">.</span><span class="fu">addCustomMessageHandler</span>(<span class="st">&#39;computed&#39;</span><span class="op">,</span> <span class="kw">function</span>(mess) {</span>
<span id="cb336-4"><a href="using-javascript.html#cb336-4" tabindex="-1"></a>  <span class="co">// The received value (in mess) is serialized in JSON, </span></span>
<span id="cb336-5"><a href="using-javascript.html#cb336-5" tabindex="-1"></a>  <span class="co">// so we can  access the list element with object.name</span></span>
<span id="cb336-6"><a href="using-javascript.html#cb336-6" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="st">&quot;Computed &quot;</span> <span class="op">+</span> mess<span class="op">.</span><span class="at">what</span> <span class="op">+</span> <span class="st">&quot; in &quot;</span> <span class="op">+</span> mess<span class="op">.</span><span class="at">sec</span> <span class="op">+</span> <span class="st">&quot; secs&quot;</span>)<span class="op">;</span></span>
<span id="cb336-7"><a href="using-javascript.html#cb336-7" tabindex="-1"></a>})</span></code></pre></div>
<ul>
<li>Then in R:</li>
</ul>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="using-javascript.html#cb337-1" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb337-2"><a href="using-javascript.html#cb337-2" tabindex="-1"></a>  <span class="co"># Register the starting time</span></span>
<span id="cb337-3"><a href="using-javascript.html#cb337-3" tabindex="-1"></a>  deb <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb337-4"><a href="using-javascript.html#cb337-4" tabindex="-1"></a>  <span class="co"># Mimic a long computation</span></span>
<span id="cb337-5"><a href="using-javascript.html#cb337-5" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(</span>
<span id="cb337-6"><a href="using-javascript.html#cb337-6" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span>)</span>
<span id="cb337-7"><a href="using-javascript.html#cb337-7" tabindex="-1"></a>  )</span>
<span id="cb337-8"><a href="using-javascript.html#cb337-8" tabindex="-1"></a>  <span class="co"># Calling the computed handler</span></span>
<span id="cb337-9"><a href="using-javascript.html#cb337-9" tabindex="-1"></a>  golem<span class="sc">::</span><span class="fu">invoke_js</span>(</span>
<span id="cb337-10"><a href="using-javascript.html#cb337-10" tabindex="-1"></a>    <span class="st">&quot;computed&quot;</span>, </span>
<span id="cb337-11"><a href="using-javascript.html#cb337-11" tabindex="-1"></a>    <span class="co"># We send a list, that will be turned into JSON</span></span>
<span id="cb337-12"><a href="using-javascript.html#cb337-12" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb337-13"><a href="using-javascript.html#cb337-13" tabindex="-1"></a>      <span class="at">what =</span> <span class="st">&quot;time&quot;</span>, </span>
<span id="cb337-14"><a href="using-javascript.html#cb337-14" tabindex="-1"></a>      <span class="at">sec =</span> <span class="fu">round</span>(<span class="fu">Sys.time</span>() <span class="sc">-</span> deb)</span>
<span id="cb337-15"><a href="using-javascript.html#cb337-15" tabindex="-1"></a>    )</span>
<span id="cb337-16"><a href="using-javascript.html#cb337-16" tabindex="-1"></a>  )</span>
<span id="cb337-17"><a href="using-javascript.html#cb337-17" tabindex="-1"></a>})</span></code></pre></div>
</div>
<div id="from-javascript-to-r" class="section level3 hasAnchor" number="17.4.2">
<h3><span class="header-section-number">17.4.2</span> From JavaScript to R<a href="using-javascript.html#from-javascript-to-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>How can you do the opposite (from JavaScript to R)?
<code>{shiny}</code> apps, in the browser, contain an object called <code>Shiny</code>, which may be used to send values to R by creating an <code>InputValue</code>.
For example, with:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb338-1"><a href="using-javascript.html#cb338-1" tabindex="-1"></a><span class="co">// This function from the Shiny JavaScript object</span></span>
<span id="cb338-2"><a href="using-javascript.html#cb338-2" tabindex="-1"></a><span class="co">// Allows to register an input name, and a value</span></span>
<span id="cb338-3"><a href="using-javascript.html#cb338-3" tabindex="-1"></a>Shiny<span class="op">.</span><span class="fu">setInputValue</span>(<span class="st">&quot;rand&quot;</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>())</span></code></pre></div>
<p>you will bind an input that can be caught from the server side with:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="using-javascript.html#cb339-1" tabindex="-1"></a><span class="co"># Once the input is set, it can be caught with R using:</span></span>
<span id="cb339-2"><a href="using-javascript.html#cb339-2" tabindex="-1"></a><span class="fu">observeEvent</span>( input<span class="sc">$</span>rand , {</span>
<span id="cb339-3"><a href="using-javascript.html#cb339-3" tabindex="-1"></a>  <span class="fu">print</span>( input<span class="sc">$</span>rand )</span>
<span id="cb339-4"><a href="using-javascript.html#cb339-4" tabindex="-1"></a>})</span></code></pre></div>
<p><code>Shiny.setInputValue</code><a href="#fn70" class="footnote-ref" id="fnref70"><sup>70</sup></a> can, of course, be used inside any JavaScript function.
Here is a small example that wraps up some of the things we have seen previously:</p>
<ul>
<li>In <code>inst/app/www/script.js</code></li>
</ul>
<div class="sourceCode" id="cb340"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb340-1"><a href="using-javascript.html#cb340-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">alertme</span>(){</span>
<span id="cb340-2"><a href="using-javascript.html#cb340-2" tabindex="-1"></a>  <span class="kw">var</span> name <span class="op">=</span> <span class="fu">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)<span class="op">;</span></span>
<span id="cb340-3"><a href="using-javascript.html#cb340-3" tabindex="-1"></a>  <span class="fu">alert</span>(<span class="st">&quot;Hello &quot;</span> <span class="op">+</span> name <span class="op">+</span> <span class="st">&quot;! Welcome to my app&quot;</span>)<span class="op">;</span></span>
<span id="cb340-4"><a href="using-javascript.html#cb340-4" tabindex="-1"></a>  Shiny<span class="op">.</span><span class="fu">setInputValue</span>(<span class="st">&quot;username&quot;</span><span class="op">,</span> name)</span>
<span id="cb340-5"><a href="using-javascript.html#cb340-5" tabindex="-1"></a>}</span>
<span id="cb340-6"><a href="using-javascript.html#cb340-6" tabindex="-1"></a></span>
<span id="cb340-7"><a href="using-javascript.html#cb340-7" tabindex="-1"></a><span class="fu">$</span>(<span class="kw">function</span>(){ </span>
<span id="cb340-8"><a href="using-javascript.html#cb340-8" tabindex="-1"></a>  <span class="co">// Waiting for `{shiny}` to be connected</span></span>
<span id="cb340-9"><a href="using-javascript.html#cb340-9" tabindex="-1"></a>  <span class="fu">$</span>(<span class="bu">document</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&#39;shiny:connected&#39;</span><span class="op">,</span> <span class="kw">function</span>(<span class="bu">event</span>) {</span>
<span id="cb340-10"><a href="using-javascript.html#cb340-10" tabindex="-1"></a>    <span class="fu">alertme</span>()<span class="op">;</span></span>
<span id="cb340-11"><a href="using-javascript.html#cb340-11" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb340-12"><a href="using-javascript.html#cb340-12" tabindex="-1"></a>  </span>
<span id="cb340-13"><a href="using-javascript.html#cb340-13" tabindex="-1"></a>  <span class="fu">$</span>(<span class="st">&quot;.shiny-plot-output&quot;</span>)<span class="op">.</span><span class="fu">on</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> <span class="kw">function</span>(){</span>
<span id="cb340-14"><a href="using-javascript.html#cb340-14" tabindex="-1"></a>    <span class="co">/* Calling the alertme function with the id </span></span>
<span id="cb340-15"><a href="using-javascript.html#cb340-15" tabindex="-1"></a><span class="co">    of the clicked plot. </span></span>
<span id="cb340-16"><a href="using-javascript.html#cb340-16" tabindex="-1"></a><span class="co">    The `this` object here refers to the clicked element*/</span></span>
<span id="cb340-17"><a href="using-javascript.html#cb340-17" tabindex="-1"></a>    Shiny<span class="op">.</span><span class="fu">setInputValue</span>(<span class="st">&quot;last_plot_clicked&quot;</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">id</span>)<span class="op">;</span></span>
<span id="cb340-18"><a href="using-javascript.html#cb340-18" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb340-19"><a href="using-javascript.html#cb340-19" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<p>These events (getting the user name and the last plot clicked), can then be caught from the server side with:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="using-javascript.html#cb341-1" tabindex="-1"></a><span class="co"># We wait for the output of alertme(), which will set the</span></span>
<span id="cb341-2"><a href="using-javascript.html#cb341-2" tabindex="-1"></a><span class="co"># &quot;username&quot; input value</span></span>
<span id="cb341-3"><a href="using-javascript.html#cb341-3" tabindex="-1"></a><span class="fu">observeEvent</span>( input<span class="sc">$</span>username , {</span>
<span id="cb341-4"><a href="using-javascript.html#cb341-4" tabindex="-1"></a>  cli<span class="sc">::</span><span class="fu">cat_rule</span>(<span class="st">&quot;User name:&quot;</span>)</span>
<span id="cb341-5"><a href="using-javascript.html#cb341-5" tabindex="-1"></a>  <span class="fu">print</span>(input<span class="sc">$</span>username)</span>
<span id="cb341-6"><a href="using-javascript.html#cb341-6" tabindex="-1"></a>})</span>
<span id="cb341-7"><a href="using-javascript.html#cb341-7" tabindex="-1"></a></span>
<span id="cb341-8"><a href="using-javascript.html#cb341-8" tabindex="-1"></a><span class="co"># This will print the id of the last clicked plot</span></span>
<span id="cb341-9"><a href="using-javascript.html#cb341-9" tabindex="-1"></a><span class="fu">observeEvent</span>( input<span class="sc">$</span>last_plot_clicked , {</span>
<span id="cb341-10"><a href="using-javascript.html#cb341-10" tabindex="-1"></a>  cli<span class="sc">::</span><span class="fu">cat_rule</span>(<span class="st">&quot;Last plot clicked:&quot;</span>)</span>
<span id="cb341-11"><a href="using-javascript.html#cb341-11" tabindex="-1"></a>  <span class="fu">print</span>(input<span class="sc">$</span>last_plot_clicked)</span>
<span id="cb341-12"><a href="using-javascript.html#cb341-12" tabindex="-1"></a>})</span></code></pre></div>
<p>Which will give:</p>
<pre><code>&gt; golex::run_app()
Loading required package: shiny

Listening on http://127.0.0.1:5495
── User name: ─────────────────────────────────────────────────────
[1] &quot;Colin&quot;
── Last plot clicked: ─────────────────────────────────────────────
[1] &quot;plota&quot;
── Last plot clicked: ─────────────────────────────────────────────
[1] &quot;plotb&quot;</code></pre>
<p><strong>Important note</strong>: If you are using modules, you will need to pass the namespacing of the <code>id</code> to be able to get it back from the server.
This can be done using the <code>session$ns</code> function, which comes by default in any golem-generated module.
In other words, you will need to write something like the following:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb343-1"><a href="using-javascript.html#cb343-1" tabindex="-1"></a><span class="fu">$</span>( <span class="bu">document</span> )<span class="op">.</span><span class="fu">ready</span>(<span class="kw">function</span>() {</span>
<span id="cb343-2"><a href="using-javascript.html#cb343-2" tabindex="-1"></a>  <span class="co">// Setting a custom handler that will</span></span>
<span id="cb343-3"><a href="using-javascript.html#cb343-3" tabindex="-1"></a>  <span class="co">// ask the users their name</span></span>
<span id="cb343-4"><a href="using-javascript.html#cb343-4" tabindex="-1"></a>  <span class="co">// then set the returned value to a Shiny input</span></span>
<span id="cb343-5"><a href="using-javascript.html#cb343-5" tabindex="-1"></a>  Shiny<span class="op">.</span><span class="fu">addCustomMessageHandler</span>(<span class="st">&#39;whoareyou&#39;</span><span class="op">,</span> <span class="kw">function</span>(arg) {</span>
<span id="cb343-6"><a href="using-javascript.html#cb343-6" tabindex="-1"></a>    <span class="kw">var</span> name <span class="op">=</span> <span class="fu">prompt</span>(<span class="st">&quot;Who are you?&quot;</span>)</span>
<span id="cb343-7"><a href="using-javascript.html#cb343-7" tabindex="-1"></a>    Shiny<span class="op">.</span><span class="fu">setInputValue</span>(arg<span class="op">.</span><span class="at">id</span><span class="op">,</span> name)<span class="op">;</span></span>
<span id="cb343-8"><a href="using-javascript.html#cb343-8" tabindex="-1"></a>  })</span>
<span id="cb343-9"><a href="using-javascript.html#cb343-9" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="using-javascript.html#cb344-1" tabindex="-1"></a>mod_my_first_module_ui <span class="ot">&lt;-</span> <span class="cf">function</span>(id){</span>
<span id="cb344-2"><a href="using-javascript.html#cb344-2" tabindex="-1"></a>  ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb344-3"><a href="using-javascript.html#cb344-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb344-4"><a href="using-javascript.html#cb344-4" tabindex="-1"></a>    <span class="fu">actionButton</span>(</span>
<span id="cb344-5"><a href="using-javascript.html#cb344-5" tabindex="-1"></a>      <span class="fu">ns</span>(<span class="st">&quot;showname&quot;</span>), <span class="st">&quot;Enter your name&quot;</span></span>
<span id="cb344-6"><a href="using-javascript.html#cb344-6" tabindex="-1"></a>    )</span>
<span id="cb344-7"><a href="using-javascript.html#cb344-7" tabindex="-1"></a>  )</span>
<span id="cb344-8"><a href="using-javascript.html#cb344-8" tabindex="-1"></a>}</span>
<span id="cb344-9"><a href="using-javascript.html#cb344-9" tabindex="-1"></a></span>
<span id="cb344-10"><a href="using-javascript.html#cb344-10" tabindex="-1"></a>mod_my_first_module_server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb344-11"><a href="using-javascript.html#cb344-11" tabindex="-1"></a>  ns <span class="ot">&lt;-</span> session<span class="sc">$</span>ns</span>
<span id="cb344-12"><a href="using-javascript.html#cb344-12" tabindex="-1"></a>  <span class="co"># Whenever the button is clicked, </span></span>
<span id="cb344-13"><a href="using-javascript.html#cb344-13" tabindex="-1"></a>  <span class="co"># we call the CustomMessageHandler</span></span>
<span id="cb344-14"><a href="using-javascript.html#cb344-14" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>showname , {</span>
<span id="cb344-15"><a href="using-javascript.html#cb344-15" tabindex="-1"></a>    <span class="co"># Calling the &quot;whoareyou&quot; handler</span></span>
<span id="cb344-16"><a href="using-javascript.html#cb344-16" tabindex="-1"></a>    golem<span class="sc">::</span><span class="fu">invoke_js</span>(</span>
<span id="cb344-17"><a href="using-javascript.html#cb344-17" tabindex="-1"></a>      <span class="st">&quot;whoareyou&quot;</span>, </span>
<span id="cb344-18"><a href="using-javascript.html#cb344-18" tabindex="-1"></a>      <span class="co"># The id is namespaced, </span></span>
<span id="cb344-19"><a href="using-javascript.html#cb344-19" tabindex="-1"></a>      <span class="co"># so that we get it back on the server-side</span></span>
<span id="cb344-20"><a href="using-javascript.html#cb344-20" tabindex="-1"></a>      <span class="fu">list</span>(</span>
<span id="cb344-21"><a href="using-javascript.html#cb344-21" tabindex="-1"></a>        <span class="at">id =</span> <span class="fu">ns</span>(<span class="st">&quot;name&quot;</span>)</span>
<span id="cb344-22"><a href="using-javascript.html#cb344-22" tabindex="-1"></a>      )</span>
<span id="cb344-23"><a href="using-javascript.html#cb344-23" tabindex="-1"></a>    )</span>
<span id="cb344-24"><a href="using-javascript.html#cb344-24" tabindex="-1"></a>  })</span>
<span id="cb344-25"><a href="using-javascript.html#cb344-25" tabindex="-1"></a>  </span>
<span id="cb344-26"><a href="using-javascript.html#cb344-26" tabindex="-1"></a>  <span class="co"># Waiting for input$name to  be set with JavaScript</span></span>
<span id="cb344-27"><a href="using-javascript.html#cb344-27" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>name , {</span>
<span id="cb344-28"><a href="using-javascript.html#cb344-28" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cat_rule</span>(<span class="st">&quot;Username is:&quot;</span>)</span>
<span id="cb344-29"><a href="using-javascript.html#cb344-29" tabindex="-1"></a>    <span class="fu">print</span>(input<span class="sc">$</span>name)</span>
<span id="cb344-30"><a href="using-javascript.html#cb344-30" tabindex="-1"></a>  })</span>
<span id="cb344-31"><a href="using-javascript.html#cb344-31" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="about-shinyjs-js-functions" class="section level2 hasAnchor" number="17.5">
<h2><span class="header-section-number">17.5</span> About <code>{shinyjs}</code> JS functions<a href="using-javascript.html#about-shinyjs-js-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As said in the introduction to this chapter, running JavaScript code that you don’t fully control/understand can be tricky and might open doors for external attacks.
In many cases, for the most common JavaScript manipulations, it’s safer to go for a package that has already been proved efficient: <code>{shinyjs}</code>.</p>
<p>This package, licensed in MIT since version 2.0.0, can be used to perform common JavaScript tasks: show, hide, alert, click, etc.</p>
<p>See <a href="https://deanattali.com/shinyjs/">deanattali.com/shinyjs/</a> for more information about how to use this package.</p>
</div>
<div id="one-last-thing-api-calls" class="section level2 hasAnchor" number="17.6">
<h2><span class="header-section-number">17.6</span> One last thing: API calls<a href="using-javascript.html#one-last-thing-api-calls" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If your application uses API calls, chances are that right now you have been doing them straight from R.
But there are downsides to that approach.
Notably, if the API limits requests based on an IP and your application gets a lot of traffic, your users will end up being unable to use the app because of this restriction.</p>
<p>So, why not switch to writing these API calls in JavaScript?
As JavaScript is run inside the user’s browser, the limitation will apply to the user’s IPs, not the one where the application is deployed, allowing you to more easily scale your application.</p>
<p>You can write this API call using the <code>fetch()</code> JavaScript function.
It can then be used inside a <code>{shiny}</code> JavaScript handler, or as a response to a DOM event (for example, with <code>tags$button("Get Me One!", onclick = "get_rand_beer()")</code>, as we will see below).</p>
<p>Here is the general skeleton that would work when the API does not need authentication and returns JSON.</p>
<ul>
<li>Inside JavaScript (here, we create a function that will be available on an <code>onclick</code> event)</li>
</ul>
<div class="sourceCode" id="cb345"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb345-1"><a href="using-javascript.html#cb345-1" tabindex="-1"></a><span class="co">// FUNCTION definition</span></span>
<span id="cb345-2"><a href="using-javascript.html#cb345-2" tabindex="-1"></a><span class="kw">const</span> get_rand_beer <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb345-3"><a href="using-javascript.html#cb345-3" tabindex="-1"></a>  <span class="co">// Fetching the data</span></span>
<span id="cb345-4"><a href="using-javascript.html#cb345-4" tabindex="-1"></a>  <span class="fu">fetch</span>(<span class="st">&quot;https://api.punkapi.com/v2/beers/random&quot;</span>)</span>
<span id="cb345-5"><a href="using-javascript.html#cb345-5" tabindex="-1"></a>  <span class="co">// What do we do when we receive the data</span></span>
<span id="cb345-6"><a href="using-javascript.html#cb345-6" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>((data) <span class="kw">=&gt;</span>{</span>
<span id="cb345-7"><a href="using-javascript.html#cb345-7" tabindex="-1"></a>  <span class="co">// TTurn the data to JSON</span></span>
<span id="cb345-8"><a href="using-javascript.html#cb345-8" tabindex="-1"></a>    data<span class="op">.</span><span class="fu">json</span>()<span class="op">.</span><span class="fu">then</span>((res) <span class="kw">=&gt;</span> {</span>
<span id="cb345-9"><a href="using-javascript.html#cb345-9" tabindex="-1"></a>    <span class="co">// Send the json to R</span></span>
<span id="cb345-10"><a href="using-javascript.html#cb345-10" tabindex="-1"></a>      Shiny<span class="op">.</span><span class="fu">setInputValue</span>(<span class="st">&quot;beer&quot;</span><span class="op">,</span> res<span class="op">,</span> {<span class="dt">priority</span><span class="op">:</span> <span class="st">&#39;event&#39;</span>})</span>
<span id="cb345-11"><a href="using-javascript.html#cb345-11" tabindex="-1"></a>    })</span>
<span id="cb345-12"><a href="using-javascript.html#cb345-12" tabindex="-1"></a>  })</span>
<span id="cb345-13"><a href="using-javascript.html#cb345-13" tabindex="-1"></a>  <span class="co">// Define what happens if we fail to fetch</span></span>
<span id="cb345-14"><a href="using-javascript.html#cb345-14" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>((error) <span class="kw">=&gt;</span> {</span>
<span id="cb345-15"><a href="using-javascript.html#cb345-15" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&quot;Error catching result from API&quot;</span>)</span>
<span id="cb345-16"><a href="using-javascript.html#cb345-16" tabindex="-1"></a>  })</span>
<span id="cb345-17"><a href="using-javascript.html#cb345-17" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<ul>
<li>Observe the event in your server:</li>
</ul>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="using-javascript.html#cb346-1" tabindex="-1"></a><span class="fu">observeEvent</span>( input<span class="sc">$</span>beer , {</span>
<span id="cb346-2"><a href="using-javascript.html#cb346-2" tabindex="-1"></a>  <span class="co"># Do things with beer</span></span>
<span id="cb346-3"><a href="using-javascript.html#cb346-3" tabindex="-1"></a>})</span></code></pre></div>
<p>Note that the data shared between R and JavaScript is serialized to JSON, so you will have to manipulate that format once you receive it in R.</p>
<p>Learn more about <code>fetch()</code> at <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">Using Fetch</a>.</p>
</div>
<div id="learn-more-about-javascript" class="section level2 hasAnchor" number="17.7">
<h2><span class="header-section-number">17.7</span> Learn more about JavaScript<a href="using-javascript.html#learn-more-about-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If you want to interact straight from R with NodeJS (JavaScript in the terminal), you can try the <code>{bubble}</code> <span class="citation">(<a href="#ref-R-bubble"><strong>R-bubble?</strong></a>)</span> package.
Be aware that you will need to have a working NodeJS installation on your machine.</p>
<p>It can be installed from GitHub</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="using-javascript.html#cb347-1" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;ColinFay/bubble&quot;</span>)</span></code></pre></div>
<p>You can use it in RMarkdown chunks by setting the <code>{knitr}</code> engine:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="using-javascript.html#cb348-1" tabindex="-1"></a>bubble<span class="sc">::</span><span class="fu">set_node_engine</span>()</span></code></pre></div>
<p>Or straight in the command line with:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="using-javascript.html#cb349-1" tabindex="-1"></a><span class="fu">node_repl</span>()</span></code></pre></div>
<p>Want to learn more?
Here is a list of external resources to learn more about JavaScript:</p>
<div id="shiny-and-javascript" class="section level3 hasAnchor" number="17.7.1">
<h3><span class="header-section-number">17.7.1</span> <code>{shiny}</code> and JavaScript<a href="using-javascript.html#shiny-and-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>We have written an online, freely available book about <code>{shiny}</code> and JavaScript: <a href="http://connect.thinkr.fr/js4shinyfieldnotes/"><em>JavaScript 4 <code>{shiny}</code> - Field Notes</em></a>.</p></li>
<li><p><a href="https://js4shiny.com/">JavaScript for <code>{shiny}</code> Users</a>, companion website to the rstudio::conf(2020) workshop.</p></li>
<li><p><a href="https://shiny.rstudio.com/articles/building-inputs.html">Build custom input objects</a>.</p></li>
<li><p><a href="https://shiny.rstudio.com/articles/packaging-javascript.html">Packaging JavaScript code for <code>{shiny}</code></a>.</p></li>
<li><p><a href="https://shiny.rstudio.com/articles/communicating-with-js.html">Communicating with <code>{shiny}</code> via JavaScript</a>.</p></li>
</ul>
</div>
<div id="javascript-basics" class="section level3 hasAnchor" number="17.7.2">
<h3><span class="header-section-number">17.7.2</span> JavaScript basics<a href="using-javascript.html#javascript-basics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">Mozilla JavaScript</a></li>
<li><a href="https://www.w3schools.com/js/default.asp">w3schools JavaScript</a></li>
<li><a href="https://www.freecodecamp.org/">Free Code Camp</a></li>
<li><a href="http://jsforcats.com/">JavaScript for Cats</a></li>
<li><a href="https://www.learn-js.org/">Learn JS</a></li>
</ul>
</div>
<div id="jquery" class="section level3 hasAnchor" number="17.7.3">
<h3><span class="header-section-number">17.7.3</span> jQuery<a href="using-javascript.html#jquery" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="https://learn.jquery.com/">jQuery Learning Center</a></li>
<li><a href="https://www.w3schools.com/jquery/default.asp">w3schools jQuery</a></li>
</ul>
</div>
<div id="intermediateadvanced-javascript" class="section level3 hasAnchor" number="17.7.4">
<h3><span class="header-section-number">17.7.4</span> Intermediate/advanced JavaScript<a href="using-javascript.html#intermediateadvanced-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><a href="https://eloquentjavascript.net/">Eloquent JavaScript</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS">You Don’t Know JS Yet</a></li>
</ul>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-R-shinyjs" class="csl-entry">
Attali, Dean. 2021. <em>Shinyjs: Easily Improve the User Experience of Your Shiny Apps in Seconds</em>. <a href="https://deanattali.com/shinyjs/">https://deanattali.com/shinyjs/</a>.
</div>
<div id="ref-R-shinyalert" class="csl-entry">
Attali, Dean, and Tristan Edwards. 2021. <em>Shinyalert: Easily Create Pretty Popup Messages (Modals) in Shiny</em>. <a href="https://github.com/daattali/shinyalert
https://daattali.com/shiny/shinyalert-demo/">https://github.com/daattali/shinyalert
<div id="ref-R-shiny" class="csl-entry">
Chang, Winston, Joe Cheng, JJ Allaire, Carson Sievert, Barret Schloerke, Yihui Xie, Jeff Allen, Jonathan McPherson, Alan Dipert, and Barbara Borges. 2023. <em>Shiny: Web Application Framework for r</em>. <a href="https://shiny.posit.co/">https://shiny.posit.co/</a>.
</div>
<div id="ref-R-tidytuesday201942" class="csl-entry">
———. 2024f. <em>Tidytuesday201942: A Golem App for Tidy Tuesday</em>. <a href="http://www.github.com/ColinFay/tidytuesday201942">http://www.github.com/ColinFay/tidytuesday201942</a>.
</div>
<div id="ref-R-golem" class="csl-entry">
Fay, Colin, Vincent Guyader, Sébastien Rochette, and Cervan Girard. 2024. <em>Golem: A Framework for Robust Shiny Applications</em>. <a href="https://github.com/ThinkR-open/golem">https://github.com/ThinkR-open/golem</a>.
</div>
<div id="ref-R-htmlwidgets" class="csl-entry">
Vaidyanathan, Ramnath, Yihui Xie, JJ Allaire, Joe Cheng, Carson Sievert, and Kenton Russell. 2023. <em>Htmlwidgets: HTML Widgets for r</em>. <a href="https://github.com/ramnathv/htmlwidgets">https://github.com/ramnathv/htmlwidgets</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="66">
<li id="fn66"><p>See this post on dev.to <a href="https://dev.to/buzzingbuzzer/comment/g0g" class="uri">https://dev.to/buzzingbuzzer/comment/g0g</a> for a quick introduction to the general concept of web sockets.<a href="using-javascript.html#fnref66" class="footnote-back">↩︎</a></p></li>
<li id="fn67"><p>This can also be done by wrapping a JS libraries inside a package, which will later be used inside an application.
See for example <code>{glouton}</code> <span class="citation">(<a href="#ref-R-glouton"><strong>R-glouton?</strong></a>)</span>, which is a wrapper around the [<code>js-cookie</code> &gt;<a href="https://github.com/js-cookie/js-cookie" class="uri">https://github.com/js-cookie/js-cookie</a>&gt; JavaScript library.<a href="using-javascript.html#fnref67" class="footnote-back">↩︎</a></p></li>
<li id="fn68"><p>You can now work with JavaScript in a server with Node.JS, but this won’t be a useful software when working with <code>{shiny}</code>.
See linked resources to learn more.<a href="using-javascript.html#fnref68" class="footnote-back">↩︎</a></p></li>
<li id="fn69"><p>This <code>click</code> behavior can also be done through <code>$(".shiny-plot-output").click(...)</code>.
We chose to display the <code>on("click")</code> pattern as it can be generalized to all DOM events.<a href="using-javascript.html#fnref69" class="footnote-back">↩︎</a></p></li>
<li id="fn70"><p>Note that the old name of this function is <code>Shiny.onInputChange</code>.<a href="using-javascript.html#fnref70" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<hr/>
<footer>
<a href="https://rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
<!--https://yihui.org/en/2018/09/target-blank/-->
<script>
  (function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="optimizing-shiny-code.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="css.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/17-javascript.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
