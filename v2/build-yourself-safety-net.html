<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Build Yourself a Safety Net | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Build Yourself a Safety Net | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg" />
  <meta property="og:description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="github-repo" content="ThinkR-open/engineering-shiny-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Build Yourself a Safety Net | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg" />

<meta name="author" content="Colin Fay" />
<meta name="author" content="Sébastien Rochette" />
<meta name="author" content="Vincent Guyader" />
<meta name="author" content="Cervan Girard" />


<meta name="date" content="2024-03-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="build-app-golem.html"/>
<link rel="next" href="version-control.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audience-for-this-book"><i class="fa fa-check"></i>Audience for this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-production"><i class="fa fa-check"></i>What is “production”?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#colin-fay"><i class="fa fa-check"></i><a href="https://colinfay.me/">Colin Fay</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sébastien-rochette"><i class="fa fa-check"></i><a href="https://statnmap.com/">Sébastien Rochette</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#vincent-guyader"><i class="fa fa-check"></i><a href="https://twitter.com/VincentGuyader">Vincent Guyader</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cervan-girard"><i class="fa fa-check"></i><a href="https://twitter.com/CervanGirard">Cervan Girard</a></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#want-to-help"><i class="fa fa-check"></i>Want to help?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-started-with-shiny"><i class="fa fa-check"></i>Getting started with <code>{shiny}</code></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#putting-shiny-into-production"><i class="fa fa-check"></i>Putting <code>{shiny}</code> into production</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#special-thanks"><i class="fa fa-check"></i>Special thanks</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors-to-this-book"><i class="fa fa-check"></i>Contributors to this book</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html"><i class="fa fa-check"></i>Application presentation</a>
<ul>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#hexmake"><i class="fa fa-check"></i><code>{hexmake}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#tidytuesday201942"><i class="fa fa-check"></i><code>{tidytuesday201942}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#minifying"><i class="fa fa-check"></i><code>{minifying}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#other-applications"><i class="fa fa-check"></i>Other applications</a></li>
</ul></li>
<li class="part"><span><b>I Building Successful {shiny} Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html"><i class="fa fa-check"></i><b>1</b> About Successful <code>{shiny}</code> Apps</a>
<ul>
<li class="chapter" data-level="1.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#a-very-short-introduction-to-shiny"><i class="fa fa-check"></i><b>1.1</b> A (very) short introduction to <code>{shiny}</code></a></li>
<li class="chapter" data-level="1.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#complex-shiny"><i class="fa fa-check"></i><b>1.2</b> What is a complex <code>{shiny}</code> application?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#reaching-the-cliff-of-complexity"><i class="fa fa-check"></i><b>1.2.1</b> Reaching the cliff of complexity</a></li>
<li class="chapter" data-level="1.2.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#balancing-complexities"><i class="fa fa-check"></i><b>1.2.2</b> Balancing complexities</a></li>
<li class="chapter" data-level="1.2.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#assessing-code-complexity"><i class="fa fa-check"></i><b>1.2.3</b> Assessing code complexity</a></li>
<li class="chapter" data-level="1.2.4" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#production-grade-software-engineering"><i class="fa fa-check"></i><b>1.2.4</b> Production-grade software engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#what-is-a-successful-shiny-app"><i class="fa fa-check"></i><b>1.3</b> What is a successful <code>{shiny}</code> app?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-exists"><i class="fa fa-check"></i><b>1.3.1</b> It exists</a></li>
<li class="chapter" data-level="1.3.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-accurate"><i class="fa fa-check"></i><b>1.3.2</b> It is accurate</a></li>
<li class="chapter" data-level="1.3.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-usable"><i class="fa fa-check"></i><b>1.3.3</b> It is usable</a></li>
<li class="chapter" data-level="1.3.4" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-immortal"><i class="fa fa-check"></i><b>1.3.4</b> It is immortal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="planning-ahead.html"><a href="planning-ahead.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a>
<ul>
<li class="chapter" data-level="2.1" data-path="planning-ahead.html"><a href="planning-ahead.html#working-with-a-long-term-mindset"><i class="fa fa-check"></i><b>2.1</b> Working with a “long-term” mindset</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="planning-ahead.html"><a href="planning-ahead.html#prepare-for-success"><i class="fa fa-check"></i><b>2.1.1</b> Prepare for success</a></li>
<li class="chapter" data-level="2.1.2" data-path="planning-ahead.html"><a href="planning-ahead.html#develop-with-the-kiss-principle"><i class="fa fa-check"></i><b>2.1.2</b> Develop with the KISS principle</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="planning-ahead.html"><a href="planning-ahead.html#working-as-a-team-tools-and-structure"><i class="fa fa-check"></i><b>2.2</b> Working as a team: Tools and structure</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="planning-ahead.html"><a href="planning-ahead.html#from-the-tools-point-of-view"><i class="fa fa-check"></i><b>2.2.1</b> From the tools point of view</a></li>
<li class="chapter" data-level="2.2.2" data-path="planning-ahead.html"><a href="planning-ahead.html#from-the-team-point-of-view"><i class="fa fa-check"></i><b>2.2.2</b> From the team point of view</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structuring-project.html"><a href="structuring-project.html"><i class="fa fa-check"></i><b>3</b> Structuring Your Project</a>
<ul>
<li class="chapter" data-level="3.1" data-path="structuring-project.html"><a href="structuring-project.html#shiny-app-as-a-package"><i class="fa fa-check"></i><b>3.1</b> <code>{shiny}</code> app as a package</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="structuring-project.html"><a href="structuring-project.html#what-is-in-a-production-grade-shiny-app"><i class="fa fa-check"></i><b>3.1.1</b> What is in a production-grade <code>{shiny}</code> app?</a></li>
<li class="chapter" data-level="3.1.2" data-path="structuring-project.html"><a href="structuring-project.html#resources"><i class="fa fa-check"></i><b>3.1.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="structuring-project.html"><a href="structuring-project.html#using-shiny-modules"><i class="fa fa-check"></i><b>3.2</b> Using <code>{shiny}</code> modules</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="structuring-project.html"><a href="structuring-project.html#why-shiny-modules"><i class="fa fa-check"></i><b>3.2.1</b> Why <code>{shiny}</code> modules?</a></li>
<li class="chapter" data-level="3.2.2" data-path="structuring-project.html"><a href="structuring-project.html#when-to-use-shiny-modules"><i class="fa fa-check"></i><b>3.2.2</b> When to use <code>{shiny}</code> modules</a></li>
<li class="chapter" data-level="3.2.3" data-path="structuring-project.html"><a href="structuring-project.html#a-practical-walkthrough"><i class="fa fa-check"></i><b>3.2.3</b> A practical walkthrough</a></li>
<li class="chapter" data-level="3.2.4" data-path="structuring-project.html"><a href="structuring-project.html#communication-between-modules"><i class="fa fa-check"></i><b>3.2.4</b> Communication between modules</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="structuring-project.html"><a href="structuring-project.html#structuring-your-app"><i class="fa fa-check"></i><b>3.3</b> Structuring your app</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="structuring-project.html"><a href="structuring-project.html#business-logic-and-application-logic"><i class="fa fa-check"></i><b>3.3.1</b> Business logic and application logic</a></li>
<li class="chapter" data-level="3.3.2" data-path="structuring-project.html"><a href="structuring-project.html#small-is-beautiful-bis-repetita"><i class="fa fa-check"></i><b>3.3.2</b> Small is beautiful (bis repetita)</a></li>
<li class="chapter" data-level="3.3.3" data-path="structuring-project.html"><a href="structuring-project.html#conventions-matter"><i class="fa fa-check"></i><b>3.3.3</b> Conventions matter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="golem.html"><a href="golem.html#what-is-golem"><i class="fa fa-check"></i><b>4.1</b> What is <code>{golem}</code>?</a></li>
<li class="chapter" data-level="4.2" data-path="golem.html"><a href="golem.html#understanding-golem-app-structure"><i class="fa fa-check"></i><b>4.2</b> Understanding <code>{golem}</code> app structure</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="golem.html"><a href="golem.html#description-and-namespace"><i class="fa fa-check"></i><b>4.2.1</b> <code>DESCRIPTION</code> and <code>NAMESPACE</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="golem.html"><a href="golem.html#r"><i class="fa fa-check"></i><b>4.2.2</b> R/</a></li>
<li class="chapter" data-level="4.2.3" data-path="golem.html"><a href="golem.html#golem-config"><i class="fa fa-check"></i><b>4.2.3</b> <code>golem-config</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="golem.html"><a href="golem.html#instappwww"><i class="fa fa-check"></i><b>4.2.4</b> <code>inst/app/www/</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="golem.html"><a href="golem.html#dev"><i class="fa fa-check"></i><b>4.2.5</b> <code>dev/</code></a></li>
<li class="chapter" data-level="4.2.6" data-path="golem.html"><a href="golem.html#man"><i class="fa fa-check"></i><b>4.2.6</b> <code>man/</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The Workflow</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workflow.html"><a href="workflow.html#step-1-design"><i class="fa fa-check"></i><b>5.1</b> Step 1: Design</a></li>
<li class="chapter" data-level="5.2" data-path="workflow.html"><a href="workflow.html#step-2-prototype"><i class="fa fa-check"></i><b>5.2</b> Step 2: Prototype</a></li>
<li class="chapter" data-level="5.3" data-path="workflow.html"><a href="workflow.html#step-3-build"><i class="fa fa-check"></i><b>5.3</b> Step 3: Build</a></li>
<li class="chapter" data-level="5.4" data-path="workflow.html"><a href="workflow.html#step-4-strengthen"><i class="fa fa-check"></i><b>5.4</b> Step 4: Strengthen</a></li>
<li class="chapter" data-level="5.5" data-path="workflow.html"><a href="workflow.html#step-5-deploy"><i class="fa fa-check"></i><b>5.5</b> Step 5: Deploy</a></li>
</ul></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="ux-matters.html"><a href="ux-matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ux-matters.html"><a href="ux-matters.html#simplicity-is-gold"><i class="fa fa-check"></i><b>6.1</b> Simplicity is gold</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ux-matters.html"><a href="ux-matters.html#how-we-read-the-web-scanning-content"><i class="fa fa-check"></i><b>6.1.1</b> How we read the web: Scanning content</a></li>
<li class="chapter" data-level="6.1.2" data-path="ux-matters.html"><a href="ux-matters.html#building-a-self-evident-app-or-at-least-self-explanatory"><i class="fa fa-check"></i><b>6.1.2</b> Building a self-evident app (or at least self-explanatory)</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ux-matters.html"><a href="ux-matters.html#the-danger-of-feature-creep"><i class="fa fa-check"></i><b>6.2</b> The danger of feature-creep</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="ux-matters.html"><a href="ux-matters.html#what-is-feature-creep"><i class="fa fa-check"></i><b>6.2.1</b> What is feature-creep?</a></li>
<li class="chapter" data-level="6.2.2" data-path="ux-matters.html"><a href="ux-matters.html#too-much-reactivity"><i class="fa fa-check"></i><b>6.2.2</b> Too much reactivity</a></li>
<li class="chapter" data-level="6.2.3" data-path="ux-matters.html"><a href="ux-matters.html#too-much-interactivity"><i class="fa fa-check"></i><b>6.2.3</b> Too much interactivity</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="ux-matters.html"><a href="ux-matters.html#web-accessibility"><i class="fa fa-check"></i><b>6.3</b> Web accessibility</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="ux-matters.html"><a href="ux-matters.html#about-accessibility"><i class="fa fa-check"></i><b>6.3.1</b> About accessibility</a></li>
<li class="chapter" data-level="6.3.2" data-path="ux-matters.html"><a href="ux-matters.html#making-your-app-accessible"><i class="fa fa-check"></i><b>6.3.2</b> Making your app accessible</a></li>
<li class="chapter" data-level="6.3.3" data-path="ux-matters.html"><a href="ux-matters.html#evaluating-your-app-accessibility-and-further-reading"><i class="fa fa-check"></i><b>6.3.3</b> Evaluating your app accessibility and further reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html"><i class="fa fa-check"></i><b>7</b> Don’t Rush into Coding</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#designing-before-coding"><i class="fa fa-check"></i><b>7.1</b> Designing before coding</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#the-urge-to-code"><i class="fa fa-check"></i><b>7.1.1</b> The urge to code</a></li>
<li class="chapter" data-level="7.1.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#knowing-where-to-search"><i class="fa fa-check"></i><b>7.1.2</b> Knowing where to search</a></li>
<li class="chapter" data-level="7.1.3" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#about-concept-map"><i class="fa fa-check"></i><b>7.1.3</b> About concept map</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#ask-questions"><i class="fa fa-check"></i><b>7.2</b> Ask questions</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#about-the-end-users"><i class="fa fa-check"></i><b>7.2.1</b> About the end users</a></li>
<li class="chapter" data-level="7.2.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#building-personas"><i class="fa fa-check"></i><b>7.2.2</b> Building personas</a></li>
<li class="chapter" data-level="7.2.3" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#pre-existing-code-base"><i class="fa fa-check"></i><b>7.2.3</b> Pre-existing code-base</a></li>
<li class="chapter" data-level="7.2.4" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#deployment"><i class="fa fa-check"></i><b>7.2.4</b> Deployment</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="8" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html"><i class="fa fa-check"></i><b>8</b> Setting up for Success with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#create-a-golem"><i class="fa fa-check"></i><b>8.1</b> Create a <code>{golem}</code></a></li>
<li class="chapter" data-level="8.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#setting-things-up-with-dev01_start.r"><i class="fa fa-check"></i><b>8.2</b> Setting things up with <code>dev/01_start.R</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#fill-the-description-and-set-options"><i class="fa fa-check"></i><b>8.2.1</b> Fill the DESCRIPTION and set options</a></li>
<li class="chapter" data-level="8.2.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#set-common-files"><i class="fa fa-check"></i><b>8.2.2</b> Set common files</a></li>
<li class="chapter" data-level="8.2.3" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#use-recommended-elements"><i class="fa fa-check"></i><b>8.2.3</b> Use recommended elements</a></li>
<li class="chapter" data-level="8.2.4" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-utility-functions"><i class="fa fa-check"></i><b>8.2.4</b> Add utility functions</a></li>
<li class="chapter" data-level="8.2.5" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#changing-the-favicon"><i class="fa fa-check"></i><b>8.2.5</b> Changing the favicon</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#setting-infrastructure-for-prototyping"><i class="fa fa-check"></i><b>8.3</b> Setting infrastructure for prototyping</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-modules-in-dev02_dev.r"><i class="fa fa-check"></i><b>8.3.1</b> Add modules in <code>dev/02_dev.R</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-css-and-js-files"><i class="fa fa-check"></i><b>8.3.2</b> Add CSS and JS files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="building-ispum-app.html"><a href="building-ispum-app.html"><i class="fa fa-check"></i><b>9</b> Building an “ipsum-app”</a>
<ul>
<li class="chapter" data-level="9.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototyping-is-crucial"><i class="fa fa-check"></i><b>9.1</b> Prototyping is crucial</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototype-then-polish"><i class="fa fa-check"></i><b>9.1.1</b> Prototype, then polish</a></li>
<li class="chapter" data-level="9.1.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#the-ui-first-approach"><i class="fa fa-check"></i><b>9.1.2</b> The “UI first” approach</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototyping-shiny"><i class="fa fa-check"></i><b>9.2</b> Prototyping <code>{shiny}</code></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#fast-ui-prototyping-with-shinipsum"><i class="fa fa-check"></i><b>9.2.1</b> Fast UI prototyping with <code>{shinipsum}</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#using-fakir-for-fake-data-generation"><i class="fa fa-check"></i><b>9.2.2</b> Using <code>{fakir}</code> for fake data generation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="building-ispum-app.html"><a href="building-ispum-app.html#proto-rmdfirst"><i class="fa fa-check"></i><b>9.3</b> Building with RMarkdown</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#define-the-content-of-the-application"><i class="fa fa-check"></i><b>9.3.1</b> Define the content of the application</a></li>
<li class="chapter" data-level="9.3.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#using-the-rmd-files-as-a-laboratory-notebook"><i class="fa fa-check"></i><b>9.3.2</b> Using the Rmd files as a laboratory notebook</a></li>
<li class="chapter" data-level="9.3.3" data-path="building-ispum-app.html"><a href="building-ispum-app.html#rmd-vignettes-and-documentation-first"><i class="fa fa-check"></i><b>9.3.3</b> Rmd, Vignettes, and documentation first</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="10" data-path="build-app-golem.html"><a href="build-app-golem.html"><i class="fa fa-check"></i><b>10</b> Building the App with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="build-app-golem.html"><a href="build-app-golem.html#add-dependencies"><i class="fa fa-check"></i><b>10.1</b> Add dependencies</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="build-app-golem.html"><a href="build-app-golem.html#package-dependencies"><i class="fa fa-check"></i><b>10.1.1</b> Package dependencies</a></li>
<li class="chapter" data-level="10.1.2" data-path="build-app-golem.html"><a href="build-app-golem.html#importing-packages-and-functions"><i class="fa fa-check"></i><b>10.1.2</b> Importing packages and functions</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="build-app-golem.html"><a href="build-app-golem.html#submodules-and-utility-functions"><i class="fa fa-check"></i><b>10.2</b> Submodules and utility functions</a></li>
<li class="chapter" data-level="10.3" data-path="build-app-golem.html"><a href="build-app-golem.html#add-tests"><i class="fa fa-check"></i><b>10.3</b> Add tests</a></li>
<li class="chapter" data-level="10.4" data-path="build-app-golem.html"><a href="build-app-golem.html#documentation-and-code-coverage"><i class="fa fa-check"></i><b>10.4</b> Documentation and code coverage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="build-app-golem.html"><a href="build-app-golem.html#vignette"><i class="fa fa-check"></i><b>10.4.1</b> Vignette</a></li>
<li class="chapter" data-level="10.4.2" data-path="build-app-golem.html"><a href="build-app-golem.html#code-coverage-and-continuous-integration"><i class="fa fa-check"></i><b>10.4.2</b> Code coverage and continuous integration</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="build-app-golem.html"><a href="build-app-golem.html#using-golem-dev-functions"><i class="fa fa-check"></i><b>10.5</b> Using <code>{golem}</code> dev functions</a></li>
</ul></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="11" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html"><i class="fa fa-check"></i><b>11</b> Build Yourself a Safety Net</a>
<ul>
<li class="chapter" data-level="11.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-your-app"><i class="fa fa-check"></i><b>11.1</b> Testing your app</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-business-logic"><i class="fa fa-check"></i><b>11.1.1</b> Testing the business logic</a></li>
<li class="chapter" data-level="11.1.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#shinytestserver"><i class="fa fa-check"></i><b>11.1.2</b> <code>shiny::testServer()</code></a></li>
<li class="chapter" data-level="11.1.3" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-interactive-logic"><i class="fa fa-check"></i><b>11.1.3</b> Testing the interactive logic</a></li>
<li class="chapter" data-level="11.1.4" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-app-load"><i class="fa fa-check"></i><b>11.1.4</b> Testing the app load</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#a-reproducible-environment"><i class="fa fa-check"></i><b>11.2</b> A reproducible environment</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#renv"><i class="fa fa-check"></i><b>11.2.1</b> <code>{renv}</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#docker"><i class="fa fa-check"></i><b>11.2.2</b> Docker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>12</b> Version Control</a>
<ul>
<li class="chapter" data-level="12.1" data-path="version-control.html"><a href="version-control.html#version-control-git"><i class="fa fa-check"></i><b>12.1</b> Using version control with <code>Git</code></a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="version-control.html"><a href="version-control.html#why-version-control"><i class="fa fa-check"></i><b>12.1.1</b> Why version control?</a></li>
<li class="chapter" data-level="12.1.2" data-path="version-control.html"><a href="version-control.html#git-basics-add---commit---push---pull"><i class="fa fa-check"></i><b>12.1.2</b> <code>Git</code> basics: <code>add</code> - <code>commit</code> - <code>push</code> - <code>pull</code></a></li>
<li class="chapter" data-level="12.1.3" data-path="version-control.html"><a href="version-control.html#about-branches"><i class="fa fa-check"></i><b>12.1.3</b> About branches</a></li>
<li class="chapter" data-level="12.1.4" data-path="version-control.html"><a href="version-control.html#issues"><i class="fa fa-check"></i><b>12.1.4</b> Issues</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="version-control.html"><a href="version-control.html#git-integration"><i class="fa fa-check"></i><b>12.2</b> <code>Git</code> integration</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="version-control.html"><a href="version-control.html#with-rstudio"><i class="fa fa-check"></i><b>12.2.1</b> With RStudio</a></li>
<li class="chapter" data-level="12.2.2" data-path="version-control.html"><a href="version-control.html#as-part-of-a-larger-world"><i class="fa fa-check"></i><b>12.2.2</b> As part of a larger world</a></li>
<li class="chapter" data-level="12.2.3" data-path="version-control.html"><a href="version-control.html#about-git-flow"><i class="fa fa-check"></i><b>12.2.3</b> About <code>git-flow</code></a></li>
<li class="chapter" data-level="12.2.4" data-path="version-control.html"><a href="version-control.html#further-readings-on-git"><i class="fa fa-check"></i><b>12.2.4</b> Further readings on <code>Git</code></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="version-control.html"><a href="version-control.html#automated-testing"><i class="fa fa-check"></i><b>12.3</b> Automated testing</a></li>
</ul></li>
<li class="part"><span><b>VI Step 5: Deploy</b></span></li>
<li class="chapter" data-level="13" data-path="deploy.html"><a href="deploy.html"><i class="fa fa-check"></i><b>13</b> Deploy Your Application</a>
<ul>
<li class="chapter" data-level="13.1" data-path="deploy.html"><a href="deploy.html#before-deployment-checklist"><i class="fa fa-check"></i><b>13.1</b> Before deployment checklist</a></li>
<li class="chapter" data-level="13.2" data-path="deploy.html"><a href="deploy.html#sharing-your-app-as-a-package"><i class="fa fa-check"></i><b>13.2</b> Sharing your app as a package</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="deploy.html"><a href="deploy.html#install-on-your-machine"><i class="fa fa-check"></i><b>13.2.1</b> Install on your machine</a></li>
<li class="chapter" data-level="13.2.2" data-path="deploy.html"><a href="deploy.html#share-as-a-built-package"><i class="fa fa-check"></i><b>13.2.2</b> Share as a built package</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="deploy.html"><a href="deploy.html#deploying-apps-with-golem"><i class="fa fa-check"></i><b>13.3</b> Deploying apps with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="deploy.html"><a href="deploy.html#rstudio-environments"><i class="fa fa-check"></i><b>13.3.1</b> RStudio environments</a></li>
<li class="chapter" data-level="13.3.2" data-path="deploy.html"><a href="deploy.html#docker-1"><i class="fa fa-check"></i><b>13.3.2</b> Docker</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Optimizing</b></span></li>
<li class="chapter" data-level="14" data-path="need-for-optimization.html"><a href="need-for-optimization.html"><i class="fa fa-check"></i><b>14</b> The Need for Optimization</a>
<ul>
<li class="chapter" data-level="14.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#build-first-then-optimize"><i class="fa fa-check"></i><b>14.1</b> Build first, then optimize</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#identifying-bottlenecks"><i class="fa fa-check"></i><b>14.1.1</b> Identifying bottlenecks</a></li>
<li class="chapter" data-level="14.1.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#do-you-need-faster-functions"><i class="fa fa-check"></i><b>14.1.2</b> Do you need faster functions?</a></li>
<li class="chapter" data-level="14.1.3" data-path="need-for-optimization.html"><a href="need-for-optimization.html#dont-sacrifice-readability"><i class="fa fa-check"></i><b>14.1.3</b> Don’t sacrifice readability</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#tools-for-profiling"><i class="fa fa-check"></i><b>14.2</b> Tools for profiling</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#profiling-r-code"><i class="fa fa-check"></i><b>14.2.1</b> Profiling R code</a></li>
<li class="chapter" data-level="14.2.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#profiling-shiny"><i class="fa fa-check"></i><b>14.2.2</b> Profiling <code>{shiny}</code></a></li>
<li class="chapter" data-level="14.2.3" data-path="need-for-optimization.html"><a href="need-for-optimization.html#more-resources-about-web-page-performance"><i class="fa fa-check"></i><b>14.2.3</b> More resources about web-page performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="common-app-caveats.html"><a href="common-app-caveats.html"><i class="fa fa-check"></i><b>15</b> Common Application Caveats</a>
<ul>
<li class="chapter" data-level="15.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reactivity-anti-patterns"><i class="fa fa-check"></i><b>15.1</b> Reactivity anti-patterns</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reactivity-is-awesome-until-it-is-not"><i class="fa fa-check"></i><b>15.1.1</b> Reactivity is awesome… until it is not</a></li>
<li class="chapter" data-level="15.1.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#observe-vs-observeevent"><i class="fa fa-check"></i><b>15.1.2</b> <code>observe</code> vs <code>observeEvent</code></a></li>
<li class="chapter" data-level="15.1.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#building-triggers-and-watchers"><i class="fa fa-check"></i><b>15.1.3</b> Building triggers and watchers</a></li>
<li class="chapter" data-level="15.1.4" data-path="common-app-caveats.html"><a href="common-app-caveats.html#using-r6-as-data-storage"><i class="fa fa-check"></i><b>15.1.4</b> Using R6 as data storage</a></li>
<li class="chapter" data-level="15.1.5" data-path="common-app-caveats.html"><a href="common-app-caveats.html#logging-reactivity-with-whereami"><i class="fa fa-check"></i><b>15.1.5</b> Logging reactivity with <code>{whereami}</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#r-does-too-much"><i class="fa fa-check"></i><b>15.2</b> R does too much</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#rendering-the-ui-from-the-server-side"><i class="fa fa-check"></i><b>15.2.1</b> Rendering the UI from the server side</a></li>
<li class="chapter" data-level="15.2.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#too-much-data-in-memory"><i class="fa fa-check"></i><b>15.2.2</b> Too much data in memory</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reading-data"><i class="fa fa-check"></i><b>15.3</b> Reading data</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#including-data-in-your-application"><i class="fa fa-check"></i><b>15.3.1</b> Including data in your application</a></li>
<li class="chapter" data-level="15.3.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reading-external-datasets"><i class="fa fa-check"></i><b>15.3.2</b> Reading external datasets</a></li>
<li class="chapter" data-level="15.3.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#using-external-databases"><i class="fa fa-check"></i><b>15.3.3</b> Using external databases</a></li>
<li class="chapter" data-level="15.3.4" data-path="common-app-caveats.html"><a href="common-app-caveats.html#data-source-checklist"><i class="fa fa-check"></i><b>15.3.4</b> Data-source checklist</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>16</b> Optimizing <code>{shiny}</code> Code</a>
<ul>
<li class="chapter" data-level="16.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#optimizing-r-code"><i class="fa fa-check"></i><b>16.1</b> Optimizing R code</a></li>
<li class="chapter" data-level="16.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-elements"><i class="fa fa-check"></i><b>16.2</b> Caching elements</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#what-is-caching"><i class="fa fa-check"></i><b>16.2.1</b> What is caching?</a></li>
<li class="chapter" data-level="16.2.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#native-caching-in-r"><i class="fa fa-check"></i><b>16.2.2</b> Native caching in R</a></li>
<li class="chapter" data-level="16.2.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-in-shiny"><i class="fa fa-check"></i><b>16.2.3</b> Caching in <code>{shiny}</code></a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#asynchronous-in-shiny"><i class="fa fa-check"></i><b>16.3</b> Asynchronous in <code>{shiny}</code></a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#how-to"><i class="fa fa-check"></i><b>16.3.1</b> How to</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="using-javascript.html"><a href="using-javascript.html"><i class="fa fa-check"></i><b>17</b> Using JavaScript</a>
<ul>
<li class="chapter" data-level="17.1" data-path="using-javascript.html"><a href="using-javascript.html#introduction-1"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="using-javascript.html"><a href="using-javascript.html#a-quick-introduction-to-javascript"><i class="fa fa-check"></i><b>17.2</b> A quick introduction to JavaScript</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="using-javascript.html"><a href="using-javascript.html#about-javascript"><i class="fa fa-check"></i><b>17.2.1</b> About JavaScript</a></li>
<li class="chapter" data-level="17.2.2" data-path="using-javascript.html"><a href="using-javascript.html#including-javascript-code-in-your-app"><i class="fa fa-check"></i><b>17.2.2</b> Including JavaScript code in your app</a></li>
<li class="chapter" data-level="17.2.3" data-path="using-javascript.html"><a href="using-javascript.html#understanding-html-class-and-id"><i class="fa fa-check"></i><b>17.2.3</b> Understanding HTML, class, and id</a></li>
<li class="chapter" data-level="17.2.4" data-path="using-javascript.html"><a href="using-javascript.html#querying-in-vanilla-javascript"><i class="fa fa-check"></i><b>17.2.4</b> Querying in Vanilla JavaScript</a></li>
<li class="chapter" data-level="17.2.5" data-path="using-javascript.html"><a href="using-javascript.html#about-dom-events"><i class="fa fa-check"></i><b>17.2.5</b> About DOM events</a></li>
<li class="chapter" data-level="17.2.6" data-path="using-javascript.html"><a href="using-javascript.html#about-jquery-and-jquery-selectors"><i class="fa fa-check"></i><b>17.2.6</b> About <code>jQuery</code> and <code>jQuery</code> selectors</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="using-javascript.html"><a href="using-javascript.html#client-side-javascript"><i class="fa fa-check"></i><b>17.3</b> Client-side JavaScript</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="using-javascript.html"><a href="using-javascript.html#common-patterns"><i class="fa fa-check"></i><b>17.3.1</b> Common patterns</a></li>
<li class="chapter" data-level="17.3.2" data-path="using-javascript.html"><a href="using-javascript.html#where-to-put-them-back-to-javascript-events"><i class="fa fa-check"></i><b>17.3.2</b> Where to put them: Back to JavaScript Events</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="using-javascript.html"><a href="using-javascript.html#javascript---shiny-communication"><i class="fa fa-check"></i><b>17.4</b> JavaScript &lt;-&gt; <code>{shiny}</code> communication</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="using-javascript.html"><a href="using-javascript.html#from-r-to-javascript"><i class="fa fa-check"></i><b>17.4.1</b> From R to JavaScript</a></li>
<li class="chapter" data-level="17.4.2" data-path="using-javascript.html"><a href="using-javascript.html#from-javascript-to-r"><i class="fa fa-check"></i><b>17.4.2</b> From JavaScript to R</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="using-javascript.html"><a href="using-javascript.html#about-shinyjs-js-functions"><i class="fa fa-check"></i><b>17.5</b> About <code>{shinyjs}</code> JS functions</a></li>
<li class="chapter" data-level="17.6" data-path="using-javascript.html"><a href="using-javascript.html#one-last-thing-api-calls"><i class="fa fa-check"></i><b>17.6</b> One last thing: API calls</a></li>
<li class="chapter" data-level="17.7" data-path="using-javascript.html"><a href="using-javascript.html#learn-more-about-javascript"><i class="fa fa-check"></i><b>17.7</b> Learn more about JavaScript</a>
<ul>
<li class="chapter" data-level="17.7.1" data-path="using-javascript.html"><a href="using-javascript.html#shiny-and-javascript"><i class="fa fa-check"></i><b>17.7.1</b> <code>{shiny}</code> and JavaScript</a></li>
<li class="chapter" data-level="17.7.2" data-path="using-javascript.html"><a href="using-javascript.html#javascript-basics"><i class="fa fa-check"></i><b>17.7.2</b> JavaScript basics</a></li>
<li class="chapter" data-level="17.7.3" data-path="using-javascript.html"><a href="using-javascript.html#jquery"><i class="fa fa-check"></i><b>17.7.3</b> jQuery</a></li>
<li class="chapter" data-level="17.7.4" data-path="using-javascript.html"><a href="using-javascript.html#intermediateadvanced-javascript"><i class="fa fa-check"></i><b>17.7.4</b> Intermediate/advanced JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>18</b> A Gentle Introduction to CSS</a>
<ul>
<li class="chapter" data-level="18.1" data-path="css.html"><a href="css.html#what-is-css"><i class="fa fa-check"></i><b>18.1</b> What is CSS?</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="css.html"><a href="css.html#about-css"><i class="fa fa-check"></i><b>18.1.1</b> About CSS</a></li>
<li class="chapter" data-level="18.1.2" data-path="css.html"><a href="css.html#shinys-default-fluidpage"><i class="fa fa-check"></i><b>18.1.2</b> <code>{shiny}</code>’s default: <code>fluidPage()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="css.html"><a href="css.html#getting-started-with-css"><i class="fa fa-check"></i><b>18.2</b> Getting started with CSS</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="css.html"><a href="css.html#about-css-syntax"><i class="fa fa-check"></i><b>18.2.1</b> About CSS syntax</a></li>
<li class="chapter" data-level="18.2.2" data-path="css.html"><a href="css.html#css-selectors"><i class="fa fa-check"></i><b>18.2.2</b> CSS selectors</a></li>
<li class="chapter" data-level="18.2.3" data-path="css.html"><a href="css.html#css-properties"><i class="fa fa-check"></i><b>18.2.3</b> CSS properties</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="css.html"><a href="css.html#integrate-css-files-in-your-shiny-app"><i class="fa fa-check"></i><b>18.3</b> Integrate CSS files in your <code>{shiny}</code> app</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="css.html"><a href="css.html#inline-css"><i class="fa fa-check"></i><b>18.3.1</b> Inline CSS</a></li>
<li class="chapter" data-level="18.3.2" data-path="css.html"><a href="css.html#writing-in-a-tagsstyle"><i class="fa fa-check"></i><b>18.3.2</b> Writing in a <code>tags$style()</code></a></li>
<li class="chapter" data-level="18.3.3" data-path="css.html"><a href="css.html#including-external-files"><i class="fa fa-check"></i><b>18.3.3</b> Including external files</a></li>
<li class="chapter" data-level="18.3.4" data-path="css.html"><a href="css.html#using-r-packages"><i class="fa fa-check"></i><b>18.3.4</b> Using R packages</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="css.html"><a href="css.html#external-resources"><i class="fa fa-check"></i><b>18.4</b> External resources</a></li>
</ul></li>
<li class="part"><span><b>VIII Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html"><i class="fa fa-check"></i>Appendix A - Use Case: Building an App from Start to Finish</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#about-the-application"><i class="fa fa-check"></i>About the application</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-1-design-1"><i class="fa fa-check"></i>Step 1: Design</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deciphering-the-specifications"><i class="fa fa-check"></i>Deciphering the specifications</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#building-a-concept-map"><i class="fa fa-check"></i>Building a concept map</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#asking-questions"><i class="fa fa-check"></i>Asking questions</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#building-personas-1"><i class="fa fa-check"></i>Building personas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-2-prototyping"><i class="fa fa-check"></i>Step 2: Prototyping</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#back-end-in-rmd"><i class="fa fa-check"></i>Back-end in Rmd</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#ui-prototyping"><i class="fa fa-check"></i>UI prototyping</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-3-build-1"><i class="fa fa-check"></i>Step 3: Build</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-4-strengthen-1"><i class="fa fa-check"></i>Step 4: Strengthen</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-5-deploy-1"><i class="fa fa-check"></i>Step 5: Deploy</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#before-deployment-checklist-1"><i class="fa fa-check"></i>Before deployment checklist</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-as-a-tar.gz"><i class="fa fa-check"></i>Deploy as a tar.gz</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-on-rstudio-connect"><i class="fa fa-check"></i>Deploy on RStudio Connect</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-with-docker"><i class="fa fa-check"></i>Deploy with Docker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-b---session-info.html"><a href="appendix-b---session-info.html"><i class="fa fa-check"></i>Appendix B - Session Info</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="build-yourself-safety-net" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Chapter 11</span> Build Yourself a Safety Net<a href="build-yourself-safety-net.html#build-yourself-safety-net" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<blockquote>
<p>Don’t fuck over Future You</p>
<p><em>JD</em> (<a href="https://twitter.com/CMastication" class="uri">https://twitter.com/CMastication</a>)</p>
</blockquote>
<p>Strengthening your app means two things: testing and locking the application environment.</p>
<div id="testing-your-app" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Testing your app<a href="build-yourself-safety-net.html#testing-your-app" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The process of getting your application production-ready implies that the application is tested.
With a robust testing suite, you will develop, maintain, and improve in a safe environment and ensure your project sustainability.
What will you be testing?
Both sides of the application: the business logic and the user interface.
And also, the application load, i.e. how much time and memory are required when your application starts being used by a significant number of users, be it from the user perspective (how long does it take to complete a full scenario) and from the server perspective (how much memory is needed for my app to run).</p>
<div id="testing-the-business-logic" class="section level3 hasAnchor" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Testing the business logic<a href="build-yourself-safety-net.html#testing-the-business-logic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you have been following the good practices we have listed in previous chapters, your current application has at least these two properties:</p>
<ul>
<li>The business-logic functions are separated from your interactive-logic functions.</li>
<li>Your application is inside a package.</li>
</ul>
<p>On top of being a sane organization approach, <strong>using this separation inside a package structure allows you to leverage all the tooling that has been built for testing “standard” packages</strong>.</p>
<p>R developers have been developing packages for a long time, and at the time of writing these lines (April 2020), more than 15,000 packages are available on CRAN.
To sustain these developments, a lot of tools have been created to secure the development process, and especially tools for creating unit tests for your package.</p>
<p>Unit tests are a general concept in software engineering that describes the process of writing a form of assessment to check the validity of your code.
A simplified explanation is that if you write a function called <code>meaning_of_life</code> that returns <code>42</code>, you will expect this function to always return <code>42</code>, and to be alerted if ever this value changes.
Using unit tests is a way to secure your work in the future, be it for future you, for your collaborator, or for anybody wanting to collaborate on the project: if anyone comes and change the code behind the <code>meaning_of_life()</code> function, and the result is no longer <code>42</code>, the developer working on this piece of code will be able to catch it.
The general idea is to detect bugs and breaking changes at the moment they are happening, not once it is too late.</p>
<p>There are several packages in R that can be used to implement unit testing, and you can even implement your own tests.
One of the most popular right now <a href="#fn46" class="footnote-ref" id="fnref46"><sup>46</sup></a> is <code>{testthat}</code> <span class="citation">(<a href="#ref-R-testthat">Wickham 2023b</a>)</span>.
This testing framework lets you write a series of tests and expectations, which are then launched when calling <code>test()</code> from <code>{devtools}</code> <span class="citation">(<a href="#ref-R-devtools">Wickham et al. 2022</a>)</span>, either locally or in your CI system.</p>
<p>Here is an example of testing that the <code>meaning_of_life</code> will always be <code>42</code>.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="build-yourself-safety-net.html#cb143-1" tabindex="-1"></a><span class="co"># Creating a testing context, with one expectation</span></span>
<span id="cb143-2"><a href="build-yourself-safety-net.html#cb143-2" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;The meaning of life is 42&quot;</span>, {</span>
<span id="cb143-3"><a href="build-yourself-safety-net.html#cb143-3" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb143-4"><a href="build-yourself-safety-net.html#cb143-4" tabindex="-1"></a>    <span class="fu">meaning_of_life</span>(),</span>
<span id="cb143-5"><a href="build-yourself-safety-net.html#cb143-5" tabindex="-1"></a>    <span class="dv">42</span></span>
<span id="cb143-6"><a href="build-yourself-safety-net.html#cb143-6" tabindex="-1"></a>  )</span>
<span id="cb143-7"><a href="build-yourself-safety-net.html#cb143-7" tabindex="-1"></a>})</span></code></pre></div>
<p>Once you have this test skeleton set, you will be able to detect any change to this function.</p>
<p>If you want to learn more about how to use <code>{testthat}</code>, you can refer to the following resources:</p>
<ul>
<li><p><a href="https://testthat.r-lib.org/"><code>{testthat}</code> online documentation</a></p></li>
<li><p><a href="https://r-pkgs.org/tests.html">R Packages - Chapter 10 Testing</a></p></li>
<li><p><a href="https://speakerdeck.com/colinfay/building-a-package-that-lasts-erum-2018-workshop?slide=107">Building a package that lasts, eRum 2018 workshop - Part 5: Test and Code Coverage</a></p></li>
</ul>
</div>
<div id="shinytestserver" class="section level3 hasAnchor" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> <code>shiny::testServer()</code><a href="build-yourself-safety-net.html#shinytestserver" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>At the time of writing these lines, the <code>{shiny}</code> team is actively working on a new way to test <code>{shiny}</code> server functions.
These features are still a work in progress, and are not available in the stable version of <code>{shiny}</code> we have used in this book (1.8.0).
Given that these features are still subject to change, we will not go into detail about these new features, but here is a preview of what it will look like:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="build-yourself-safety-net.html#cb144-1" tabindex="-1"></a><span class="co"># Given the following module</span></span>
<span id="cb144-2"><a href="build-yourself-safety-net.html#cb144-2" tabindex="-1"></a>computation_module_server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb144-3"><a href="build-yourself-safety-net.html#cb144-3" tabindex="-1"></a>  ns <span class="ot">&lt;-</span> session<span class="sc">$</span>ns</span>
<span id="cb144-4"><a href="build-yourself-safety-net.html#cb144-4" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">reactiveValues</span>(</span>
<span id="cb144-5"><a href="build-yourself-safety-net.html#cb144-5" tabindex="-1"></a>    <span class="at">value =</span> <span class="cn">NULL</span></span>
<span id="cb144-6"><a href="build-yourself-safety-net.html#cb144-6" tabindex="-1"></a>  )</span>
<span id="cb144-7"><a href="build-yourself-safety-net.html#cb144-7" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>selector , {</span>
<span id="cb144-8"><a href="build-yourself-safety-net.html#cb144-8" tabindex="-1"></a>    r<span class="sc">$</span>value <span class="ot">&lt;-</span> input<span class="sc">$</span>selector <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb144-9"><a href="build-yourself-safety-net.html#cb144-9" tabindex="-1"></a>  })</span>
<span id="cb144-10"><a href="build-yourself-safety-net.html#cb144-10" tabindex="-1"></a></span>
<span id="cb144-11"><a href="build-yourself-safety-net.html#cb144-11" tabindex="-1"></a>}</span>
<span id="cb144-12"><a href="build-yourself-safety-net.html#cb144-12" tabindex="-1"></a></span>
<span id="cb144-13"><a href="build-yourself-safety-net.html#cb144-13" tabindex="-1"></a><span class="co"># We can test it that way</span></span>
<span id="cb144-14"><a href="build-yourself-safety-net.html#cb144-14" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb144-15"><a href="build-yourself-safety-net.html#cb144-15" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb144-16"><a href="build-yourself-safety-net.html#cb144-16" tabindex="-1"></a><span class="fu">testServer</span>(computation_module_server, {</span>
<span id="cb144-17"><a href="build-yourself-safety-net.html#cb144-17" tabindex="-1"></a></span>
<span id="cb144-18"><a href="build-yourself-safety-net.html#cb144-18" tabindex="-1"></a>  <span class="co"># Give input$selector a value</span></span>
<span id="cb144-19"><a href="build-yourself-safety-net.html#cb144-19" tabindex="-1"></a>  session<span class="sc">$</span><span class="fu">setInputs</span>(<span class="at">selector =</span> <span class="dv">1</span>)</span>
<span id="cb144-20"><a href="build-yourself-safety-net.html#cb144-20" tabindex="-1"></a>  <span class="co"># Call {testthat} functions</span></span>
<span id="cb144-21"><a href="build-yourself-safety-net.html#cb144-21" tabindex="-1"></a>  <span class="fu">expect_equal</span>(r<span class="sc">$</span>value, <span class="dv">10</span>)</span>
<span id="cb144-22"><a href="build-yourself-safety-net.html#cb144-22" tabindex="-1"></a></span>
<span id="cb144-23"><a href="build-yourself-safety-net.html#cb144-23" tabindex="-1"></a>  <span class="co"># Give input$selector a value</span></span>
<span id="cb144-24"><a href="build-yourself-safety-net.html#cb144-24" tabindex="-1"></a>  session<span class="sc">$</span><span class="fu">setInputs</span>(<span class="at">selector =</span> <span class="dv">2</span>)</span>
<span id="cb144-25"><a href="build-yourself-safety-net.html#cb144-25" tabindex="-1"></a>  <span class="co"># Call {testthat} functions</span></span>
<span id="cb144-26"><a href="build-yourself-safety-net.html#cb144-26" tabindex="-1"></a>  <span class="fu">expect_equal</span>(r<span class="sc">$</span>value, <span class="dv">20</span>)</span>
<span id="cb144-27"><a href="build-yourself-safety-net.html#cb144-27" tabindex="-1"></a></span>
<span id="cb144-28"><a href="build-yourself-safety-net.html#cb144-28" tabindex="-1"></a></span>
<span id="cb144-29"><a href="build-yourself-safety-net.html#cb144-29" tabindex="-1"></a>})</span></code></pre></div>
<p>This methodology is still under development, so we won’t go deeper into this subject, but if you want to follow the update on this topic, please refer to the <a href="https://shiny.rstudio.com/articles/integration-testing.html">Server function testing with Shiny</a> article on the <code>{shiny}</code> website.</p>
</div>
<div id="testing-the-interactive-logic" class="section level3 hasAnchor" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Testing the interactive logic<a href="build-yourself-safety-net.html#testing-the-interactive-logic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once you have built a solid test suite for your business logic, another side of your app you might want to check is the interactive logic, i.e. the user interface.</p>
<p>There are several tools from the web development world that can be used to do exactly that: mimicking an interactive session where instead of deliberately clicking on the application interface, you let a program do it for you.</p>
<div id="a.-puppeteer" class="section level4 unnumbered hasAnchor">
<h4>A. <code>puppeteer</code><a href="build-yourself-safety-net.html#a.-puppeteer" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>puppeteer</code> is a NodeJS module that drives a Google Chrome headless session and mimics a session on the app.</p>
<p>And good news, there is a Google Chrome extension, called <a href="https://chrome.google.com/webstore/detail/puppeteer-recorder/djeegiggegleadkkbgopoonhjimgehda">Puppeteer Recorder</a>, that allows you to create, while visiting a web page, the <code>pupepeteer</code> script to reproduce your visit.
Here is, for example, a very small JavaScript script for testing <code>{hexmake}</code> <span class="citation">(<a href="#ref-R-hexmake">Fay 2024d</a>)</span>, generated by this extension.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb145-1"><a href="build-yourself-safety-net.html#cb145-1" tabindex="-1"></a><span class="co">// Require the node module</span></span>
<span id="cb145-2"><a href="build-yourself-safety-net.html#cb145-2" tabindex="-1"></a><span class="kw">const</span> puppeteer <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;puppeteer&#39;</span>)<span class="op">;</span></span>
<span id="cb145-3"><a href="build-yourself-safety-net.html#cb145-3" tabindex="-1"></a>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb145-4"><a href="build-yourself-safety-net.html#cb145-4" tabindex="-1"></a><span class="co">// launch puppeteer and connect to the page</span></span>
<span id="cb145-5"><a href="build-yourself-safety-net.html#cb145-5" tabindex="-1"></a><span class="kw">const</span> browser <span class="op">=</span> <span class="cf">await</span> puppeteer<span class="op">.</span><span class="fu">launch</span>()</span>
<span id="cb145-6"><a href="build-yourself-safety-net.html#cb145-6" tabindex="-1"></a><span class="kw">const</span> page <span class="op">=</span> <span class="cf">await</span> browser<span class="op">.</span><span class="fu">newPage</span>()</span>
<span id="cb145-7"><a href="build-yourself-safety-net.html#cb145-7" tabindex="-1"></a><span class="cf">await</span> page<span class="op">.</span><span class="fu">goto</span>(<span class="st">&#39;http://localhost:2811/&#39;</span>)</span>
<span id="cb145-8"><a href="build-yourself-safety-net.html#cb145-8" tabindex="-1"></a></span>
<span id="cb145-9"><a href="build-yourself-safety-net.html#cb145-9" tabindex="-1"></a><span class="co">// We&#39;re waiting for a DOM element to be ready</span></span>
<span id="cb145-10"><a href="build-yourself-safety-net.html#cb145-10" tabindex="-1"></a><span class="cf">await</span> page<span class="op">.</span><span class="fu">waitForSelector</span>(<span class="st">&#39;.row &gt; .col &gt; </span><span class="sc">\</span></span>
<span id="cb145-11"><a href="build-yourself-safety-net.html#cb145-11" tabindex="-1"></a><span class="st">    .rounded &gt; details:nth-child(3) &gt; summary&#39;</span>)</span>
<span id="cb145-12"><a href="build-yourself-safety-net.html#cb145-12" tabindex="-1"></a>    <span class="co">// Now it&#39;s ready, we can click on it</span></span>
<span id="cb145-13"><a href="build-yourself-safety-net.html#cb145-13" tabindex="-1"></a>    <span class="cf">await</span> page<span class="op">.</span><span class="fu">click</span>(<span class="st">&#39;.row &gt; .col &gt; .rounded &gt; </span><span class="sc">\</span></span>
<span id="cb145-14"><a href="build-yourself-safety-net.html#cb145-14" tabindex="-1"></a><span class="st">    details:nth-child(3) &gt; summary&#39;</span>)</span>
<span id="cb145-15"><a href="build-yourself-safety-net.html#cb145-15" tabindex="-1"></a></span>
<span id="cb145-16"><a href="build-yourself-safety-net.html#cb145-16" tabindex="-1"></a>    <span class="co">// Now our test is over, we can close the connection</span></span>
<span id="cb145-17"><a href="build-yourself-safety-net.html#cb145-17" tabindex="-1"></a>    <span class="cf">await</span> browser<span class="op">.</span><span class="fu">close</span>()</span>
<span id="cb145-18"><a href="build-yourself-safety-net.html#cb145-18" tabindex="-1"></a>})()</span></code></pre></div>
<p>Be aware, though, that this extension does not record everything, at least with the version used while writing this book (<code>0.7.1</code>).
For example, typing inside a text input is not recorded: that is completely doable inside <code>puppeteer</code>, yet not recorded by this extension.<a href="#fn47" class="footnote-ref" id="fnref47"><sup>47</sup></a></p>
<p>Once you have this piece of code, put it into a NodeJS script, and replay the session as many time as you need.
If ever one of the steps cannot be replayed as recorded, the script will fail, notifying you of a regression.</p>
<p>Several packages in R mimic what <code>puppeteer</code> does (Google Chrome headless orchestration), with notably <code>{crrri}</code> <span class="citation">(<a href="#ref-R-crrri">Lesur and Dervieux 2024</a>)</span> and <code>{chromote}</code> <span class="citation">(<a href="#ref-R-chromote">Chang and Schloerke 2024</a>)</span>.
These packages can be used to launch and manipulate a Google Chrome headless session, meaning that you can programmatically navigate and interact with a web page from R.
And to do the tests in a <code>puppeteer</code> spirit, you can refer to the <code>{crrry}</code> package <span class="citation">(<a href="#ref-R-crrry">Fay 2024a</a>)</span>, which contains a series of wrapper functions around <code>{crrri}</code>, specifically designed for <code>{shiny}</code>.</p>
<p>Here is an example:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="build-yourself-safety-net.html#cb146-1" tabindex="-1"></a><span class="co"># Creating a new test instance</span></span>
<span id="cb146-2"><a href="build-yourself-safety-net.html#cb146-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> crrry<span class="sc">::</span>CrrryOnPage<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb146-3"><a href="build-yourself-safety-net.html#cb146-3" tabindex="-1"></a>  <span class="co"># Using the `find_chrome()` function to guess where the</span></span>
<span id="cb146-4"><a href="build-yourself-safety-net.html#cb146-4" tabindex="-1"></a>  <span class="co"># Chrome bin is on our machine</span></span>
<span id="cb146-5"><a href="build-yourself-safety-net.html#cb146-5" tabindex="-1"></a>  <span class="at">chrome_bin =</span> pagedown<span class="sc">::</span><span class="fu">find_chrome</span>(),</span>
<span id="cb146-6"><a href="build-yourself-safety-net.html#cb146-6" tabindex="-1"></a>  <span class="co"># Launching Chrome on a random available port on our machine</span></span>
<span id="cb146-7"><a href="build-yourself-safety-net.html#cb146-7" tabindex="-1"></a>  <span class="co"># Note that you will need httpuv &gt;= 1.5.2 if you want to use</span></span>
<span id="cb146-8"><a href="build-yourself-safety-net.html#cb146-8" tabindex="-1"></a>  <span class="co"># this function</span></span>
<span id="cb146-9"><a href="build-yourself-safety-net.html#cb146-9" tabindex="-1"></a>  <span class="at">chrome_port =</span> httpuv<span class="sc">::</span><span class="fu">randomPort</span>(),</span>
<span id="cb146-10"><a href="build-yourself-safety-net.html#cb146-10" tabindex="-1"></a>  <span class="co"># Specifying the page we want to connect to</span></span>
<span id="cb146-11"><a href="build-yourself-safety-net.html#cb146-11" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">&quot;https://connect.thinkr.fr/hexmake/&quot;</span>,</span>
<span id="cb146-12"><a href="build-yourself-safety-net.html#cb146-12" tabindex="-1"></a>  <span class="co"># Do everything on the terminal, with no window open</span></span>
<span id="cb146-13"><a href="build-yourself-safety-net.html#cb146-13" tabindex="-1"></a>  <span class="at">headless =</span> <span class="cn">TRUE</span></span>
<span id="cb146-14"><a href="build-yourself-safety-net.html#cb146-14" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Running \
  &#39;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&#39;
  --no-first-run --headless
  &#39;--user-data-dir=/Users/colin/Library/Application Support/
    r-crrri/chrome-data-dir-dhutmfux&#39;
  &#39;--remote-debugging-port=40698&#39;</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="build-yourself-safety-net.html#cb148-1" tabindex="-1"></a><span class="co"># We&#39;ll wait for the application to be ready to accept inputs</span></span>
<span id="cb148-2"><a href="build-yourself-safety-net.html#cb148-2" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">wait_for_shiny_ready</span>()</span></code></pre></div>
<pre><code>Shiny is computing
✓ Shiny is still running</code></pre>
<p>You can then call one of the <code>test</code> object methods:</p>
<ul>
<li><code>call_js()</code>, that allows you to run JavaScript code</li>
<li><code>shiny_set_input()</code> changes the value of a <code>{shiny}</code> Input</li>
<li><code>wait_for()</code> waits for a JavaScript condition to be TRUE</li>
<li><code>click_on_id</code> clicks on a given id</li>
</ul>
<p>Of course, the interesting part is doing “bulk testing” of your application, for example, by setting a series of values to an input:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="build-yourself-safety-net.html#cb150-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]){</span>
<span id="cb150-2"><a href="build-yourself-safety-net.html#cb150-2" tabindex="-1"></a>  <span class="co"># We&#39;ll be setting a series of letters, one by one</span></span>
<span id="cb150-3"><a href="build-yourself-safety-net.html#cb150-3" tabindex="-1"></a>  <span class="co"># for the package name input</span></span>
<span id="cb150-4"><a href="build-yourself-safety-net.html#cb150-4" tabindex="-1"></a>  test<span class="sc">$</span><span class="fu">shiny_set_input</span>(</span>
<span id="cb150-5"><a href="build-yourself-safety-net.html#cb150-5" tabindex="-1"></a>    <span class="st">&quot;main_ui_1-left_ui_1-pkg_name_ui_1-package&quot;</span>,</span>
<span id="cb150-6"><a href="build-yourself-safety-net.html#cb150-6" tabindex="-1"></a>    i</span>
<span id="cb150-7"><a href="build-yourself-safety-net.html#cb150-7" tabindex="-1"></a>  )</span>
<span id="cb150-8"><a href="build-yourself-safety-net.html#cb150-8" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package--
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running</code></pre>
<p>And once your test is done, do not forget to close the connection!</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="build-yourself-safety-net.html#cb152-1" tabindex="-1"></a><span class="co"># Closing the connection</span></span>
<span id="cb152-2"><a href="build-yourself-safety-net.html#cb152-2" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">stop</span>()</span></code></pre></div>
</div>
<div id="b.-monkey-test" class="section level4 unnumbered hasAnchor">
<h4>B. Monkey test<a href="build-yourself-safety-net.html#b.-monkey-test" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you are working on a user-facing software (i.e. a software used by external users), there is one rule to live by: every unexpected behavior that can happen, will happen.
In other words, if you develop and think “a user will never do that”, just expect a user to eventually do “that”.</p>
<p>But how can we get prepared for the unexpected?
How can we test the “crazy behavior” that user will adopt?
In web development, there exists a methodology called “Monkey testing”, which consists of <strong>launching a series of random event on a web page: random text in input, scrolling, clicking, zooming… and see if the application crashes or not</strong>.
This software testing method allows you to test the robustness of the application, by seeing how well it can handle unexpected behaviors.</p>
<p>Several JavaScript libraries exist when it comes to monkey testing, one of the most popular (and easy to use) libraries is called <a href="https://github.com/marmelab/gremlins.js"><code>gremlin.js</code></a>.
This library is particularly interesting when it comes to <code>{shiny}</code> as it does not need external installation: you can add the library as a bookmark on your browser, navigate to the application, and launch the testing (click on the “Generate Bookmarklet” link on the <a href="(https://github.com/marmelab/gremlins.js)">top of the README</a>).
Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-7">11.1</a> show an example of running gremlins on the prenoms application.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-7"></span>
<img src="img/gremlins.png" alt="Example of using gremlins.js on the “prenoms” {shiny} application." width="100%" />
<p class="caption">
FIGURE 11.1: Example of using <code>gremlins.js</code> on the “prenoms” <code>{shiny}</code> application.
</p>
</div>
<p>And if you want to scale this, you can also combine it with <code>{shinyloadtest}</code> <span class="citation">(<a href="#ref-R-shinyloadtest">Schloerke, Dipert, and Borges 2021</a>)</span>: launch a session recording, run <code>gremlins</code> one or several time inside the recording, then replay it with multiple sessions.</p>
<p>With <code>{crrry}</code>, this <code>gremlins</code> test comes for free:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="build-yourself-safety-net.html#cb153-1" tabindex="-1"></a><span class="co"># Creating a new test instance</span></span>
<span id="cb153-2"><a href="build-yourself-safety-net.html#cb153-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> crrry<span class="sc">::</span>CrrryOnPage<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb153-3"><a href="build-yourself-safety-net.html#cb153-3" tabindex="-1"></a>  <span class="co"># Using the `find_chrome()` function to guess where the</span></span>
<span id="cb153-4"><a href="build-yourself-safety-net.html#cb153-4" tabindex="-1"></a>  <span class="co"># Chrome bin is on our machine</span></span>
<span id="cb153-5"><a href="build-yourself-safety-net.html#cb153-5" tabindex="-1"></a>  <span class="at">chrome_bin =</span> pagedown<span class="sc">::</span><span class="fu">find_chrome</span>(),</span>
<span id="cb153-6"><a href="build-yourself-safety-net.html#cb153-6" tabindex="-1"></a>  <span class="co"># Launching Chrome on a random available port on our machine</span></span>
<span id="cb153-7"><a href="build-yourself-safety-net.html#cb153-7" tabindex="-1"></a>  <span class="co"># Note that you will need httpuv &gt;= 1.5.2 if you want to use</span></span>
<span id="cb153-8"><a href="build-yourself-safety-net.html#cb153-8" tabindex="-1"></a>  <span class="co"># this function</span></span>
<span id="cb153-9"><a href="build-yourself-safety-net.html#cb153-9" tabindex="-1"></a>  <span class="at">chrome_port =</span> httpuv<span class="sc">::</span><span class="fu">randomPort</span>(),</span>
<span id="cb153-10"><a href="build-yourself-safety-net.html#cb153-10" tabindex="-1"></a>  <span class="co"># Specifying the page we want to connect to</span></span>
<span id="cb153-11"><a href="build-yourself-safety-net.html#cb153-11" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">&quot;https://connect.thinkr.fr/hexmake/&quot;</span>,</span>
<span id="cb153-12"><a href="build-yourself-safety-net.html#cb153-12" tabindex="-1"></a>  <span class="co"># Do everything on the terminal, with no window open</span></span>
<span id="cb153-13"><a href="build-yourself-safety-net.html#cb153-13" tabindex="-1"></a>  <span class="at">headless =</span> <span class="cn">TRUE</span></span>
<span id="cb153-14"><a href="build-yourself-safety-net.html#cb153-14" tabindex="-1"></a>)</span>
<span id="cb153-15"><a href="build-yourself-safety-net.html#cb153-15" tabindex="-1"></a><span class="co"># We&#39;ll wait for the application to be ready to accept inputs</span></span>
<span id="cb153-16"><a href="build-yourself-safety-net.html#cb153-16" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">wait_for_shiny_ready</span>()</span>
<span id="cb153-17"><a href="build-yourself-safety-net.html#cb153-17" tabindex="-1"></a><span class="co"># We launch the horde of gremlins</span></span>
<span id="cb153-18"><a href="build-yourself-safety-net.html#cb153-18" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">gremlins_horde</span>()</span>
<span id="cb153-19"><a href="build-yourself-safety-net.html#cb153-19" tabindex="-1"></a><span class="co"># Sleep, let the gremlins do their job</span></span>
<span id="cb153-20"><a href="build-yourself-safety-net.html#cb153-20" tabindex="-1"></a><span class="fu">Sys.sleep</span>(<span class="dv">10</span>)</span>
<span id="cb153-21"><a href="build-yourself-safety-net.html#cb153-21" tabindex="-1"></a><span class="co"># Check that the app is still working</span></span>
<span id="cb153-22"><a href="build-yourself-safety-net.html#cb153-22" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">wait_for_shiny_ready</span>()</span>
<span id="cb153-23"><a href="build-yourself-safety-net.html#cb153-23" tabindex="-1"></a><span class="co"># Stop the connection</span></span>
<span id="cb153-24"><a href="build-yourself-safety-net.html#cb153-24" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">stop</span>()</span></code></pre></div>
</div>
<div id="c.-shinytest" class="section level4 unnumbered hasAnchor">
<h4>C. <code>{shinytest}</code><a href="build-yourself-safety-net.html#c.-shinytest" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Finally, if you prefer a <code>{shiny}</code> specific package, you can go for <code>{shinytest}</code> <span class="citation">(<a href="#ref-R-shinytest">Chang, Csárdi, and Wickham 2024</a>)</span>.
This package, created and maintained by RStudio, <strong>allows you to do a series of screenshots of your application, and then replays your app and compares the previously taken screenshots to the current state of your application</strong>, allowing you to detect any changes in the interface.</p>
<p>If you are building your application with <code>{golem}</code> <span class="citation">(<a href="#ref-R-golem">Fay et al. 2024</a>)</span>, you will need to add an <code>app.R</code> file at the root of your package, then run <code>shinytest::recordTest()</code>:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="build-yourself-safety-net.html#cb154-1" tabindex="-1"></a><span class="co"># Create an app.R file at the root of the package</span></span>
<span id="cb154-2"><a href="build-yourself-safety-net.html#cb154-2" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">add_rstudioconnect_file</span>()</span>
<span id="cb154-3"><a href="build-yourself-safety-net.html#cb154-3" tabindex="-1"></a><span class="co"># Launch a test, and record a series of</span></span>
<span id="cb154-4"><a href="build-yourself-safety-net.html#cb154-4" tabindex="-1"></a><span class="co"># snapshots of your application</span></span>
<span id="cb154-5"><a href="build-yourself-safety-net.html#cb154-5" tabindex="-1"></a>shinytest<span class="sc">::</span><span class="fu">recordTest</span>()</span></code></pre></div>
<p>Once this function is run, a new window opens: it contains your app, and a “Screenshot” button on the right.
Using this button, you can take various recordings of your shiny application at different states, as shown in Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-10">11.2</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-10"></span>
<img src="img/shinytest.png" alt="General view of a {shinytest} window." width="100%" />
<p class="caption">
FIGURE 11.2: General view of a <code>{shinytest}</code> window.
</p>
</div>
<p>Then, you can do some changes in your app, and run:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="build-yourself-safety-net.html#cb155-1" tabindex="-1"></a>shinytest<span class="sc">::</span><span class="fu">testApp</span>()</span></code></pre></div>
<p>If the <code>{shinytest}</code> package detects a visual change in the application, you will be immediately alerted, with a report of the difference from the snapshots you took and the current state of the application.</p>
</div>
</div>
<div id="testing-the-app-load" class="section level3 hasAnchor" number="11.1.4">
<h3><span class="header-section-number">11.1.4</span> Testing the app load<a href="build-yourself-safety-net.html#testing-the-app-load" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="a.-shinyloadtest" class="section level4 unnumbered hasAnchor">
<h4>A. <code>{shinyloadtest}</code><a href="build-yourself-safety-net.html#a.-shinyloadtest" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>{shinyloadtest}</code> <span class="citation">(<a href="#ref-R-shinyloadtest">Schloerke, Dipert, and Borges 2021</a>)</span> <strong>tests how an application behaves when one, two, three, twenty, one hundred users connect to the app and use it</strong>, and gives you a visual report about the connection and response time of each session.
The idea with <code>{shinyloadtest}</code> is to first record a session where you mimic a user behavior, then <code>shinycannon</code>, a command line tool that comes with <code>{shinyloadtest}</code>, replays the recording several times.
Once the session has been replayed several times mimicking the session you have recorded, you have access to a report of the behavior of your app.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="build-yourself-safety-net.html#cb156-1" tabindex="-1"></a><span class="fu">library</span>(shinyloadtest)</span></code></pre></div>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="build-yourself-safety-net.html#cb157-1" tabindex="-1"></a><span class="co"># Starting your app in another process</span></span>
<span id="cb157-2"><a href="build-yourself-safety-net.html#cb157-2" tabindex="-1"></a>p <span class="ot">&lt;-</span> processx<span class="sc">::</span>process<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb157-3"><a href="build-yourself-safety-net.html#cb157-3" tabindex="-1"></a>  <span class="st">&quot;Rscript&quot;</span>,</span>
<span id="cb157-4"><a href="build-yourself-safety-net.html#cb157-4" tabindex="-1"></a>  <span class="fu">c</span>( <span class="st">&quot;-e&quot;</span>,  <span class="st">&quot;options(&#39;shiny.port&#39;= 2811);hexmake::run_app()&quot;</span> )</span>
<span id="cb157-5"><a href="build-yourself-safety-net.html#cb157-5" tabindex="-1"></a>)</span>
<span id="cb157-6"><a href="build-yourself-safety-net.html#cb157-6" tabindex="-1"></a><span class="co"># We wait for the app to be ready</span></span>
<span id="cb157-7"><a href="build-yourself-safety-net.html#cb157-7" tabindex="-1"></a><span class="fu">Sys.sleep</span>(<span class="dv">5</span>)</span>
<span id="cb157-8"><a href="build-yourself-safety-net.html#cb157-8" tabindex="-1"></a><span class="co"># Check that the process is alive</span></span>
<span id="cb157-9"><a href="build-yourself-safety-net.html#cb157-9" tabindex="-1"></a>p<span class="sc">$</span><span class="fu">is_alive</span>()</span>
<span id="cb157-10"><a href="build-yourself-safety-net.html#cb157-10" tabindex="-1"></a><span class="co"># Open the app in our browser just to be sure</span></span>
<span id="cb157-11"><a href="build-yourself-safety-net.html#cb157-11" tabindex="-1"></a><span class="fu">browseURL</span>(<span class="st">&quot;http:://localhost:2811&quot;</span>)</span></code></pre></div>
<p>Record the tests, potentially in a new dir:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="build-yourself-safety-net.html#cb158-1" tabindex="-1"></a><span class="co"># Creating a directory to receive the logs</span></span>
<span id="cb158-2"><a href="build-yourself-safety-net.html#cb158-2" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_create</span>(<span class="st">&quot;shinylogs&quot;</span>)</span>
<span id="cb158-3"><a href="build-yourself-safety-net.html#cb158-3" tabindex="-1"></a><span class="co"># Performing the session recording inside this new folder</span></span>
<span id="cb158-4"><a href="build-yourself-safety-net.html#cb158-4" tabindex="-1"></a>withr<span class="sc">::</span><span class="fu">with_dir</span>(</span>
<span id="cb158-5"><a href="build-yourself-safety-net.html#cb158-5" tabindex="-1"></a>  <span class="st">&quot;shinylogs&quot;</span>, {</span>
<span id="cb158-6"><a href="build-yourself-safety-net.html#cb158-6" tabindex="-1"></a>    <span class="co"># Launch the recording of an app session, using port 1234</span></span>
<span id="cb158-7"><a href="build-yourself-safety-net.html#cb158-7" tabindex="-1"></a>    shinyloadtest<span class="sc">::</span><span class="fu">record_session</span>(</span>
<span id="cb158-8"><a href="build-yourself-safety-net.html#cb158-8" tabindex="-1"></a>      <span class="st">&quot;http://localhost:2811&quot;</span>,</span>
<span id="cb158-9"><a href="build-yourself-safety-net.html#cb158-9" tabindex="-1"></a>      <span class="at">port =</span> <span class="dv">1234</span></span>
<span id="cb158-10"><a href="build-yourself-safety-net.html#cb158-10" tabindex="-1"></a>    )</span>
<span id="cb158-11"><a href="build-yourself-safety-net.html#cb158-11" tabindex="-1"></a>  }</span>
<span id="cb158-12"><a href="build-yourself-safety-net.html#cb158-12" tabindex="-1"></a>)</span></code></pre></div>
<p>We now have a series of one or more recording/s inside the <code>shinylogs/</code> folder:</p>
<p>Then, let’s switch to our command line, and rerun the session with <code>shinycannon</code>.
The <code>shinycannon</code> command line tools take several arguments: the path the <code>.log</code> file, the URL of the app, <code>--workers</code> specify the number of concurrent connections to run, and the <code>--output-dir</code> argument specifies where the report should be written.</p>
<p>Then, go to your terminal and run:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb159-1"><a href="build-yourself-safety-net.html#cb159-1" tabindex="-1"></a><span class="ex">shinycannon</span> shinylogs/recording.log <span class="dt">\</span></span>
<span id="cb159-2"><a href="build-yourself-safety-net.html#cb159-2" tabindex="-1"></a>  http://localhost:2811 <span class="at">--workers</span> 10 <span class="dt">\</span></span>
<span id="cb159-3"><a href="build-yourself-safety-net.html#cb159-3" tabindex="-1"></a>  <span class="at">--output-dir</span> shinylogs/run1</span></code></pre></div>
<p>And now, we have new files inside the folder, corresponding to the session recordings.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="build-yourself-safety-net.html#cb160-1" tabindex="-1"></a><span class="co"># printing the structure of shinylogs</span></span>
<span id="cb160-2"><a href="build-yourself-safety-net.html#cb160-2" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">&quot;shinylogs&quot;</span>, <span class="at">recurse =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>shinylogs
├── recording.log
├── run1
├── run2
└── run3</code></pre>
<p>Good news: we do not have to manually analyze these files—<code>{shinyloadtest}</code> offers a series of wrapper functions to do that.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="build-yourself-safety-net.html#cb162-1" tabindex="-1"></a><span class="co"># Bringing the runs in the R session</span></span>
<span id="cb162-2"><a href="build-yourself-safety-net.html#cb162-2" tabindex="-1"></a>shinyload_runs <span class="ot">&lt;-</span> shinyloadtest<span class="sc">::</span><span class="fu">load_runs</span>(</span>
<span id="cb162-3"><a href="build-yourself-safety-net.html#cb162-3" tabindex="-1"></a>  <span class="st">&quot;5 workers&quot;</span> <span class="ot">=</span> <span class="st">&quot;shinylogs/run1&quot;</span></span>
<span id="cb162-4"><a href="build-yourself-safety-net.html#cb162-4" tabindex="-1"></a>)</span></code></pre></div>
<p>We now have a data.frame that looks like this:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="build-yourself-safety-net.html#cb163-1" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(<span class="fu">head</span>(shinyload_runs))</span></code></pre></div>
<pre><code>Rows: 6
Columns: 13
$ run               &lt;ord&gt; 5 workers, 5 workers, 5 wor…
$ user_id           &lt;int&gt; 0, 0, 0, 0, 0, 0
$ session_id        &lt;int&gt; 0, 0, 0, 0, 0, 0
$ iteration         &lt;int&gt; 0, 0, 0, 0, 0, 0
$ input_line_number &lt;int&gt; 4, 5, 6, 7, 8, 9
$ event             &lt;chr&gt; &quot;REQ_HOME&quot;, &quot;WS_OPEN&quot;, &quot;WS_…
$ start             &lt;dbl&gt; 0.000, 0.462, 0.539, 1.024,…
$ end               &lt;dbl&gt; 0.461, 0.539, 0.542, 1.024,…
$ time              &lt;dbl&gt; 0.461, 0.077, 0.003, 0.000,…
$ concurrency       &lt;dbl&gt; 0, 1, 1, 1, 1, 1
$ maintenance       &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRU…
$ label             &lt;ord&gt; &quot;Event 1) Get: Homepage&quot;, &quot;…
$ json              &lt;list&gt; [&quot;REQ_HOME&quot;, 2020-04-10 12:…</code></pre>
<p>Then, <code>{shinyloadtest}</code> comes with a series of plotting functions that can be used to analyze your recording.
For example:</p>
<ul>
<li><code>slt_session_duration()</code> plots the session duration, with the various types of events that take computation time: JS and CSS load, R computation, etc.
The output is available in Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-21">11.3</a>.</li>
</ul>

<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="build-yourself-safety-net.html#cb165-1" tabindex="-1"></a><span class="fu">slt_session_duration</span>(shinyload_runs)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-21"></span>
<img src="engineering-production-grade-shiny-apps_files/figure-html/11-step-by-step-secure-21-1.png" alt="Session duration." width="100%" />
<p class="caption">
FIGURE 11.3: Session duration.
</p>
</div>
<!-- + `slt_waterfall()` plots the waterfall graph of session durations, ordered by events.  -->
<!-- (ref:waterfall) Waterfall graph of session durations -->
<!-- ```{r 12-step-by-step-secure-20, fig.cap="(ref:waterfall)", out.width="100%", out.height="100%"} -->
<!-- slt_waterfall(shinyload_runs) -->
<!-- ``` -->
<p>And if you need to bundle everything into an HTML reports, <code>shinyloadtest_report()</code> is what you are looking for.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="build-yourself-safety-net.html#cb166-1" tabindex="-1"></a><span class="co"># Generating the report</span></span>
<span id="cb166-2"><a href="build-yourself-safety-net.html#cb166-2" tabindex="-1"></a><span class="fu">shinyloadtest_report</span>(shinyload_runs)</span></code></pre></div>
<p>This function will generate an HTML report of all the things computed by <code>{shinyloadtest}</code>, as shown in Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-23">11.4</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-23"></span>
<img src="img/shinyloadtestreport.png" alt="Webpage generated by shinyloadtest_report()." width="100%" />
<p class="caption">
FIGURE 11.4: Webpage generated by <code>shinyloadtest_report()</code>.
</p>
</div>
<p>To sum up with a step-by-step guide:</p>
<ul>
<li><p>If the shiny app is only available locally, on your machine, then launch a process with <code>{processx}</code> <span class="citation">(<a href="#ref-R-processx">Csárdi and Chang 2024</a>)</span>, or in another R session, that launches the application.
You can either set the port with <code>options('shiny.port'= 2811)</code>, or let shiny decide for you.
Be sure that the process is running.
If the app is online, use the online URL (and make sure you have access to the app).</p></li>
<li><p>Run <code>shinyloadtest::record_session(url)</code>.
You should probably set a different port for <code>{shinyloadtest}</code>, so that it does not try to connect on port 80.</p></li>
<li><p>Play around with your app; record a scenario of usage.</p></li>
<li><p>Close the tab where the app is running.</p></li>
<li><p>Return to your terminal, and run the <code>shinycannon</code> command line tool.</p></li>
<li><p>Wait for the process to be finished.</p></li>
<li><p>Go back to R, and then you can analyze the data from the recordings, either manually or by generating the HTML report.</p></li>
</ul>
</div>
<div id="b.-shinyloadtest-crrry-and-dockerstats" class="section level4 unnumbered hasAnchor">
<h4>B. <code>{shinyloadtest}</code>, <code>{crrry}</code>, and <code>{dockerstats}</code><a href="build-yourself-safety-net.html#b.-shinyloadtest-crrry-and-dockerstats" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Another thing you might want to monitor is the memory/CPU usage of your application, which <code>{shinyloadtest}</code> does not natively provide: the package records the load from the browser point of view, not from the server one.
That’s where <code>{dockerstats}</code> <span class="citation">(<a href="#ref-R-dockerstats">Fay 2024b</a>)</span> can come into play: this package is a wrapper around the command line <code>docker stats</code>, and returns an R data.frame with the stats.</p>
<p>You can get the <code>{dockerstats}</code> package from GitHub with:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="build-yourself-safety-net.html#cb167-1" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;ColinFay/dockerstats&quot;</span>)</span></code></pre></div>
<p>Or from NPM via:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb168-1"><a href="build-yourself-safety-net.html#cb168-1" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-g</span> r-dockerstats</span></code></pre></div>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="build-yourself-safety-net.html#cb169-1" tabindex="-1"></a><span class="fu">library</span>(dockerstats)</span></code></pre></div>
<p>With these stats, we can monitor the load on the app when it is run in a Docker container.</p>
<p>We will start by launching the container using a <code>system()</code> call: here, we are running the <code>{hexmake}</code> application, bundled in the <code>colinfay/hexmake</code> Docker image, on port 2811.
We also make sure we give it a name with <code>--name</code>, so that we can call it in our <code>dockerstats()</code> call later on.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="build-yourself-safety-net.html#cb170-1" tabindex="-1"></a><span class="co"># We are launching the docker container</span></span>
<span id="cb170-2"><a href="build-yourself-safety-net.html#cb170-2" tabindex="-1"></a><span class="co"># using R system() command. Here, we are</span></span>
<span id="cb170-3"><a href="build-yourself-safety-net.html#cb170-3" tabindex="-1"></a><span class="co"># running the container image called</span></span>
<span id="cb170-4"><a href="build-yourself-safety-net.html#cb170-4" tabindex="-1"></a><span class="co"># colinfay/hexmake. We are naming the</span></span>
<span id="cb170-5"><a href="build-yourself-safety-net.html#cb170-5" tabindex="-1"></a><span class="co"># container hexmake using the --name flag,</span></span>
<span id="cb170-6"><a href="build-yourself-safety-net.html#cb170-6" tabindex="-1"></a><span class="co"># --rm means the container will be removed</span></span>
<span id="cb170-7"><a href="build-yourself-safety-net.html#cb170-7" tabindex="-1"></a><span class="co"># when stopped, and finally the -p flag defines</span></span>
<span id="cb170-8"><a href="build-yourself-safety-net.html#cb170-8" tabindex="-1"></a><span class="co"># how to bind the ports of the container</span></span>
<span id="cb170-9"><a href="build-yourself-safety-net.html#cb170-9" tabindex="-1"></a><span class="co"># with the ports of the host (left is the host,</span></span>
<span id="cb170-10"><a href="build-yourself-safety-net.html#cb170-10" tabindex="-1"></a><span class="co">#  right is the container): in other word, here,</span></span>
<span id="cb170-11"><a href="build-yourself-safety-net.html#cb170-11" tabindex="-1"></a><span class="co">#  we bind port 80 of our container to the port 2811</span></span>
<span id="cb170-12"><a href="build-yourself-safety-net.html#cb170-12" tabindex="-1"></a><span class="co"># of our machine.</span></span>
<span id="cb170-13"><a href="build-yourself-safety-net.html#cb170-13" tabindex="-1"></a><span class="fu">system</span>(</span>
<span id="cb170-14"><a href="build-yourself-safety-net.html#cb170-14" tabindex="-1"></a>  <span class="st">&quot;docker run --name hexmake --rm -p 2811:80 colinfay/hexmake&quot;</span>,</span>
<span id="cb170-15"><a href="build-yourself-safety-net.html#cb170-15" tabindex="-1"></a>  <span class="at">wait =</span> <span class="cn">FALSE</span></span>
<span id="cb170-16"><a href="build-yourself-safety-net.html#cb170-16" tabindex="-1"></a>)</span></code></pre></div>
<p>Let’s say now we want the stats for the hexmake container:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="build-yourself-safety-net.html#cb171-1" tabindex="-1"></a><span class="co"># Waiting for the container to be ready</span></span>
<span id="cb171-2"><a href="build-yourself-safety-net.html#cb171-2" tabindex="-1"></a><span class="fu">Sys.sleep</span>(<span class="dv">30</span>)</span>
<span id="cb171-3"><a href="build-yourself-safety-net.html#cb171-3" tabindex="-1"></a><span class="co"># Showing the docker stats for hexmake</span></span>
<span id="cb171-4"><a href="build-yourself-safety-net.html#cb171-4" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>(</span>
<span id="cb171-5"><a href="build-yourself-safety-net.html#cb171-5" tabindex="-1"></a>  <span class="fu">dockerstats</span>(<span class="st">&quot;hexmake&quot;</span>)</span>
<span id="cb171-6"><a href="build-yourself-safety-net.html#cb171-6" tabindex="-1"></a>)</span></code></pre></div>
<pre><code># A tibble: 1 × 14
  Container Name    ID        CPUPerc MemUsage MemLimit
  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
1 hexmake   hexmake 34cc1544…    0.37 108.5MiB 5.807GiB
# ℹ 8 more variables: MemPerc &lt;dbl&gt;, NetI &lt;chr&gt;,
#   NetO &lt;chr&gt;, BlockI &lt;chr&gt;, BlockO &lt;chr&gt;,
#   PIDs &lt;int&gt;, record_time &lt;chr&gt;, extra &lt;chr&gt;</code></pre>
<p>Of course, right now nobody is using the app, so the usage can be pretty small.
But let’s push it a little bit by mimicking a lot of connections.</p>
<p>To do that, we can replay our <code>shinycannon</code> call, and at the same time use the <code>dockerstats_recurse()</code> function, which will recursively call <code>dockerstats()</code> on a regular interval.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb173-1"><a href="build-yourself-safety-net.html#cb173-1" tabindex="-1"></a><span class="co"># Replaying the recording</span></span>
<span id="cb173-2"><a href="build-yourself-safety-net.html#cb173-2" tabindex="-1"></a><span class="ex">shinycannon</span> shinylogs/recording.log <span class="dt">\</span></span>
<span id="cb173-3"><a href="build-yourself-safety-net.html#cb173-3" tabindex="-1"></a># Specificying the host url and the number of <span class="st">&quot;visitors&quot;</span></span>
<span id="cb173-4"><a href="build-yourself-safety-net.html#cb173-4" tabindex="-1"></a>  <span class="ex">http://localhost:2811</span> <span class="at">--workers</span> 10 <span class="dt">\</span></span>
<span id="cb173-5"><a href="build-yourself-safety-net.html#cb173-5" tabindex="-1"></a># Define where the recording will be outputed</span>
<span id="cb173-6"><a href="build-yourself-safety-net.html#cb173-6" tabindex="-1"></a>  <span class="ex">--output-dir</span> shinylogs/run3</span></code></pre></div>
<p>Let’s launch at the same time a <code>dockerstats_recurse()</code>.
For example, here, we will print, on each loop, the <code>MemUsage</code> of the container, then save the data inside a <code>dockerstats.csv</code> file.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="build-yourself-safety-net.html#cb174-1" tabindex="-1"></a><span class="co"># Calling recursive the dockerstats function.</span></span>
<span id="cb174-2"><a href="build-yourself-safety-net.html#cb174-2" tabindex="-1"></a><span class="co"># The callback function takes a function, and define</span></span>
<span id="cb174-3"><a href="build-yourself-safety-net.html#cb174-3" tabindex="-1"></a><span class="co"># what to do with the data.frame each time the</span></span>
<span id="cb174-4"><a href="build-yourself-safety-net.html#cb174-4" tabindex="-1"></a><span class="co"># dockerstats results are computed.</span></span>
<span id="cb174-5"><a href="build-yourself-safety-net.html#cb174-5" tabindex="-1"></a><span class="fu">dockerstats_recurse</span>(</span>
<span id="cb174-6"><a href="build-yourself-safety-net.html#cb174-6" tabindex="-1"></a>  <span class="st">&quot;hexmake&quot;</span>,</span>
<span id="cb174-7"><a href="build-yourself-safety-net.html#cb174-7" tabindex="-1"></a>  <span class="co"># append_csv is a {dockerstats} function that will</span></span>
<span id="cb174-8"><a href="build-yourself-safety-net.html#cb174-8" tabindex="-1"></a>  <span class="co"># apped the output to a given csv</span></span>
<span id="cb174-9"><a href="build-yourself-safety-net.html#cb174-9" tabindex="-1"></a>  <span class="at">callback =</span> <span class="fu">append_csv</span>(</span>
<span id="cb174-10"><a href="build-yourself-safety-net.html#cb174-10" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">&quot;shinylogs/dockerstats.csv&quot;</span>,</span>
<span id="cb174-11"><a href="build-yourself-safety-net.html#cb174-11" tabindex="-1"></a>    <span class="at">print =</span> <span class="cn">TRUE</span></span>
<span id="cb174-12"><a href="build-yourself-safety-net.html#cb174-12" tabindex="-1"></a>  )</span>
<span id="cb174-13"><a href="build-yourself-safety-net.html#cb174-13" tabindex="-1"></a>)</span></code></pre></div>
<p>Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-31">11.5</a> shows these processes side to side.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-31"></span>
<img src="img/hexmake-dockerstats.png" alt="{dockerstats} and shinycannon running side-by-side at the same time." width="100%" />
<p class="caption">
FIGURE 11.5: <code>{dockerstats}</code> and <code>shinycannon</code> running side-by-side at the same time.
</p>
</div>
<p>As you can see, as the number of connections grow, the memory usage grows.
And we now have a csv with the evolution of the <code>docker stats</code> records over time!</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="build-yourself-safety-net.html#cb175-1" tabindex="-1"></a><span class="co"># read_appended_csv() allows to read a csv that has been</span></span>
<span id="cb175-2"><a href="build-yourself-safety-net.html#cb175-2" tabindex="-1"></a><span class="co"># constructed with the append_csv() function</span></span>
<span id="cb175-3"><a href="build-yourself-safety-net.html#cb175-3" tabindex="-1"></a>docker_stats <span class="ot">&lt;-</span> <span class="fu">read_appended_csv</span>(</span>
<span id="cb175-4"><a href="build-yourself-safety-net.html#cb175-4" tabindex="-1"></a>  <span class="st">&quot;shinylogs/dockerstats.csv&quot;</span></span>
<span id="cb175-5"><a href="build-yourself-safety-net.html#cb175-5" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="build-yourself-safety-net.html#cb176-1" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">glimpse</span>(<span class="fu">head</span>(docker_stats))</span></code></pre></div>
<pre><code>Rows: 6
Columns: 14
$ Container   &lt;chr&gt; &quot;hexmake&quot;, &quot;hexmake&quot;, &quot;hexmake&quot;, …
$ Name        &lt;chr&gt; &quot;hexmake&quot;, &quot;hexmake&quot;, &quot;hexmake&quot;, …
$ ID          &lt;chr&gt; &quot;b5d337941e310cbf4708b95a9cc75560…
$ CPUPerc     &lt;dbl&gt; 0.09, 15.07, 38.58, 54.94, 20.28,…
$ MemUsage    &lt;chr&gt; &quot;110.9MiB&quot;, &quot;117.2MiB&quot;, &quot;168.3MiB…
$ MemLimit    &lt;chr&gt; &quot;1.943GiB&quot;, &quot;1.943GiB&quot;, &quot;1.943GiB…
$ MemPerc     &lt;dbl&gt; 5.57, 5.89, 8.46, 8.73, 8.74, 8.89
$ NetI        &lt;chr&gt; &quot;586B&quot;, &quot;8.37kB&quot;, &quot;31.6kB&quot;, &quot;62.1…
$ NetO        &lt;chr&gt; &quot;0B&quot;, &quot;433kB&quot;, &quot;1.18MB&quot;, &quot;2.48MB&quot;…
$ BlockI      &lt;chr&gt; &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;
$ BlockO      &lt;chr&gt; &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;, &quot;0B&quot;
$ PIDs        &lt;int&gt; 3, 4, 4, 4, 4, 4
$ record_time &lt;dttm&gt; 2020-04-10 10:39:20, 2020-04-10 1…
$ extra       &lt;lgl&gt; NA, NA, NA, NA, NA, NA</code></pre>
<p>If you need a deeper look into the connection between application actions and the Docker stats, you can also combine <code>{dockerstats}</code> with <code>{crrry}</code>, the idea being that you can record the CPU usage at the exact moment the application performs a specific computation.</p>
<p>Let’s record the computation of the <code>hexmake</code> container containing the same app as before.</p>
<p>First, launch the container:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="build-yourself-safety-net.html#cb178-1" tabindex="-1"></a><span class="co"># Launching the container a second time,</span></span>
<span id="cb178-2"><a href="build-yourself-safety-net.html#cb178-2" tabindex="-1"></a><span class="co"># but name it xmk2 and serve it on port 2708</span></span>
<span id="cb178-3"><a href="build-yourself-safety-net.html#cb178-3" tabindex="-1"></a><span class="fu">system</span>(</span>
<span id="cb178-4"><a href="build-yourself-safety-net.html#cb178-4" tabindex="-1"></a>  <span class="st">&quot;docker run -p 2708:80 --rm --name xmk2 -d colinfay/hexmake&quot;</span>,</span>
<span id="cb178-5"><a href="build-yourself-safety-net.html#cb178-5" tabindex="-1"></a>  <span class="at">wait =</span> <span class="cn">FALSE</span></span>
<span id="cb178-6"><a href="build-yourself-safety-net.html#cb178-6" tabindex="-1"></a>)</span>
<span id="cb178-7"><a href="build-yourself-safety-net.html#cb178-7" tabindex="-1"></a><span class="fu">Sys.sleep</span>(<span class="dv">60</span>) <span class="co"># Let the container launch</span></span></code></pre></div>
<p>Then, a <code>{crrry}</code> job:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="build-yourself-safety-net.html#cb179-1" tabindex="-1"></a><span class="co"># See previous version of this code for a commented explanation</span></span>
<span id="cb179-2"><a href="build-yourself-safety-net.html#cb179-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> crrry<span class="sc">::</span>CrrryOnPage<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb179-3"><a href="build-yourself-safety-net.html#cb179-3" tabindex="-1"></a>  <span class="at">chrome_bin =</span> pagedown<span class="sc">::</span><span class="fu">find_chrome</span>(),</span>
<span id="cb179-4"><a href="build-yourself-safety-net.html#cb179-4" tabindex="-1"></a>  <span class="at">chrome_port =</span> httpuv<span class="sc">::</span><span class="fu">randomPort</span>(),</span>
<span id="cb179-5"><a href="build-yourself-safety-net.html#cb179-5" tabindex="-1"></a>  <span class="at">url =</span><span class="st">&quot;http://localhost:2708&quot;</span>,</span>
<span id="cb179-6"><a href="build-yourself-safety-net.html#cb179-6" tabindex="-1"></a>  <span class="at">headless =</span> <span class="cn">TRUE</span></span>
<span id="cb179-7"><a href="build-yourself-safety-net.html#cb179-7" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>Running &#39;/Applications/Google
  Chrome.app/Contents/MacOS/Google Chrome&#39;
  --no-first-run --headless \
  &#39;--user-data-dir=/Users/colin/Library/Application
  Support/r-crrri/chrome-data-dir-thyhpptv&#39; \
  &#39;--remote-debugging-port=48938&#39;</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="build-yourself-safety-net.html#cb181-1" tabindex="-1"></a>test<span class="sc">$</span><span class="fu">wait_for_shiny_ready</span>()</span></code></pre></div>
<pre><code>Shiny is computing
✓ Shiny is still running</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="build-yourself-safety-net.html#cb183-1" tabindex="-1"></a><span class="co"># We are creating a first data.frame that records the launch</span></span>
<span id="cb183-2"><a href="build-yourself-safety-net.html#cb183-2" tabindex="-1"></a><span class="co"># of the container.</span></span>
<span id="cb183-3"><a href="build-yourself-safety-net.html#cb183-3" tabindex="-1"></a>results <span class="ot">&lt;-</span> dockerstats<span class="sc">::</span><span class="fu">dockerstats</span>(<span class="st">&quot;xmk2&quot;</span>, <span class="at">extra =</span> <span class="st">&quot;launch&quot;</span>)</span>
<span id="cb183-4"><a href="build-yourself-safety-net.html#cb183-4" tabindex="-1"></a></span>
<span id="cb183-5"><a href="build-yourself-safety-net.html#cb183-5" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]){</span>
<span id="cb183-6"><a href="build-yourself-safety-net.html#cb183-6" tabindex="-1"></a>  <span class="co"># We will be setting a letter for the package name input</span></span>
<span id="cb183-7"><a href="build-yourself-safety-net.html#cb183-7" tabindex="-1"></a>  test<span class="sc">$</span><span class="fu">shiny_set_input</span>(</span>
<span id="cb183-8"><a href="build-yourself-safety-net.html#cb183-8" tabindex="-1"></a>    <span class="st">&quot;main_ui_1-left_ui_1-pkg_name_ui_1-package&quot;</span>,</span>
<span id="cb183-9"><a href="build-yourself-safety-net.html#cb183-9" tabindex="-1"></a>    i</span>
<span id="cb183-10"><a href="build-yourself-safety-net.html#cb183-10" tabindex="-1"></a>  )</span>
<span id="cb183-11"><a href="build-yourself-safety-net.html#cb183-11" tabindex="-1"></a>  <span class="co"># Once the input is set, we call dockerstats()</span></span>
<span id="cb183-12"><a href="build-yourself-safety-net.html#cb183-12" tabindex="-1"></a>  <span class="co"># for this container and bind the results to</span></span>
<span id="cb183-13"><a href="build-yourself-safety-net.html#cb183-13" tabindex="-1"></a>  <span class="co"># the previously created data.frame</span></span>
<span id="cb183-14"><a href="build-yourself-safety-net.html#cb183-14" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb183-15"><a href="build-yourself-safety-net.html#cb183-15" tabindex="-1"></a>    results,</span>
<span id="cb183-16"><a href="build-yourself-safety-net.html#cb183-16" tabindex="-1"></a>    dockerstats<span class="sc">::</span><span class="fu">dockerstats</span>(<span class="st">&quot;xmk2&quot;</span>, <span class="at">extra =</span> i)</span>
<span id="cb183-17"><a href="build-yourself-safety-net.html#cb183-17" tabindex="-1"></a>  )</span>
<span id="cb183-18"><a href="build-yourself-safety-net.html#cb183-18" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running
-- Setting id main_ui_1-left_ui_1-pkg_name_ui_1-package --
Shiny is computing
✓ Shiny is still running</code></pre>
<p>And draw a small graph of this evolution, shown in Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-43">11.6</a>:</p>

<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="build-yourself-safety-net.html#cb185-1" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb185-2"><a href="build-yourself-safety-net.html#cb185-2" tabindex="-1"></a><span class="co"># We are converting the MemUsage and record_time columns</span></span>
<span id="cb185-3"><a href="build-yourself-safety-net.html#cb185-3" tabindex="-1"></a><span class="co"># to a format that can be used in {ggplot2}</span></span>
<span id="cb185-4"><a href="build-yourself-safety-net.html#cb185-4" tabindex="-1"></a>results <span class="ot">&lt;-</span> results <span class="sc">%&gt;%</span></span>
<span id="cb185-5"><a href="build-yourself-safety-net.html#cb185-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb185-6"><a href="build-yourself-safety-net.html#cb185-6" tabindex="-1"></a>    <span class="at">MemUsage =</span> <span class="fu">to_mib</span>(MemUsage),</span>
<span id="cb185-7"><a href="build-yourself-safety-net.html#cb185-7" tabindex="-1"></a>    <span class="at">record_time =</span> <span class="fu">as.POSIXct</span>(record_time)</span>
<span id="cb185-8"><a href="build-yourself-safety-net.html#cb185-8" tabindex="-1"></a>  )</span>
<span id="cb185-9"><a href="build-yourself-safety-net.html#cb185-9" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb185-10"><a href="build-yourself-safety-net.html#cb185-10" tabindex="-1"></a><span class="co"># Using the record time as an x axis,</span></span>
<span id="cb185-11"><a href="build-yourself-safety-net.html#cb185-11" tabindex="-1"></a><span class="co"># then adding the MemUsage as a line (to watch the</span></span>
<span id="cb185-12"><a href="build-yourself-safety-net.html#cb185-12" tabindex="-1"></a><span class="co"># evolution over time), then we add the &#39;extra&#39; column,</span></span>
<span id="cb185-13"><a href="build-yourself-safety-net.html#cb185-13" tabindex="-1"></a><span class="co"># that contains the letters, as vertical lines + as</span></span>
<span id="cb185-14"><a href="build-yourself-safety-net.html#cb185-14" tabindex="-1"></a><span class="co"># label</span></span>
<span id="cb185-15"><a href="build-yourself-safety-net.html#cb185-15" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb185-16"><a href="build-yourself-safety-net.html#cb185-16" tabindex="-1"></a>  <span class="at">data =</span> results,</span>
<span id="cb185-17"><a href="build-yourself-safety-net.html#cb185-17" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> record_time)</span>
<span id="cb185-18"><a href="build-yourself-safety-net.html#cb185-18" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb185-19"><a href="build-yourself-safety-net.html#cb185-19" tabindex="-1"></a>  <span class="fu">geom_line</span>(</span>
<span id="cb185-20"><a href="build-yourself-safety-net.html#cb185-20" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">y =</span> MemUsage)</span>
<span id="cb185-21"><a href="build-yourself-safety-net.html#cb185-21" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb185-22"><a href="build-yourself-safety-net.html#cb185-22" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb185-23"><a href="build-yourself-safety-net.html#cb185-23" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xintercept =</span> record_time)</span>
<span id="cb185-24"><a href="build-yourself-safety-net.html#cb185-24" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb185-25"><a href="build-yourself-safety-net.html#cb185-25" tabindex="-1"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb185-26"><a href="build-yourself-safety-net.html#cb185-26" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb185-27"><a href="build-yourself-safety-net.html#cb185-27" tabindex="-1"></a>      <span class="at">y =</span> <span class="fu">max</span>(MemUsage),</span>
<span id="cb185-28"><a href="build-yourself-safety-net.html#cb185-28" tabindex="-1"></a>      <span class="at">label =</span> extra</span>
<span id="cb185-29"><a href="build-yourself-safety-net.html#cb185-29" tabindex="-1"></a>    )</span>
<span id="cb185-30"><a href="build-yourself-safety-net.html#cb185-30" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb185-31"><a href="build-yourself-safety-net.html#cb185-31" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb185-32"><a href="build-yourself-safety-net.html#cb185-32" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;MemUsage of 10 inputs for package name&quot;</span></span>
<span id="cb185-33"><a href="build-yourself-safety-net.html#cb185-33" tabindex="-1"></a>  )</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-43"></span>
<img src="engineering-production-grade-shiny-apps_files/figure-html/11-step-by-step-secure-43-1.png" alt="Plot of the {dockerstats} evolution." width="672" />
<p class="caption">
FIGURE 11.6: Plot of the <code>{dockerstats}</code> evolution.
</p>
</div>
</div>
</div>
</div>
<div id="a-reproducible-environment" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> A reproducible environment<a href="build-yourself-safety-net.html#a-reproducible-environment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the challenges of building an app that needs to be sent to production is that you will need to work in a reproducible environment.
What does this mean?
<strong>When building a production application, you are building a piece of software that will be launched on another computer, be it a server in the cloud or someone else’s computer</strong>.
Once your app is built, there are few chances that you will launch it on your own computer and that external users will connect to your computer.
You will either give your users a package (which will be the simplest way to share it: bundle the packaged app to a <code>tar.gz</code>, then let people install it either manually or from a package repository), or a URL where they can connect and use your app.</p>
<p>If you follow the <code>{golem}</code> workflow and all the good practices for a solid package, the application you have built should be deployable on another computer that has R.
In that second case, <strong>you will have to think about how you can create your app in a reproducible environment</strong>: in other words, be sure that the app is deployed under the same configuration as your local application—R version, package versions, system requirements, environment variables, etc.</p>
<p>To help you achieve that, we will introduce two tools in the next section: <code>{renv}</code> <span class="citation">(<a href="#ref-R-renv">Ushey and Wickham 2024</a>)</span> and <a href="https://www.docker.com/">Docker</a>.</p>
<div id="renv" class="section level3 hasAnchor" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> <code>{renv}</code><a href="build-yourself-safety-net.html#renv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="a.-about-renv" class="section level4 unnumbered hasAnchor">
<h4>A. About <code>{renv}</code><a href="build-yourself-safety-net.html#a.-about-renv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>How do we make sure the package versions we have installed on our machine stay the same in the production environment?
And also, how can we be sure that, working as a team, we will be able to work together using the same package versions?</p>
<p>From one package version to another, functions and behaviors change.
Most of the time, a new version means new functions and new features.
But from time to time, a new version means breaking change<strong>s. Monitoring these changes and how they potentially break our code is a hard task: because checking versions of packages on various machines can take time</strong>, or because debugging these bugs in your application logs is not straightforward.
And of course, the moment when we discover the error might not be the perfect time for us, as we might not have enough free time on our calendar to debug the application that has stopped running.</p>
<p>Let’s take, for example, this traceback from the logs of an application we sent one day on a <code>Shiny Server</code>:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb186-1"><a href="build-yourself-safety-net.html#cb186-1" tabindex="-1"></a><span class="ex">root@westeros-vm:/var/log/shiny-server#</span> cat thewall<span class="er">(</span><span class="ex">...</span><span class="kw">)</span><span class="ex">.log</span></span>
<span id="cb186-2"><a href="build-yourself-safety-net.html#cb186-2" tabindex="-1"></a><span class="ex">***</span> caught segfault <span class="pp">***</span></span>
<span id="cb186-3"><a href="build-yourself-safety-net.html#cb186-3" tabindex="-1"></a><span class="ex">[...]</span></span>
<span id="cb186-4"><a href="build-yourself-safety-net.html#cb186-4" tabindex="-1"></a><span class="ex">address</span> 0x5100004d, cause <span class="st">&#39;memory not mapped&#39;</span></span>
<span id="cb186-5"><a href="build-yourself-safety-net.html#cb186-5" tabindex="-1"></a></span>
<span id="cb186-6"><a href="build-yourself-safety-net.html#cb186-6" tabindex="-1"></a><span class="ex">Traceback:</span></span>
<span id="cb186-7"><a href="build-yourself-safety-net.html#cb186-7" tabindex="-1"></a><span class="ex">1:</span> rcpp_sf_to_geojson<span class="er">(</span><span class="ex">sf,</span> digits, factors_as_string<span class="kw">)</span></span>
<span id="cb186-8"><a href="build-yourself-safety-net.html#cb186-8" tabindex="-1"></a><span class="ex">2:</span> sf_geojson.sf<span class="er">(</span><span class="ex">data</span><span class="kw">)</span></span>
<span id="cb186-9"><a href="build-yourself-safety-net.html#cb186-9" tabindex="-1"></a><span class="ex">3:</span> geojsonsf::sf_geojson<span class="er">(</span><span class="ex">data</span><span class="kw">)</span></span>
<span id="cb186-10"><a href="build-yourself-safety-net.html#cb186-10" tabindex="-1"></a><span class="ex">4:</span> addGlifyPolygons<span class="er">(</span><span class="bu">.</span>, data = pol_V1, color = les_couleurs,</span>
<span id="cb186-11"><a href="build-yourself-safety-net.html#cb186-11" tabindex="-1"></a><span class="ex">popup</span> = <span class="st">&quot;val&quot;</span>, opacity = 1<span class="kw">)</span></span>
<span id="cb186-12"><a href="build-yourself-safety-net.html#cb186-12" tabindex="-1"></a><span class="ex">5:</span> function_list[<span class="pp">[</span><span class="ss">i</span><span class="pp">]</span>]<span class="er">(</span><span class="ex">value</span><span class="kw">)</span></span>
<span id="cb186-13"><a href="build-yourself-safety-net.html#cb186-13" tabindex="-1"></a><span class="ex">6:</span> freduce<span class="er">(</span><span class="ex">value,</span> <span class="kw">`</span><span class="ex">_function_list</span><span class="kw">`)</span></span>
<span id="cb186-14"><a href="build-yourself-safety-net.html#cb186-14" tabindex="-1"></a><span class="ex">7:</span> <span class="kw">`</span><span class="ex">_fseq</span><span class="kw">`</span><span class="er">(</span><span class="kw">`</span><span class="ex">_lhs</span><span class="kw">`)</span></span>
<span id="cb186-15"><a href="build-yourself-safety-net.html#cb186-15" tabindex="-1"></a><span class="ex">8:</span> eval<span class="er">(</span><span class="ex">quote</span><span class="er">(</span><span class="kw">`</span><span class="ex">_fseq</span><span class="kw">`</span><span class="er">(</span><span class="kw">`</span><span class="ex">_lhs</span><span class="kw">`))</span><span class="ex">,</span> env, env<span class="kw">)</span></span>
<span id="cb186-16"><a href="build-yourself-safety-net.html#cb186-16" tabindex="-1"></a><span class="ex">[...]</span></span>
<span id="cb186-17"><a href="build-yourself-safety-net.html#cb186-17" tabindex="-1"></a><span class="ex">105:</span> captureStackTraces<span class="er">(</span><span class="kw">{</span></span>
<span id="cb186-18"><a href="build-yourself-safety-net.html#cb186-18" tabindex="-1"></a><span class="cf">while</span> <span class="kw">(</span><span class="ex">!.globals</span><span class="va">$stopped</span><span class="kw">)</span> <span class="kw">{</span></span>
<span id="cb186-19"><a href="build-yourself-safety-net.html#cb186-19" tabindex="-1"></a><span class="ex">..stacktracefloor..</span><span class="er">(</span><span class="fu">serviceApp()</span><span class="kw">)</span></span>
<span id="cb186-20"><a href="build-yourself-safety-net.html#cb186-20" tabindex="-1"></a><span class="ex">Sys.sleep</span><span class="er">(</span><span class="ex">0.001</span><span class="kw">)</span>    <span class="ex">}}</span><span class="er">)</span></span>
<span id="cb186-21"><a href="build-yourself-safety-net.html#cb186-21" tabindex="-1"></a><span class="ex">106:</span> ..stacktraceoff..<span class="er">(</span><span class="ex">captureStackTraces</span><span class="er">(</span><span class="kw">{</span></span>
<span id="cb186-22"><a href="build-yourself-safety-net.html#cb186-22" tabindex="-1"></a><span class="cf">while</span> <span class="kw">(</span><span class="ex">!.globals</span><span class="va">$stopped</span><span class="kw">)</span> <span class="kw">{</span></span>
<span id="cb186-23"><a href="build-yourself-safety-net.html#cb186-23" tabindex="-1"></a><span class="ex">..stacktracefloor..</span><span class="er">(</span><span class="fu">serviceApp()</span><span class="kw">)</span></span>
<span id="cb186-24"><a href="build-yourself-safety-net.html#cb186-24" tabindex="-1"></a><span class="ex">Sys.sleep</span><span class="er">(</span><span class="ex">0.001</span><span class="kw">)</span>    <span class="ex">}}</span><span class="er">))</span></span>
<span id="cb186-25"><a href="build-yourself-safety-net.html#cb186-25" tabindex="-1"></a><span class="ex">107:</span> runApp<span class="er">(</span><span class="ex">Sys.getenv</span><span class="er">(</span><span class="st">&quot;SHINY_APP&quot;</span><span class="kw">)</span><span class="ex">,</span></span>
<span id="cb186-26"><a href="build-yourself-safety-net.html#cb186-26" tabindex="-1"></a><span class="ex">port</span> = port,</span>
<span id="cb186-27"><a href="build-yourself-safety-net.html#cb186-27" tabindex="-1"></a><span class="ex">launch.browser</span> = FALSE<span class="kw">)</span></span>
<span id="cb186-28"><a href="build-yourself-safety-net.html#cb186-28" tabindex="-1"></a><span class="ex">An</span> irrecoverable exception occurred. R is aborting now ...</span></code></pre></div>
<p>Pretty hard to debug, isn’t it?
What has actually happened?
On that specific case, it turned out that the package version from <code>{geojsonsf}</code> <span class="citation">(<a href="#ref-R-geojsonsf">Cooley 2022</a>)</span> was <code>1.2.1</code> on our development machine, and the one on the <code>{shiny}</code> server was updated to <code>1.3.0</code>, and there was a breaking change in the package, as shown in Figure <a href="build-yourself-safety-net.html#fig:11-step-by-step-secure-44">11.7</a>.
This bug was hard to detect as <code>{geojsonsf}</code> was not a direct dependency of our app, but a dependency of one of our dependencies, making it slightly more complex to identify.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:11-step-by-step-secure-44"></span>
<img src="img/geojson.png" alt="Breaking changes in {geojsonsf}, a dependency of a dependency of our {shiny} application." width="100%" />
<p class="caption">
FIGURE 11.7: Breaking changes in <code>{geojsonsf}</code>, a dependency of a dependency of our <code>{shiny}</code> application.
</p>
</div>
<p>The same thing could have happened if working as a team: one of the computers has an old version, when another one has updated to a more recent one.
How do we prevent that?
This is where the <code>{renv}</code> package comes into play: this package allows you to have a project-based library, instead of a global one.
In other words, instead of having a library that is global to your machine, <code>{renv}</code> allows you to specify packages with fixed versions for a project.
That means that you can have <code>{geojsonsf}</code> version <code>1.2.1</code> in one of your projects, and version <code>1.3.0</code> in another, with the two not conflicting with each other.</p>
</div>
<div id="b.-using-renv" class="section level4 unnumbered hasAnchor">
<h4>B. Using <code>{renv}</code><a href="build-yourself-safety-net.html#b.-using-renv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<blockquote>
<p>Underlying the philosophy of renv is that any of your existing workflows should just work as they did before.</p>
<p><em>Introduction to renv</em> (<a href="https://rstudio.github.io/renv/articles/renv.html" class="uri">https://rstudio.github.io/renv/articles/renv.html</a>)</p>
</blockquote>
<p>The first thing to do with <code>{renv}</code> is initiate it with the <code>init()</code> function.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="build-yourself-safety-net.html#cb187-1" tabindex="-1"></a><span class="co"># Loading and initiating {renv}</span></span>
<span id="cb187-2"><a href="build-yourself-safety-net.html#cb187-2" tabindex="-1"></a><span class="fu">library</span>(renv)</span>
<span id="cb187-3"><a href="build-yourself-safety-net.html#cb187-3" tabindex="-1"></a><span class="fu">init</span>()</span></code></pre></div>
<p>This function does several things:</p>
<ul>
<li>Create/modify the <code>.Rprofile</code> file at the root of your project. Here is an example of what this file may look like inside an empty project:</li>
</ul>
<pre><code>source(&quot;renv/activate.R&quot;)</code></pre>
<p>In this example, there is just one call to a script, one located at <code>renv/activate.R</code>.</p>
<ul>
<li>It creates a <code>renv.lock</code> file, which will list all the package dependencies</li>
</ul>
<p>As we have initiated an empty project, we do not have any dependencies here.
If you run this command in a project that already has scripts and dependencies, <code>{renv}</code> will try to locate them all, and add them to this file.
Note that these packages may come from CRAN, Bioconductor, GitHub, GitLab, Bitbucket, and even local repositories.</p>
<p>The <code>renv/</code> folder contains a series of files that store your settings and the necessary packages, using a structure that mimics a local repository.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="build-yourself-safety-net.html#cb189-1" tabindex="-1"></a><span class="co"># Displaying the structure of the folder</span></span>
<span id="cb189-2"><a href="build-yourself-safety-net.html#cb189-2" tabindex="-1"></a>fs<span class="sc">::</span><span class="fu">dir_tree</span>(<span class="st">&quot;data-raw/renvinit/&quot;</span>, <span class="at">recurse =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>data-raw/renvinit/
├── renv
│   ├── activate.R
│   └── settings.dcf
├── renv.lock
└── renvinit.Rproj</code></pre>
<p>We will not go into details on this folder, as it is a rather complex structure and chances are that you will never have to update it by hand.</p>
<p>With <code>{renv}</code>, you can choose to link this “local repository” to a local cache, i.e. a folder which is common to all your projects and stores packages and the different versions you already installed (this is the default behavior) or to store the complete packages inside the project, making it portable.</p>
<p>When you need a new package, you will have to install it in your local library.
The fastest way to install new packages in your <code>{renv}</code>-powered project is by using the <code>install.packages</code> function, which is shimmed by <code>{renv}</code>.
This shim will search the local cache to see if the package has already been cached, and if it is not, it will install and link it.</p>
<p>Now, we need to install a new package, for example <code>{attempt}</code> <span class="citation">(<a href="#ref-R-attempt">Fay 2020</a>)</span>:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="build-yourself-safety-net.html#cb191-1" tabindex="-1"></a><span class="co"># Installing attempt</span></span>
<span id="cb191-2"><a href="build-yourself-safety-net.html#cb191-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;attempt&quot;</span>)</span></code></pre></div>
<p>We will now add a little call to this library:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="build-yourself-safety-net.html#cb192-1" tabindex="-1"></a><span class="co"># Create a fake script that launches {attempt}</span></span>
<span id="cb192-2"><a href="build-yourself-safety-net.html#cb192-2" tabindex="-1"></a><span class="fu">write</span>(<span class="st">&quot;library(attempt)&quot;</span>, <span class="st">&quot;script.R&quot;</span>)</span></code></pre></div>
<p>Once you want to update your <code>{renv}</code> <code>Lockfile</code>, call <code>snapshot()</code>.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="build-yourself-safety-net.html#cb193-1" tabindex="-1"></a><span class="co"># Snapshoting the current status of the environment</span></span>
<span id="cb193-2"><a href="build-yourself-safety-net.html#cb193-2" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">snapshot</span>(<span class="at">confirm =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Note that if you are building an application as a package, use <code>renv::snapshot(type = "explicit")</code> (need version &gt; <code>0.9.3-99</code>): this will only capture the dependencies listed in the <code>DESCRIPTION</code> file.
If you don’t specify this <code>type = "explicit"</code>, <code>{renv}</code> will go and look for all the packages it can find in your file, and notably in your <code>.Rhistory</code>, meaning that if you one day used a function from <code>{dplyr}</code> but your current package doesn’t use it anymore, <code>{renv}</code> will include it.</p>
<pre><code>{
  &quot;R&quot;: {
    &quot;Version&quot;: &quot;3.6.1&quot;,
    &quot;Repositories&quot;: [
      {
        &quot;Name&quot;: &quot;CRAN&quot;,
        &quot;URL&quot;: &quot;https://cran.rstudio.com&quot;
      }
    ]
  },
  &quot;Packages&quot;: {
    &quot;attempt&quot;: {
      &quot;Package&quot;: &quot;attempt&quot;,
      &quot;Version&quot;: &quot;0.3.0&quot;,
      &quot;Source&quot;: &quot;Repository&quot;,
      &quot;Repository&quot;: &quot;CRAN&quot;,
      &quot;Hash&quot;: &quot;9aaae25e273927dba4e279caac478baa&quot;
    },
    &quot;renv&quot;: {
      &quot;Package&quot;: &quot;renv&quot;,
      &quot;Version&quot;: &quot;0.9.3&quot;,
      &quot;Source&quot;: &quot;Repository&quot;,
      &quot;Repository&quot;: &quot;CRAN&quot;,
      &quot;Hash&quot;: &quot;c1a367437d8a8a44bec4b9d4974cb20c&quot;
    },
    &quot;rlang&quot;: {
      &quot;Package&quot;: &quot;rlang&quot;,
      &quot;Version&quot;: &quot;0.4.5&quot;,
      &quot;Source&quot;: &quot;Repository&quot;,
      &quot;Repository&quot;: &quot;CRAN&quot;,
      &quot;Hash&quot;: &quot;1cc1b38e4db40ea6eb19ab8080bbed3b&quot;
    }
  }
}</code></pre>
<p>And now that you have a reproducible <code>{renv}</code> library, what is next?
Of course, if you are either working as a team or deploying to a server, you will have to restore the state of your project, which is now living somewhere else, inside your current project/deployment.
And to do that, the function to call is <code>renv::restore()</code>, which will update your local project with the dependencies listed inside your <code>Lockfile</code>.</p>
<p>To sum up, here are the steps to follow:</p>
<ul>
<li>Initiate the project with <code>renv::init()</code>.</li>
<li>Install/remove packages.</li>
<li>Take a <code>snapshot()</code> of the state of your project.</li>
<li><code>renv::restore()</code> the state of your project using <code>renv.lock</code>.</li>
<li>Share <code>.Rprofile</code>, <code>renv.lock</code>, <code>renv/activate.R</code> and <code>renv/settings.dcf</code> files for reproducibility.</li>
</ul>
<p>Of course, <code>renv::restore()</code> comes with another superpower: time traveling!
If you decide to update a package in your project, and realize that this package makes the application crash (e.g., an update to <code>{geojsonsf}</code>), you can go back in time to a previous version of your library by calling the <code>restore()</code> function.</p>
<p>There are more things you can do with <code>{renv}</code>.
If you want to know more, we invite you to refer to the <a href="https://rstudio.github.io/renv">official documentation</a>.</p>
</div>
</div>
<div id="docker" class="section level3 hasAnchor" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Docker<a href="build-yourself-safety-net.html#docker" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="a.-r-docker-shiny" class="section level4 unnumbered hasAnchor">
<h4>A. R, Docker, <code>{shiny}</code><a href="build-yourself-safety-net.html#a.-r-docker-shiny" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Docker is a program that allows to download, install, create, launch and stop multiple operating systems, called containers, on a machine, which will be called the host.
This host can be your local computer, or the server where you deploy your application/s.</p>
<p>Docker was designed for <strong>enclosing software environments inside an image that can later be launched</strong>.
The general idea is that with Docker, you are defining in a <code>Dockerfile</code> all the “rules” that are used to create a given environment, and then you can use this file (and the linked files, for example the R package containing your app) to <strong>deploy your application on any given server that can run Docker</strong>.
That way, if the <code>Dockerfile</code> can compile on your machine and if you can run it, it should work everywhere (of course, it is a little bit more complex than that, but you get the idea).</p>
<p>Why Docker in the context of <code>{shiny}</code> apps?
Because Docker allows you to abstract away the complexity of managing multiple versions of R and multiple versions of the same package, or even different versions of the same system requirement.
For example, let’s take our example with the breaking change in <code>{geojsonsf}</code> that we used in the previous section.
With Docker, we can safely specify a <code>1.2.1</code> version in our image, and changing versions on the server would not have broken our code.</p>
<p>By using Docker for your deployment, you can build and deploy an application with the very same version of packages and R as the one on your computer.
And of course, you can change them without breaking the rest of the machine: everything that happens in a container stays in a container.
That way, if you are building your application with an older version of <code>{shiny}</code>, <strong>you are sure that sending it to production will not break everything: the version inside the Docker image is the same as the one from your machine</strong>.
And later, if you update <code>{shiny}</code> and start a new project, you can deploy your app with another version of the package.
Same goes for your version of R.</p>
</div>
<div id="b.-building-a-dockerfile-for-your-app" class="section level4 unnumbered hasAnchor">
<h4>B. Building a Dockerfile for your app<a href="build-yourself-safety-net.html#b.-building-a-dockerfile-for-your-app" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Good news!
If you are building your app with <code>{golem}</code>, the creation of the <code>Dockerfile</code> is just one function away!
If you have a look at the <code>03_deploy.R</code> file in the <code>dev</code> folder, you will find a series of functions that can create the <code>Dockerfile</code> for your project: either as a generic Docker image, or for Shinyproxy or Heroku.</p>
<p>For example, to create a <code>Dockerfile</code> for a <code>{golem}</code> project, you can run the following, from the root of your package:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="build-yourself-safety-net.html#cb195-1" tabindex="-1"></a>golem<span class="sc">::</span><span class="fu">add_dockerfile</span>()</span></code></pre></div>
<p>Let’s take some time to understand this file, and detail how we could be building it from scratch.</p>
<ol style="list-style-type: decimal">
<li><code>FROM</code></li>
</ol>
<pre><code>FROM rocker/r-ver:4.3.3</code></pre>
<p>This line defines what version of R to use for deploying your application.
This <code>FROM</code> line is the one that sets an image to start from: you rarely (if ever) build a Docker image from nothing, but instead you use an existing image on top of which you build your own image.
Here, we choose one of the <a href="https://hub.docker.com/r/rocker/r-ver/">r-ver</a> Docker images, based on the output of:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="build-yourself-safety-net.html#cb197-1" tabindex="-1"></a><span class="fu">R.Version</span>()<span class="sc">$</span>version.string</span></code></pre></div>
<pre><code>[1] &quot;R version 4.3.3 (2024-02-29)&quot;</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><code>RUN</code></li>
</ol>
<p>The <code>RUN</code> call in the file refers to bash calls that are used to build the image.
For example, the second line of the <code>Dockerfile</code> installs all the system requirements needed by our application.</p>
<pre><code>RUN apt-get update &amp;&amp; \
  apt-get install -y  git-core \
  libcurl4-openssl-dev libssh2-1-dev \
  libssl-dev libxml2-dev make \
  zlib1g-dev &amp;&amp; rm -rf /var/lib/apt/lists/*</code></pre>
<p>In the subsequent <code>RUN</code> calls, <code>{golem}</code> chooses to call <code>remotes::install_version()</code> to be sure we install the version of the package that matches the one from your computer.</p>
<pre><code>RUN Rscript -e \
&#39;remotes::install_version(&quot;xfun&quot;,upgrade=&quot;never&quot;,version=&quot;0.19&quot;)&#39;</code></pre>
<p>As you can see, it matches the local version:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="build-yourself-safety-net.html#cb201-1" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">&quot;xfun&quot;</span>)</span></code></pre></div>
<pre><code>[1] ‘0.19’</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><code>ADD</code></li>
</ol>
<p>This Docker entry takes a folder or a file, and copies it inside the image.
With <code>{golem}</code>, we are adding the current project, containing the app, to a folder called <code>/build_zone</code>.</p>
<pre><code>ADD . /build_zone</code></pre>
<ol start="4" style="list-style-type: decimal">
<li><code>EXPOSE</code></li>
</ol>
<p>This command defines which port of the container will be available from the outside of the container.</p>
<pre><code>EXPOSE 80</code></pre>
<ol start="5" style="list-style-type: decimal">
<li><code>CMD</code></li>
</ol>
<p>This final command is the one that is launched when you run a container.
With a <code>{shiny}</code> app, this command is the one that launches the application.</p>
<pre><code>CMD R -e \
 &quot;options(&#39;shiny.port&#39;=80,shiny.host=&#39;0.0.0.0&#39;);golex::run_app()&quot;</code></pre>
</div>
<div id="c.-dockerfiler" class="section level4 unnumbered hasAnchor">
<h4>C. <code>{dockerfiler}</code><a href="build-yourself-safety-net.html#c.-dockerfiler" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you want to do everything from the R command line, the <code>{dockerfiler}</code> <span class="citation">(<a href="#ref-R-dockerfiler">Fay et al. 2023</a>)</span> package is here for you!
This package allows you to generate a <code>Dockerfile</code> straight from R:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="build-yourself-safety-net.html#cb206-1" tabindex="-1"></a><span class="fu">library</span>(dockerfiler)</span></code></pre></div>
<pre><code>
Attaching package: &#39;dockerfiler&#39;</code></pre>
<pre><code>The following object is masked from &#39;package:golem&#39;:

    get_sysreqs</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="build-yourself-safety-net.html#cb209-1" tabindex="-1"></a><span class="co"># Creating a new Dockerfile object</span></span>
<span id="cb209-2"><a href="build-yourself-safety-net.html#cb209-2" tabindex="-1"></a>my_dock <span class="ot">&lt;-</span> Dockerfile<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb209-3"><a href="build-yourself-safety-net.html#cb209-3" tabindex="-1"></a><span class="co"># Adding RUN, ADD, WORKDIR and EXPOSE commands</span></span>
<span id="cb209-4"><a href="build-yourself-safety-net.html#cb209-4" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">RUN</span>(<span class="st">&quot;apt-get update &amp;&amp; apt-get install -y git-core&quot;</span>)</span>
<span id="cb209-5"><a href="build-yourself-safety-net.html#cb209-5" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">ADD</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot;/&quot;</span>)</span>
<span id="cb209-6"><a href="build-yourself-safety-net.html#cb209-6" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">RUN</span>(<span class="st">&quot;mkdir /build_zone&quot;</span>)</span>
<span id="cb209-7"><a href="build-yourself-safety-net.html#cb209-7" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">ADD</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot;/build_zone&quot;</span>)</span>
<span id="cb209-8"><a href="build-yourself-safety-net.html#cb209-8" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">WORKDIR</span>(<span class="st">&quot;/build_zone&quot;</span>)</span>
<span id="cb209-9"><a href="build-yourself-safety-net.html#cb209-9" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">RUN</span>(<span class="fu">r</span>(remotes<span class="sc">::</span><span class="fu">install_local</span>(<span class="at">upgrade=</span><span class="st">&quot;never&quot;</span>)))</span>
<span id="cb209-10"><a href="build-yourself-safety-net.html#cb209-10" tabindex="-1"></a>my_dock<span class="sc">$</span><span class="fu">EXPOSE</span>(<span class="dv">80</span>)</span>
<span id="cb209-11"><a href="build-yourself-safety-net.html#cb209-11" tabindex="-1"></a><span class="co"># Viewing the Dockerfile</span></span>
<span id="cb209-12"><a href="build-yourself-safety-net.html#cb209-12" tabindex="-1"></a>my_dock</span></code></pre></div>
<pre><code>FROM rocker/r-base
RUN apt-get update &amp;&amp; apt-get install -y git-core
ADD . /
RUN mkdir /build_zone
ADD . /build_zone
WORKDIR /build_zone
RUN R -e &#39;remotes::install_local(upgrade = &quot;never&quot;)&#39;
EXPOSE 80</code></pre>
</div>
<div id="d.-docker-and-renv" class="section level4 unnumbered hasAnchor">
<h4>D. Docker and <code>{renv}</code><a href="build-yourself-safety-net.html#d.-docker-and-renv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you use <code>{renv}</code> to build your <code>{shiny}</code> application, it can also be used inside your Docker container.
To make those two tools work together, you will have to copy the files produced by <code>{renv}</code> inside the container: <code>.Rprofile</code>, <code>renv.lock</code>, <code>renv/activate.R</code> and <code>renv/settings.dcf</code> files.</p>
<p>Then run <code>renv::restore()</code> inside your application, instead of using the calls to <code>remotes::install_version()</code> as they are currently implemented when doing it with <code>{golem}</code>.</p>
<p>At the time of writing these lines, there is no native support of <code>{renv}</code> (with or without Docker) in <code>{golem}</code>, but that is something we can expect to happen in future versions of <code>{golem}</code>.</p>
</div>
<div id="e.-develop-inside-a-docker-container" class="section level4 unnumbered hasAnchor">
<h4>E. Develop inside a Docker container<a href="build-yourself-safety-net.html#e.-develop-inside-a-docker-container" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Developers have their own R versions and operating systems, which generally differ from the one used on the production server, leading to issues when it comes to deploying the application.</p>
<p>If you plan on using Docker as a deployment mechanism, you can also use Docker as a local developer environment.
Thanks to the containers maintained by the <a href="https://www.rocker-project.org/">The Rocker Project</a>, it’s possible to have a local environment that comes close to what you will find on the production server.
What’s even more interesting is that this project offers images that can contain RStudio server: that means that the application that you will deploy in production can have the very same configuration as the one developers are using on their local machine: thanks to these containers, developers can work on a version of R that matches the one from the production server, using packages that will exactly match the one used in production.</p>
<p>Even more interesting is using RStudio inside Docker in combination with <code>{renv}</code>: the developers work on their machines, inside an IDE they know, and with system requirements (R versions, packages, etc.) that can be reproduced on the production server!</p>
</div>
<div id="f.-read-more-about-docker" class="section level4 unnumbered hasAnchor">
<h4>F. Read more about Docker<a href="build-yourself-safety-net.html#f.-read-more-about-docker" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p><a href="https://colinfay.me/docker-r-reproducibility/">An Introduction to Docker for R Users</a></p></li>
<li><p>An Introduction to Rocker: Docker Containers for R <span class="citation">(<a href="#ref-RJ-2017-065">Boettiger and Eddelbuettel 2017</a>)</span></p></li>
<li><p>The Rockerverse: Packages and Applications for Containerization with R <span class="citation">(<a href="#ref-rockerverse">Nüst et al. 2020</a>)</span></p></li>
</ul>

</div>
</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-RJ-2017-065" class="csl-entry">
Boettiger, Carl, and Dirk Eddelbuettel. 2017. <span>“<span class="nocase">An Introduction to Rocker: Docker Containers for R</span>.”</span> <em><span>The R Journal</span></em> 9 (2): 527–36. <a href="https://doi.org/10.32614/RJ-2017-065">https://doi.org/10.32614/RJ-2017-065</a>.
</div>
<div id="ref-R-shinytest" class="csl-entry">
Chang, Winston, Gábor Csárdi, and Hadley Wickham. 2024. <em>Shinytest: Test Shiny Apps</em>. <a href="https://github.com/rstudio/shinytest">https://github.com/rstudio/shinytest</a>.
</div>
<div id="ref-R-chromote" class="csl-entry">
Chang, Winston, and Barret Schloerke. 2024. <em>Chromote: Headless Chrome Web Browser Interface</em>. <a href="https://rstudio.github.io/chromote/">https://rstudio.github.io/chromote/</a>.
</div>
<div id="ref-R-geojsonsf" class="csl-entry">
Cooley, David. 2022. <em>Geojsonsf: GeoJSON to Simple Feature Converter</em>. <a href="https://github.com/SymbolixAU/geojsonsf">https://github.com/SymbolixAU/geojsonsf</a>.
</div>
<div id="ref-R-processx" class="csl-entry">
Csárdi, Gábor, and Winston Chang. 2024. <em>Processx: Execute and Control System Processes</em>. <a href="https://processx.r-lib.org">https://processx.r-lib.org</a>.
</div>
<div id="ref-R-attempt" class="csl-entry">
Fay, Colin. 2020. <em>Attempt: Tools for Defensive Programming</em>. <a href="https://github.com/ColinFay/attempt">https://github.com/ColinFay/attempt</a>.
</div>
<div id="ref-R-crrry" class="csl-entry">
———. 2024a. <em>Crrry: Crrri Recipes for Shiny</em>. <a href="https://github.com/ColinFay/crrry">https://github.com/ColinFay/crrry</a>.
</div>
<div id="ref-R-dockerstats" class="csl-entry">
———. 2024b. <em>Dockerstats: A Wrapper Around Docker Stats</em>. <a href="https://github.com/ColinFay/dockerstats">https://github.com/ColinFay/dockerstats</a>.
</div>
<div id="ref-R-hexmake" class="csl-entry">
———. 2024d. <em>Hexmake: Hex Stickers Maker</em>. <a href="https://github.com/colinfay/hexmake">https://github.com/colinfay/hexmake</a>.
</div>
<div id="ref-R-dockerfiler" class="csl-entry">
Fay, Colin, Vincent Guyader, Josiah Parry, and Sébastien Rochette. 2023. <em>Dockerfiler: Easy Dockerfile Creation from r</em>. <a href="https://github.com/ThinkR-open/dockerfiler">https://github.com/ThinkR-open/dockerfiler</a>.
</div>
<div id="ref-R-golem" class="csl-entry">
Fay, Colin, Vincent Guyader, Sébastien Rochette, and Cervan Girard. 2024. <em>Golem: A Framework for Robust Shiny Applications</em>. <a href="https://github.com/ThinkR-open/golem">https://github.com/ThinkR-open/golem</a>.
</div>
<div id="ref-R-crrri" class="csl-entry">
Lesur, Romain, and Christophe Dervieux. 2024. <em>Crrri: An Interface with Headless Chromium/Chrome</em>. <a href="https://rlesur.github.io/crrri/">https://rlesur.github.io/crrri/</a>.
</div>
<div id="ref-rockerverse" class="csl-entry">
Nüst, Daniel, Dirk Eddelbuettel, Dom Bennett, Robrecht Cannoodt, Dav Clark, Gergely Daroczi, Mark Edmondson, et al. 2020. <span>“The Rockerverse: Packages and Applications for Containerization with r.”</span>
</div>
<div id="ref-R-shinyloadtest" class="csl-entry">
Schloerke, Barret, Alan Dipert, and Barbara Borges. 2021. <em>Shinyloadtest: Load Test Shiny Applications</em>. <a href="https://rstudio.github.io/shinyloadtest/">https://rstudio.github.io/shinyloadtest/</a>.
</div>
<div id="ref-R-renv" class="csl-entry">
Ushey, Kevin, and Hadley Wickham. 2024. <em>Renv: Project Environments</em>. <a href="https://rstudio.github.io/renv/">https://rstudio.github.io/renv/</a>.
</div>
<div id="ref-R-testthat" class="csl-entry">
———. 2023b. <em>Testthat: Unit Testing for r</em>. <a href="https://testthat.r-lib.org">https://testthat.r-lib.org</a>.
</div>
<div id="ref-R-devtools" class="csl-entry">
Wickham, Hadley, Jim Hester, Winston Chang, and Jennifer Bryan. 2022. <em>Devtools: Tools to Make Developing r Packages Easier</em>. <a href="https://devtools.r-lib.org/">https://devtools.r-lib.org/</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="46">
<li id="fn46"><p>Popularity based on the number of reverse dependencies and suggests, as shown in <a href="https://cran.r-project.org/web/packages/testthat/index.html" class="uri">https://cran.r-project.org/web/packages/testthat/index.html</a>.<a href="build-yourself-safety-net.html#fnref46" class="footnote-back">↩︎</a></p></li>
<li id="fn47"><p>See <a href="https://github.com/puppeteer/puppeteer/issues/441" class="uri">https://github.com/puppeteer/puppeteer/issues/441</a> for the code to set the text input values.<a href="build-yourself-safety-net.html#fnref47" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<hr/>
<footer>
<a href="https://rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
<!--https://yihui.org/en/2018/09/target-blank/-->
<script>
  (function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="build-app-golem.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="version-control.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/11-step-by-step-secure.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
