<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 15 Common Application Caveats | Engineering Production-Grade Shiny Apps</title>
  <meta name="description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 15 Common Application Caveats | Engineering Production-Grade Shiny Apps" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg" />
  <meta property="og:description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="github-repo" content="ThinkR-open/engineering-shiny-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 15 Common Application Caveats | Engineering Production-Grade Shiny Apps" />
  
  <meta name="twitter:description" content="A book about engineering shiny application that will later be sent to production. This book cover project management, structuring your project, building a solid testing suite, and optimizing your codebase. We describe in this book a specific workflow: design, prototype, build, strengthen and deploy." />
  <meta name="twitter:image" content="https://raw.githubusercontent.com/ThinkR-open/engineering-shiny-book/master/img/engineering-shiny.jpg" />

<meta name="author" content="Colin Fay" />
<meta name="author" content="Sébastien Rochette" />
<meta name="author" content="Vincent Guyader" />
<meta name="author" content="Cervan Girard" />


<meta name="date" content="2024-03-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="need-for-optimization.html"/>
<link rel="next" href="optimizing-shiny-code.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-149994171-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-149994171-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/thinkr.css" type="text/css" />
<link rel="stylesheet" href="css/style_gitbook.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Production-Grade Shiny Apps</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audience-for-this-book"><i class="fa fa-check"></i>Audience for this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-production"><i class="fa fa-check"></i>What is “production”?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-authors"><i class="fa fa-check"></i>About the authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#colin-fay"><i class="fa fa-check"></i><a href="https://colinfay.me/">Colin Fay</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sébastien-rochette"><i class="fa fa-check"></i><a href="https://statnmap.com/">Sébastien Rochette</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#vincent-guyader"><i class="fa fa-check"></i><a href="https://twitter.com/VincentGuyader">Vincent Guyader</a></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#cervan-girard"><i class="fa fa-check"></i><a href="https://twitter.com/CervanGirard">Cervan Girard</a></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#disclaimer"><i class="fa fa-check"></i>Disclaimer</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#want-to-help"><i class="fa fa-check"></i>Want to help?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other resources</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#getting-started-with-shiny"><i class="fa fa-check"></i>Getting started with <code>{shiny}</code></a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#putting-shiny-into-production"><i class="fa fa-check"></i>Putting <code>{shiny}</code> into production</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#special-thanks"><i class="fa fa-check"></i>Special thanks</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors-to-this-book"><i class="fa fa-check"></i>Contributors to this book</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="foreword.html"><a href="foreword.html"><i class="fa fa-check"></i>Foreword</a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html"><i class="fa fa-check"></i>Application presentation</a>
<ul>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#hexmake"><i class="fa fa-check"></i><code>{hexmake}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#tidytuesday201942"><i class="fa fa-check"></i><code>{tidytuesday201942}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#minifying"><i class="fa fa-check"></i><code>{minifying}</code></a></li>
<li class="chapter" data-level="" data-path="application-presentation.html"><a href="application-presentation.html#other-applications"><i class="fa fa-check"></i>Other applications</a></li>
</ul></li>
<li class="part"><span><b>I Building Successful {shiny} Apps</b></span></li>
<li class="chapter" data-level="1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html"><i class="fa fa-check"></i><b>1</b> About Successful <code>{shiny}</code> Apps</a>
<ul>
<li class="chapter" data-level="1.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#a-very-short-introduction-to-shiny"><i class="fa fa-check"></i><b>1.1</b> A (very) short introduction to <code>{shiny}</code></a></li>
<li class="chapter" data-level="1.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#complex-shiny"><i class="fa fa-check"></i><b>1.2</b> What is a complex <code>{shiny}</code> application?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#reaching-the-cliff-of-complexity"><i class="fa fa-check"></i><b>1.2.1</b> Reaching the cliff of complexity</a></li>
<li class="chapter" data-level="1.2.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#balancing-complexities"><i class="fa fa-check"></i><b>1.2.2</b> Balancing complexities</a></li>
<li class="chapter" data-level="1.2.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#assessing-code-complexity"><i class="fa fa-check"></i><b>1.2.3</b> Assessing code complexity</a></li>
<li class="chapter" data-level="1.2.4" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#production-grade-software-engineering"><i class="fa fa-check"></i><b>1.2.4</b> Production-grade software engineering</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#what-is-a-successful-shiny-app"><i class="fa fa-check"></i><b>1.3</b> What is a successful <code>{shiny}</code> app?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-exists"><i class="fa fa-check"></i><b>1.3.1</b> It exists</a></li>
<li class="chapter" data-level="1.3.2" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-accurate"><i class="fa fa-check"></i><b>1.3.2</b> It is accurate</a></li>
<li class="chapter" data-level="1.3.3" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-usable"><i class="fa fa-check"></i><b>1.3.3</b> It is usable</a></li>
<li class="chapter" data-level="1.3.4" data-path="successful-shiny-app.html"><a href="successful-shiny-app.html#it-is-immortal"><i class="fa fa-check"></i><b>1.3.4</b> It is immortal</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="planning-ahead.html"><a href="planning-ahead.html"><i class="fa fa-check"></i><b>2</b> Planning Ahead</a>
<ul>
<li class="chapter" data-level="2.1" data-path="planning-ahead.html"><a href="planning-ahead.html#working-with-a-long-term-mindset"><i class="fa fa-check"></i><b>2.1</b> Working with a “long-term” mindset</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="planning-ahead.html"><a href="planning-ahead.html#prepare-for-success"><i class="fa fa-check"></i><b>2.1.1</b> Prepare for success</a></li>
<li class="chapter" data-level="2.1.2" data-path="planning-ahead.html"><a href="planning-ahead.html#develop-with-the-kiss-principle"><i class="fa fa-check"></i><b>2.1.2</b> Develop with the KISS principle</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="planning-ahead.html"><a href="planning-ahead.html#working-as-a-team-tools-and-structure"><i class="fa fa-check"></i><b>2.2</b> Working as a team: Tools and structure</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="planning-ahead.html"><a href="planning-ahead.html#from-the-tools-point-of-view"><i class="fa fa-check"></i><b>2.2.1</b> From the tools point of view</a></li>
<li class="chapter" data-level="2.2.2" data-path="planning-ahead.html"><a href="planning-ahead.html#from-the-team-point-of-view"><i class="fa fa-check"></i><b>2.2.2</b> From the team point of view</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="structuring-project.html"><a href="structuring-project.html"><i class="fa fa-check"></i><b>3</b> Structuring Your Project</a>
<ul>
<li class="chapter" data-level="3.1" data-path="structuring-project.html"><a href="structuring-project.html#shiny-app-as-a-package"><i class="fa fa-check"></i><b>3.1</b> <code>{shiny}</code> app as a package</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="structuring-project.html"><a href="structuring-project.html#what-is-in-a-production-grade-shiny-app"><i class="fa fa-check"></i><b>3.1.1</b> What is in a production-grade <code>{shiny}</code> app?</a></li>
<li class="chapter" data-level="3.1.2" data-path="structuring-project.html"><a href="structuring-project.html#resources"><i class="fa fa-check"></i><b>3.1.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="structuring-project.html"><a href="structuring-project.html#using-shiny-modules"><i class="fa fa-check"></i><b>3.2</b> Using <code>{shiny}</code> modules</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="structuring-project.html"><a href="structuring-project.html#why-shiny-modules"><i class="fa fa-check"></i><b>3.2.1</b> Why <code>{shiny}</code> modules?</a></li>
<li class="chapter" data-level="3.2.2" data-path="structuring-project.html"><a href="structuring-project.html#when-to-use-shiny-modules"><i class="fa fa-check"></i><b>3.2.2</b> When to use <code>{shiny}</code> modules</a></li>
<li class="chapter" data-level="3.2.3" data-path="structuring-project.html"><a href="structuring-project.html#a-practical-walkthrough"><i class="fa fa-check"></i><b>3.2.3</b> A practical walkthrough</a></li>
<li class="chapter" data-level="3.2.4" data-path="structuring-project.html"><a href="structuring-project.html#communication-between-modules"><i class="fa fa-check"></i><b>3.2.4</b> Communication between modules</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="structuring-project.html"><a href="structuring-project.html#structuring-your-app"><i class="fa fa-check"></i><b>3.3</b> Structuring your app</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="structuring-project.html"><a href="structuring-project.html#business-logic-and-application-logic"><i class="fa fa-check"></i><b>3.3.1</b> Business logic and application logic</a></li>
<li class="chapter" data-level="3.3.2" data-path="structuring-project.html"><a href="structuring-project.html#small-is-beautiful-bis-repetita"><i class="fa fa-check"></i><b>3.3.2</b> Small is beautiful (bis repetita)</a></li>
<li class="chapter" data-level="3.3.3" data-path="structuring-project.html"><a href="structuring-project.html#conventions-matter"><i class="fa fa-check"></i><b>3.3.3</b> Conventions matter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="golem.html"><a href="golem.html"><i class="fa fa-check"></i><b>4</b> Introduction to <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="golem.html"><a href="golem.html#what-is-golem"><i class="fa fa-check"></i><b>4.1</b> What is <code>{golem}</code>?</a></li>
<li class="chapter" data-level="4.2" data-path="golem.html"><a href="golem.html#understanding-golem-app-structure"><i class="fa fa-check"></i><b>4.2</b> Understanding <code>{golem}</code> app structure</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="golem.html"><a href="golem.html#description-and-namespace"><i class="fa fa-check"></i><b>4.2.1</b> <code>DESCRIPTION</code> and <code>NAMESPACE</code></a></li>
<li class="chapter" data-level="4.2.2" data-path="golem.html"><a href="golem.html#r"><i class="fa fa-check"></i><b>4.2.2</b> R/</a></li>
<li class="chapter" data-level="4.2.3" data-path="golem.html"><a href="golem.html#golem-config"><i class="fa fa-check"></i><b>4.2.3</b> <code>golem-config</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="golem.html"><a href="golem.html#instappwww"><i class="fa fa-check"></i><b>4.2.4</b> <code>inst/app/www/</code></a></li>
<li class="chapter" data-level="4.2.5" data-path="golem.html"><a href="golem.html#dev"><i class="fa fa-check"></i><b>4.2.5</b> <code>dev/</code></a></li>
<li class="chapter" data-level="4.2.6" data-path="golem.html"><a href="golem.html#man"><i class="fa fa-check"></i><b>4.2.6</b> <code>man/</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5</b> The Workflow</a>
<ul>
<li class="chapter" data-level="5.1" data-path="workflow.html"><a href="workflow.html#step-1-design"><i class="fa fa-check"></i><b>5.1</b> Step 1: Design</a></li>
<li class="chapter" data-level="5.2" data-path="workflow.html"><a href="workflow.html#step-2-prototype"><i class="fa fa-check"></i><b>5.2</b> Step 2: Prototype</a></li>
<li class="chapter" data-level="5.3" data-path="workflow.html"><a href="workflow.html#step-3-build"><i class="fa fa-check"></i><b>5.3</b> Step 3: Build</a></li>
<li class="chapter" data-level="5.4" data-path="workflow.html"><a href="workflow.html#step-4-strengthen"><i class="fa fa-check"></i><b>5.4</b> Step 4: Strengthen</a></li>
<li class="chapter" data-level="5.5" data-path="workflow.html"><a href="workflow.html#step-5-deploy"><i class="fa fa-check"></i><b>5.5</b> Step 5: Deploy</a></li>
</ul></li>
<li class="part"><span><b>II Step 1: Design</b></span></li>
<li class="chapter" data-level="6" data-path="ux-matters.html"><a href="ux-matters.html"><i class="fa fa-check"></i><b>6</b> UX Matters</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ux-matters.html"><a href="ux-matters.html#simplicity-is-gold"><i class="fa fa-check"></i><b>6.1</b> Simplicity is gold</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ux-matters.html"><a href="ux-matters.html#how-we-read-the-web-scanning-content"><i class="fa fa-check"></i><b>6.1.1</b> How we read the web: Scanning content</a></li>
<li class="chapter" data-level="6.1.2" data-path="ux-matters.html"><a href="ux-matters.html#building-a-self-evident-app-or-at-least-self-explanatory"><i class="fa fa-check"></i><b>6.1.2</b> Building a self-evident app (or at least self-explanatory)</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ux-matters.html"><a href="ux-matters.html#the-danger-of-feature-creep"><i class="fa fa-check"></i><b>6.2</b> The danger of feature-creep</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="ux-matters.html"><a href="ux-matters.html#what-is-feature-creep"><i class="fa fa-check"></i><b>6.2.1</b> What is feature-creep?</a></li>
<li class="chapter" data-level="6.2.2" data-path="ux-matters.html"><a href="ux-matters.html#too-much-reactivity"><i class="fa fa-check"></i><b>6.2.2</b> Too much reactivity</a></li>
<li class="chapter" data-level="6.2.3" data-path="ux-matters.html"><a href="ux-matters.html#too-much-interactivity"><i class="fa fa-check"></i><b>6.2.3</b> Too much interactivity</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="ux-matters.html"><a href="ux-matters.html#web-accessibility"><i class="fa fa-check"></i><b>6.3</b> Web accessibility</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="ux-matters.html"><a href="ux-matters.html#about-accessibility"><i class="fa fa-check"></i><b>6.3.1</b> About accessibility</a></li>
<li class="chapter" data-level="6.3.2" data-path="ux-matters.html"><a href="ux-matters.html#making-your-app-accessible"><i class="fa fa-check"></i><b>6.3.2</b> Making your app accessible</a></li>
<li class="chapter" data-level="6.3.3" data-path="ux-matters.html"><a href="ux-matters.html#evaluating-your-app-accessibility-and-further-reading"><i class="fa fa-check"></i><b>6.3.3</b> Evaluating your app accessibility and further reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html"><i class="fa fa-check"></i><b>7</b> Don’t Rush into Coding</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#designing-before-coding"><i class="fa fa-check"></i><b>7.1</b> Designing before coding</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#the-urge-to-code"><i class="fa fa-check"></i><b>7.1.1</b> The urge to code</a></li>
<li class="chapter" data-level="7.1.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#knowing-where-to-search"><i class="fa fa-check"></i><b>7.1.2</b> Knowing where to search</a></li>
<li class="chapter" data-level="7.1.3" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#about-concept-map"><i class="fa fa-check"></i><b>7.1.3</b> About concept map</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#ask-questions"><i class="fa fa-check"></i><b>7.2</b> Ask questions</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#about-the-end-users"><i class="fa fa-check"></i><b>7.2.1</b> About the end users</a></li>
<li class="chapter" data-level="7.2.2" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#building-personas"><i class="fa fa-check"></i><b>7.2.2</b> Building personas</a></li>
<li class="chapter" data-level="7.2.3" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#pre-existing-code-base"><i class="fa fa-check"></i><b>7.2.3</b> Pre-existing code-base</a></li>
<li class="chapter" data-level="7.2.4" data-path="dont-rush-into-coding.html"><a href="dont-rush-into-coding.html#deployment"><i class="fa fa-check"></i><b>7.2.4</b> Deployment</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Step 2: Prototype</b></span></li>
<li class="chapter" data-level="8" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html"><i class="fa fa-check"></i><b>8</b> Setting up for Success with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#create-a-golem"><i class="fa fa-check"></i><b>8.1</b> Create a <code>{golem}</code></a></li>
<li class="chapter" data-level="8.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#setting-things-up-with-dev01_start.r"><i class="fa fa-check"></i><b>8.2</b> Setting things up with <code>dev/01_start.R</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#fill-the-description-and-set-options"><i class="fa fa-check"></i><b>8.2.1</b> Fill the DESCRIPTION and set options</a></li>
<li class="chapter" data-level="8.2.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#set-common-files"><i class="fa fa-check"></i><b>8.2.2</b> Set common files</a></li>
<li class="chapter" data-level="8.2.3" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#use-recommended-elements"><i class="fa fa-check"></i><b>8.2.3</b> Use recommended elements</a></li>
<li class="chapter" data-level="8.2.4" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-utility-functions"><i class="fa fa-check"></i><b>8.2.4</b> Add utility functions</a></li>
<li class="chapter" data-level="8.2.5" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#changing-the-favicon"><i class="fa fa-check"></i><b>8.2.5</b> Changing the favicon</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#setting-infrastructure-for-prototyping"><i class="fa fa-check"></i><b>8.3</b> Setting infrastructure for prototyping</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-modules-in-dev02_dev.r"><i class="fa fa-check"></i><b>8.3.1</b> Add modules in <code>dev/02_dev.R</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="setting-up-for-success.html"><a href="setting-up-for-success.html#add-css-and-js-files"><i class="fa fa-check"></i><b>8.3.2</b> Add CSS and JS files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="building-ispum-app.html"><a href="building-ispum-app.html"><i class="fa fa-check"></i><b>9</b> Building an “ipsum-app”</a>
<ul>
<li class="chapter" data-level="9.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototyping-is-crucial"><i class="fa fa-check"></i><b>9.1</b> Prototyping is crucial</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototype-then-polish"><i class="fa fa-check"></i><b>9.1.1</b> Prototype, then polish</a></li>
<li class="chapter" data-level="9.1.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#the-ui-first-approach"><i class="fa fa-check"></i><b>9.1.2</b> The “UI first” approach</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#prototyping-shiny"><i class="fa fa-check"></i><b>9.2</b> Prototyping <code>{shiny}</code></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#fast-ui-prototyping-with-shinipsum"><i class="fa fa-check"></i><b>9.2.1</b> Fast UI prototyping with <code>{shinipsum}</code></a></li>
<li class="chapter" data-level="9.2.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#using-fakir-for-fake-data-generation"><i class="fa fa-check"></i><b>9.2.2</b> Using <code>{fakir}</code> for fake data generation</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="building-ispum-app.html"><a href="building-ispum-app.html#proto-rmdfirst"><i class="fa fa-check"></i><b>9.3</b> Building with RMarkdown</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="building-ispum-app.html"><a href="building-ispum-app.html#define-the-content-of-the-application"><i class="fa fa-check"></i><b>9.3.1</b> Define the content of the application</a></li>
<li class="chapter" data-level="9.3.2" data-path="building-ispum-app.html"><a href="building-ispum-app.html#using-the-rmd-files-as-a-laboratory-notebook"><i class="fa fa-check"></i><b>9.3.2</b> Using the Rmd files as a laboratory notebook</a></li>
<li class="chapter" data-level="9.3.3" data-path="building-ispum-app.html"><a href="building-ispum-app.html#rmd-vignettes-and-documentation-first"><i class="fa fa-check"></i><b>9.3.3</b> Rmd, Vignettes, and documentation first</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Step 3: Build</b></span></li>
<li class="chapter" data-level="10" data-path="build-app-golem.html"><a href="build-app-golem.html"><i class="fa fa-check"></i><b>10</b> Building the App with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="build-app-golem.html"><a href="build-app-golem.html#add-dependencies"><i class="fa fa-check"></i><b>10.1</b> Add dependencies</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="build-app-golem.html"><a href="build-app-golem.html#package-dependencies"><i class="fa fa-check"></i><b>10.1.1</b> Package dependencies</a></li>
<li class="chapter" data-level="10.1.2" data-path="build-app-golem.html"><a href="build-app-golem.html#importing-packages-and-functions"><i class="fa fa-check"></i><b>10.1.2</b> Importing packages and functions</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="build-app-golem.html"><a href="build-app-golem.html#submodules-and-utility-functions"><i class="fa fa-check"></i><b>10.2</b> Submodules and utility functions</a></li>
<li class="chapter" data-level="10.3" data-path="build-app-golem.html"><a href="build-app-golem.html#add-tests"><i class="fa fa-check"></i><b>10.3</b> Add tests</a></li>
<li class="chapter" data-level="10.4" data-path="build-app-golem.html"><a href="build-app-golem.html#documentation-and-code-coverage"><i class="fa fa-check"></i><b>10.4</b> Documentation and code coverage</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="build-app-golem.html"><a href="build-app-golem.html#vignette"><i class="fa fa-check"></i><b>10.4.1</b> Vignette</a></li>
<li class="chapter" data-level="10.4.2" data-path="build-app-golem.html"><a href="build-app-golem.html#code-coverage-and-continuous-integration"><i class="fa fa-check"></i><b>10.4.2</b> Code coverage and continuous integration</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="build-app-golem.html"><a href="build-app-golem.html#using-golem-dev-functions"><i class="fa fa-check"></i><b>10.5</b> Using <code>{golem}</code> dev functions</a></li>
</ul></li>
<li class="part"><span><b>V Step 4: Strengthen</b></span></li>
<li class="chapter" data-level="11" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html"><i class="fa fa-check"></i><b>11</b> Build Yourself a Safety Net</a>
<ul>
<li class="chapter" data-level="11.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-your-app"><i class="fa fa-check"></i><b>11.1</b> Testing your app</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-business-logic"><i class="fa fa-check"></i><b>11.1.1</b> Testing the business logic</a></li>
<li class="chapter" data-level="11.1.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#shinytestserver"><i class="fa fa-check"></i><b>11.1.2</b> <code>shiny::testServer()</code></a></li>
<li class="chapter" data-level="11.1.3" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-interactive-logic"><i class="fa fa-check"></i><b>11.1.3</b> Testing the interactive logic</a></li>
<li class="chapter" data-level="11.1.4" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#testing-the-app-load"><i class="fa fa-check"></i><b>11.1.4</b> Testing the app load</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#a-reproducible-environment"><i class="fa fa-check"></i><b>11.2</b> A reproducible environment</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#renv"><i class="fa fa-check"></i><b>11.2.1</b> <code>{renv}</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="build-yourself-safety-net.html"><a href="build-yourself-safety-net.html#docker"><i class="fa fa-check"></i><b>11.2.2</b> Docker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>12</b> Version Control</a>
<ul>
<li class="chapter" data-level="12.1" data-path="version-control.html"><a href="version-control.html#version-control-git"><i class="fa fa-check"></i><b>12.1</b> Using version control with <code>Git</code></a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="version-control.html"><a href="version-control.html#why-version-control"><i class="fa fa-check"></i><b>12.1.1</b> Why version control?</a></li>
<li class="chapter" data-level="12.1.2" data-path="version-control.html"><a href="version-control.html#git-basics-add---commit---push---pull"><i class="fa fa-check"></i><b>12.1.2</b> <code>Git</code> basics: <code>add</code> - <code>commit</code> - <code>push</code> - <code>pull</code></a></li>
<li class="chapter" data-level="12.1.3" data-path="version-control.html"><a href="version-control.html#about-branches"><i class="fa fa-check"></i><b>12.1.3</b> About branches</a></li>
<li class="chapter" data-level="12.1.4" data-path="version-control.html"><a href="version-control.html#issues"><i class="fa fa-check"></i><b>12.1.4</b> Issues</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="version-control.html"><a href="version-control.html#git-integration"><i class="fa fa-check"></i><b>12.2</b> <code>Git</code> integration</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="version-control.html"><a href="version-control.html#with-rstudio"><i class="fa fa-check"></i><b>12.2.1</b> With RStudio</a></li>
<li class="chapter" data-level="12.2.2" data-path="version-control.html"><a href="version-control.html#as-part-of-a-larger-world"><i class="fa fa-check"></i><b>12.2.2</b> As part of a larger world</a></li>
<li class="chapter" data-level="12.2.3" data-path="version-control.html"><a href="version-control.html#about-git-flow"><i class="fa fa-check"></i><b>12.2.3</b> About <code>git-flow</code></a></li>
<li class="chapter" data-level="12.2.4" data-path="version-control.html"><a href="version-control.html#further-readings-on-git"><i class="fa fa-check"></i><b>12.2.4</b> Further readings on <code>Git</code></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="version-control.html"><a href="version-control.html#automated-testing"><i class="fa fa-check"></i><b>12.3</b> Automated testing</a></li>
</ul></li>
<li class="part"><span><b>VI Step 5: Deploy</b></span></li>
<li class="chapter" data-level="13" data-path="deploy.html"><a href="deploy.html"><i class="fa fa-check"></i><b>13</b> Deploy Your Application</a>
<ul>
<li class="chapter" data-level="13.1" data-path="deploy.html"><a href="deploy.html#before-deployment-checklist"><i class="fa fa-check"></i><b>13.1</b> Before deployment checklist</a></li>
<li class="chapter" data-level="13.2" data-path="deploy.html"><a href="deploy.html#sharing-your-app-as-a-package"><i class="fa fa-check"></i><b>13.2</b> Sharing your app as a package</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="deploy.html"><a href="deploy.html#install-on-your-machine"><i class="fa fa-check"></i><b>13.2.1</b> Install on your machine</a></li>
<li class="chapter" data-level="13.2.2" data-path="deploy.html"><a href="deploy.html#share-as-a-built-package"><i class="fa fa-check"></i><b>13.2.2</b> Share as a built package</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="deploy.html"><a href="deploy.html#deploying-apps-with-golem"><i class="fa fa-check"></i><b>13.3</b> Deploying apps with <code>{golem}</code></a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="deploy.html"><a href="deploy.html#rstudio-environments"><i class="fa fa-check"></i><b>13.3.1</b> RStudio environments</a></li>
<li class="chapter" data-level="13.3.2" data-path="deploy.html"><a href="deploy.html#docker-1"><i class="fa fa-check"></i><b>13.3.2</b> Docker</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Optimizing</b></span></li>
<li class="chapter" data-level="14" data-path="need-for-optimization.html"><a href="need-for-optimization.html"><i class="fa fa-check"></i><b>14</b> The Need for Optimization</a>
<ul>
<li class="chapter" data-level="14.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#build-first-then-optimize"><i class="fa fa-check"></i><b>14.1</b> Build first, then optimize</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#identifying-bottlenecks"><i class="fa fa-check"></i><b>14.1.1</b> Identifying bottlenecks</a></li>
<li class="chapter" data-level="14.1.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#do-you-need-faster-functions"><i class="fa fa-check"></i><b>14.1.2</b> Do you need faster functions?</a></li>
<li class="chapter" data-level="14.1.3" data-path="need-for-optimization.html"><a href="need-for-optimization.html#dont-sacrifice-readability"><i class="fa fa-check"></i><b>14.1.3</b> Don’t sacrifice readability</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#tools-for-profiling"><i class="fa fa-check"></i><b>14.2</b> Tools for profiling</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="need-for-optimization.html"><a href="need-for-optimization.html#profiling-r-code"><i class="fa fa-check"></i><b>14.2.1</b> Profiling R code</a></li>
<li class="chapter" data-level="14.2.2" data-path="need-for-optimization.html"><a href="need-for-optimization.html#profiling-shiny"><i class="fa fa-check"></i><b>14.2.2</b> Profiling <code>{shiny}</code></a></li>
<li class="chapter" data-level="14.2.3" data-path="need-for-optimization.html"><a href="need-for-optimization.html#more-resources-about-web-page-performance"><i class="fa fa-check"></i><b>14.2.3</b> More resources about web-page performance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="common-app-caveats.html"><a href="common-app-caveats.html"><i class="fa fa-check"></i><b>15</b> Common Application Caveats</a>
<ul>
<li class="chapter" data-level="15.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reactivity-anti-patterns"><i class="fa fa-check"></i><b>15.1</b> Reactivity anti-patterns</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reactivity-is-awesome-until-it-is-not"><i class="fa fa-check"></i><b>15.1.1</b> Reactivity is awesome… until it is not</a></li>
<li class="chapter" data-level="15.1.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#observe-vs-observeevent"><i class="fa fa-check"></i><b>15.1.2</b> <code>observe</code> vs <code>observeEvent</code></a></li>
<li class="chapter" data-level="15.1.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#building-triggers-and-watchers"><i class="fa fa-check"></i><b>15.1.3</b> Building triggers and watchers</a></li>
<li class="chapter" data-level="15.1.4" data-path="common-app-caveats.html"><a href="common-app-caveats.html#using-r6-as-data-storage"><i class="fa fa-check"></i><b>15.1.4</b> Using R6 as data storage</a></li>
<li class="chapter" data-level="15.1.5" data-path="common-app-caveats.html"><a href="common-app-caveats.html#logging-reactivity-with-whereami"><i class="fa fa-check"></i><b>15.1.5</b> Logging reactivity with <code>{whereami}</code></a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#r-does-too-much"><i class="fa fa-check"></i><b>15.2</b> R does too much</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#rendering-the-ui-from-the-server-side"><i class="fa fa-check"></i><b>15.2.1</b> Rendering the UI from the server side</a></li>
<li class="chapter" data-level="15.2.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#too-much-data-in-memory"><i class="fa fa-check"></i><b>15.2.2</b> Too much data in memory</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reading-data"><i class="fa fa-check"></i><b>15.3</b> Reading data</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="common-app-caveats.html"><a href="common-app-caveats.html#including-data-in-your-application"><i class="fa fa-check"></i><b>15.3.1</b> Including data in your application</a></li>
<li class="chapter" data-level="15.3.2" data-path="common-app-caveats.html"><a href="common-app-caveats.html#reading-external-datasets"><i class="fa fa-check"></i><b>15.3.2</b> Reading external datasets</a></li>
<li class="chapter" data-level="15.3.3" data-path="common-app-caveats.html"><a href="common-app-caveats.html#using-external-databases"><i class="fa fa-check"></i><b>15.3.3</b> Using external databases</a></li>
<li class="chapter" data-level="15.3.4" data-path="common-app-caveats.html"><a href="common-app-caveats.html#data-source-checklist"><i class="fa fa-check"></i><b>15.3.4</b> Data-source checklist</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html"><i class="fa fa-check"></i><b>16</b> Optimizing <code>{shiny}</code> Code</a>
<ul>
<li class="chapter" data-level="16.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#optimizing-r-code"><i class="fa fa-check"></i><b>16.1</b> Optimizing R code</a></li>
<li class="chapter" data-level="16.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-elements"><i class="fa fa-check"></i><b>16.2</b> Caching elements</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#what-is-caching"><i class="fa fa-check"></i><b>16.2.1</b> What is caching?</a></li>
<li class="chapter" data-level="16.2.2" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#native-caching-in-r"><i class="fa fa-check"></i><b>16.2.2</b> Native caching in R</a></li>
<li class="chapter" data-level="16.2.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#caching-in-shiny"><i class="fa fa-check"></i><b>16.2.3</b> Caching in <code>{shiny}</code></a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#asynchronous-in-shiny"><i class="fa fa-check"></i><b>16.3</b> Asynchronous in <code>{shiny}</code></a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="optimizing-shiny-code.html"><a href="optimizing-shiny-code.html#how-to"><i class="fa fa-check"></i><b>16.3.1</b> How to</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="using-javascript.html"><a href="using-javascript.html"><i class="fa fa-check"></i><b>17</b> Using JavaScript</a>
<ul>
<li class="chapter" data-level="17.1" data-path="using-javascript.html"><a href="using-javascript.html#introduction-1"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="using-javascript.html"><a href="using-javascript.html#a-quick-introduction-to-javascript"><i class="fa fa-check"></i><b>17.2</b> A quick introduction to JavaScript</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="using-javascript.html"><a href="using-javascript.html#about-javascript"><i class="fa fa-check"></i><b>17.2.1</b> About JavaScript</a></li>
<li class="chapter" data-level="17.2.2" data-path="using-javascript.html"><a href="using-javascript.html#including-javascript-code-in-your-app"><i class="fa fa-check"></i><b>17.2.2</b> Including JavaScript code in your app</a></li>
<li class="chapter" data-level="17.2.3" data-path="using-javascript.html"><a href="using-javascript.html#understanding-html-class-and-id"><i class="fa fa-check"></i><b>17.2.3</b> Understanding HTML, class, and id</a></li>
<li class="chapter" data-level="17.2.4" data-path="using-javascript.html"><a href="using-javascript.html#querying-in-vanilla-javascript"><i class="fa fa-check"></i><b>17.2.4</b> Querying in Vanilla JavaScript</a></li>
<li class="chapter" data-level="17.2.5" data-path="using-javascript.html"><a href="using-javascript.html#about-dom-events"><i class="fa fa-check"></i><b>17.2.5</b> About DOM events</a></li>
<li class="chapter" data-level="17.2.6" data-path="using-javascript.html"><a href="using-javascript.html#about-jquery-and-jquery-selectors"><i class="fa fa-check"></i><b>17.2.6</b> About <code>jQuery</code> and <code>jQuery</code> selectors</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="using-javascript.html"><a href="using-javascript.html#client-side-javascript"><i class="fa fa-check"></i><b>17.3</b> Client-side JavaScript</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="using-javascript.html"><a href="using-javascript.html#common-patterns"><i class="fa fa-check"></i><b>17.3.1</b> Common patterns</a></li>
<li class="chapter" data-level="17.3.2" data-path="using-javascript.html"><a href="using-javascript.html#where-to-put-them-back-to-javascript-events"><i class="fa fa-check"></i><b>17.3.2</b> Where to put them: Back to JavaScript Events</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="using-javascript.html"><a href="using-javascript.html#javascript---shiny-communication"><i class="fa fa-check"></i><b>17.4</b> JavaScript &lt;-&gt; <code>{shiny}</code> communication</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="using-javascript.html"><a href="using-javascript.html#from-r-to-javascript"><i class="fa fa-check"></i><b>17.4.1</b> From R to JavaScript</a></li>
<li class="chapter" data-level="17.4.2" data-path="using-javascript.html"><a href="using-javascript.html#from-javascript-to-r"><i class="fa fa-check"></i><b>17.4.2</b> From JavaScript to R</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="using-javascript.html"><a href="using-javascript.html#about-shinyjs-js-functions"><i class="fa fa-check"></i><b>17.5</b> About <code>{shinyjs}</code> JS functions</a></li>
<li class="chapter" data-level="17.6" data-path="using-javascript.html"><a href="using-javascript.html#one-last-thing-api-calls"><i class="fa fa-check"></i><b>17.6</b> One last thing: API calls</a></li>
<li class="chapter" data-level="17.7" data-path="using-javascript.html"><a href="using-javascript.html#learn-more-about-javascript"><i class="fa fa-check"></i><b>17.7</b> Learn more about JavaScript</a>
<ul>
<li class="chapter" data-level="17.7.1" data-path="using-javascript.html"><a href="using-javascript.html#shiny-and-javascript"><i class="fa fa-check"></i><b>17.7.1</b> <code>{shiny}</code> and JavaScript</a></li>
<li class="chapter" data-level="17.7.2" data-path="using-javascript.html"><a href="using-javascript.html#javascript-basics"><i class="fa fa-check"></i><b>17.7.2</b> JavaScript basics</a></li>
<li class="chapter" data-level="17.7.3" data-path="using-javascript.html"><a href="using-javascript.html#jquery"><i class="fa fa-check"></i><b>17.7.3</b> jQuery</a></li>
<li class="chapter" data-level="17.7.4" data-path="using-javascript.html"><a href="using-javascript.html#intermediateadvanced-javascript"><i class="fa fa-check"></i><b>17.7.4</b> Intermediate/advanced JavaScript</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="css.html"><a href="css.html"><i class="fa fa-check"></i><b>18</b> A Gentle Introduction to CSS</a>
<ul>
<li class="chapter" data-level="18.1" data-path="css.html"><a href="css.html#what-is-css"><i class="fa fa-check"></i><b>18.1</b> What is CSS?</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="css.html"><a href="css.html#about-css"><i class="fa fa-check"></i><b>18.1.1</b> About CSS</a></li>
<li class="chapter" data-level="18.1.2" data-path="css.html"><a href="css.html#shinys-default-fluidpage"><i class="fa fa-check"></i><b>18.1.2</b> <code>{shiny}</code>’s default: <code>fluidPage()</code></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="css.html"><a href="css.html#getting-started-with-css"><i class="fa fa-check"></i><b>18.2</b> Getting started with CSS</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="css.html"><a href="css.html#about-css-syntax"><i class="fa fa-check"></i><b>18.2.1</b> About CSS syntax</a></li>
<li class="chapter" data-level="18.2.2" data-path="css.html"><a href="css.html#css-selectors"><i class="fa fa-check"></i><b>18.2.2</b> CSS selectors</a></li>
<li class="chapter" data-level="18.2.3" data-path="css.html"><a href="css.html#css-properties"><i class="fa fa-check"></i><b>18.2.3</b> CSS properties</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="css.html"><a href="css.html#integrate-css-files-in-your-shiny-app"><i class="fa fa-check"></i><b>18.3</b> Integrate CSS files in your <code>{shiny}</code> app</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="css.html"><a href="css.html#inline-css"><i class="fa fa-check"></i><b>18.3.1</b> Inline CSS</a></li>
<li class="chapter" data-level="18.3.2" data-path="css.html"><a href="css.html#writing-in-a-tagsstyle"><i class="fa fa-check"></i><b>18.3.2</b> Writing in a <code>tags$style()</code></a></li>
<li class="chapter" data-level="18.3.3" data-path="css.html"><a href="css.html#including-external-files"><i class="fa fa-check"></i><b>18.3.3</b> Including external files</a></li>
<li class="chapter" data-level="18.3.4" data-path="css.html"><a href="css.html#using-r-packages"><i class="fa fa-check"></i><b>18.3.4</b> Using R packages</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="css.html"><a href="css.html#external-resources"><i class="fa fa-check"></i><b>18.4</b> External resources</a></li>
</ul></li>
<li class="part"><span><b>VIII Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html"><i class="fa fa-check"></i>Appendix A - Use Case: Building an App from Start to Finish</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#about-the-application"><i class="fa fa-check"></i>About the application</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-1-design-1"><i class="fa fa-check"></i>Step 1: Design</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deciphering-the-specifications"><i class="fa fa-check"></i>Deciphering the specifications</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#building-a-concept-map"><i class="fa fa-check"></i>Building a concept map</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#asking-questions"><i class="fa fa-check"></i>Asking questions</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#building-personas-1"><i class="fa fa-check"></i>Building personas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-2-prototyping"><i class="fa fa-check"></i>Step 2: Prototyping</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#back-end-in-rmd"><i class="fa fa-check"></i>Back-end in Rmd</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#ui-prototyping"><i class="fa fa-check"></i>UI prototyping</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-3-build-1"><i class="fa fa-check"></i>Step 3: Build</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-4-strengthen-1"><i class="fa fa-check"></i>Step 4: Strengthen</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#step-5-deploy-1"><i class="fa fa-check"></i>Step 5: Deploy</a>
<ul>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#before-deployment-checklist-1"><i class="fa fa-check"></i>Before deployment checklist</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-as-a-tar.gz"><i class="fa fa-check"></i>Deploy as a tar.gz</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-on-rstudio-connect"><i class="fa fa-check"></i>Deploy on RStudio Connect</a></li>
<li class="chapter" data-level="" data-path="appendix-a---use-case-building-an-app-from-start-to-finish.html"><a href="appendix-a---use-case-building-an-app-from-start-to-finish.html#deploy-with-docker"><i class="fa fa-check"></i>Deploy with Docker</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix-b---session-info.html"><a href="appendix-b---session-info.html"><i class="fa fa-check"></i>Appendix B - Session Info</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://rtask.thinkr.fr">A book by the ThinkR team</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Production-Grade Shiny Apps</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="common-app-caveats" class="section level1 hasAnchor" number="15">
<h1><span class="header-section-number">Chapter 15</span> Common Application Caveats<a href="common-app-caveats.html#common-app-caveats" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="reactivity-anti-patterns" class="section level2 hasAnchor" number="15.1">
<h2><span class="header-section-number">15.1</span> Reactivity anti-patterns<a href="common-app-caveats.html#reactivity-anti-patterns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="reactivity-is-awesome-until-it-is-not" class="section level3 hasAnchor" number="15.1.1">
<h3><span class="header-section-number">15.1.1</span> Reactivity is awesome… until it is not<a href="common-app-caveats.html#reactivity-is-awesome-until-it-is-not" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s face it, reactivity is awesome… until it is not.
Reactivity is a common source of confusion for beginners, and a common source of bugs and bottlenecks, even for seasoned <code>{shiny}</code> developers.
Most of the time, issues come from the fact that <strong>there is too much reactivity</strong>, <em>i.e.</em> we build apps where too many things happen, and some things are updated way more often than they should be, and computations are performed when they should not be, and in the end we have a hard time understanding what is really happening inside our application.</p>
<p>Of course, it is a nice feature to make everything react instantly to changes, but when building larger apps it is easy to create monsters, i.e. complicated, messy, reactive graphs where everything is updated too much and too often.
Or worse, we generate endless reactive loops, aka “the reactive inferno” where A invalidates B which invalidates C which invalidates A which invalidates B which invalidates C, and so on.</p>
<p>Let’s take a small example of a reactive inferno:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="common-app-caveats.html#cb255-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb255-2"><a href="common-app-caveats.html#cb255-2" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb255-3"><a href="common-app-caveats.html#cb255-3" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb255-4"><a href="common-app-caveats.html#cb255-4" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb255-5"><a href="common-app-caveats.html#cb255-5" tabindex="-1"></a>    <span class="co"># Adding a first input which allow </span></span>
<span id="cb255-6"><a href="common-app-caveats.html#cb255-6" tabindex="-1"></a>    <span class="co"># to select a specific date</span></span>
<span id="cb255-7"><a href="common-app-caveats.html#cb255-7" tabindex="-1"></a>    <span class="fu">dateInput</span>(</span>
<span id="cb255-8"><a href="common-app-caveats.html#cb255-8" tabindex="-1"></a>      <span class="st">&quot;date&quot;</span>, </span>
<span id="cb255-9"><a href="common-app-caveats.html#cb255-9" tabindex="-1"></a>      <span class="st">&quot;choose a date&quot;</span></span>
<span id="cb255-10"><a href="common-app-caveats.html#cb255-10" tabindex="-1"></a>    ), </span>
<span id="cb255-11"><a href="common-app-caveats.html#cb255-11" tabindex="-1"></a>    <span class="co"># Adding a second input allowing </span></span>
<span id="cb255-12"><a href="common-app-caveats.html#cb255-12" tabindex="-1"></a>    <span class="co"># to specify a year</span></span>
<span id="cb255-13"><a href="common-app-caveats.html#cb255-13" tabindex="-1"></a>    <span class="fu">selectInput</span>(</span>
<span id="cb255-14"><a href="common-app-caveats.html#cb255-14" tabindex="-1"></a>      <span class="st">&quot;year&quot;</span>, </span>
<span id="cb255-15"><a href="common-app-caveats.html#cb255-15" tabindex="-1"></a>      <span class="st">&quot;Choose a year&quot;</span>, </span>
<span id="cb255-16"><a href="common-app-caveats.html#cb255-16" tabindex="-1"></a>      <span class="at">choices =</span> <span class="dv">2010</span><span class="sc">:</span><span class="dv">2030</span></span>
<span id="cb255-17"><a href="common-app-caveats.html#cb255-17" tabindex="-1"></a>    )</span>
<span id="cb255-18"><a href="common-app-caveats.html#cb255-18" tabindex="-1"></a>  )</span>
<span id="cb255-19"><a href="common-app-caveats.html#cb255-19" tabindex="-1"></a>}</span>
<span id="cb255-20"><a href="common-app-caveats.html#cb255-20" tabindex="-1"></a></span>
<span id="cb255-21"><a href="common-app-caveats.html#cb255-21" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb255-22"><a href="common-app-caveats.html#cb255-22" tabindex="-1"></a>  input, </span>
<span id="cb255-23"><a href="common-app-caveats.html#cb255-23" tabindex="-1"></a>  output, </span>
<span id="cb255-24"><a href="common-app-caveats.html#cb255-24" tabindex="-1"></a>  session</span>
<span id="cb255-25"><a href="common-app-caveats.html#cb255-25" tabindex="-1"></a>){</span>
<span id="cb255-26"><a href="common-app-caveats.html#cb255-26" tabindex="-1"></a>  <span class="co"># We want the year to be update whenever </span></span>
<span id="cb255-27"><a href="common-app-caveats.html#cb255-27" tabindex="-1"></a>  <span class="co"># the dateInput is updated</span></span>
<span id="cb255-28"><a href="common-app-caveats.html#cb255-28" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>date , {</span>
<span id="cb255-29"><a href="common-app-caveats.html#cb255-29" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(</span>
<span id="cb255-30"><a href="common-app-caveats.html#cb255-30" tabindex="-1"></a>      session, </span>
<span id="cb255-31"><a href="common-app-caveats.html#cb255-31" tabindex="-1"></a>      <span class="st">&quot;year&quot;</span>, </span>
<span id="cb255-32"><a href="common-app-caveats.html#cb255-32" tabindex="-1"></a>      <span class="at">selected =</span> <span class="fu">year</span>(input<span class="sc">$</span>date)</span>
<span id="cb255-33"><a href="common-app-caveats.html#cb255-33" tabindex="-1"></a>    )</span>
<span id="cb255-34"><a href="common-app-caveats.html#cb255-34" tabindex="-1"></a>  })</span>
<span id="cb255-35"><a href="common-app-caveats.html#cb255-35" tabindex="-1"></a>  </span>
<span id="cb255-36"><a href="common-app-caveats.html#cb255-36" tabindex="-1"></a>  <span class="co"># We want the date to be update whenever </span></span>
<span id="cb255-37"><a href="common-app-caveats.html#cb255-37" tabindex="-1"></a>  <span class="co"># the selectInput is updated</span></span>
<span id="cb255-38"><a href="common-app-caveats.html#cb255-38" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>year , {</span>
<span id="cb255-39"><a href="common-app-caveats.html#cb255-39" tabindex="-1"></a>    <span class="fu">updateDateInput</span>(</span>
<span id="cb255-40"><a href="common-app-caveats.html#cb255-40" tabindex="-1"></a>      session, </span>
<span id="cb255-41"><a href="common-app-caveats.html#cb255-41" tabindex="-1"></a>      <span class="st">&quot;date&quot;</span>, </span>
<span id="cb255-42"><a href="common-app-caveats.html#cb255-42" tabindex="-1"></a>      <span class="at">value =</span> lubridate<span class="sc">::</span><span class="fu">as_date</span>(</span>
<span id="cb255-43"><a href="common-app-caveats.html#cb255-43" tabindex="-1"></a>        <span class="fu">sprintf</span>(<span class="st">&quot;%s-01-01&quot;</span>, input<span class="sc">$</span>year)</span>
<span id="cb255-44"><a href="common-app-caveats.html#cb255-44" tabindex="-1"></a>      )</span>
<span id="cb255-45"><a href="common-app-caveats.html#cb255-45" tabindex="-1"></a>    )</span>
<span id="cb255-46"><a href="common-app-caveats.html#cb255-46" tabindex="-1"></a>  })</span>
<span id="cb255-47"><a href="common-app-caveats.html#cb255-47" tabindex="-1"></a>  </span>
<span id="cb255-48"><a href="common-app-caveats.html#cb255-48" tabindex="-1"></a>}</span>
<span id="cb255-49"><a href="common-app-caveats.html#cb255-49" tabindex="-1"></a></span>
<span id="cb255-50"><a href="common-app-caveats.html#cb255-50" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Here, we want to handle something pretty common:</p>
<ul>
<li>The user can pick a <code>date</code> and the <code>year</code> input is updated.</li>
<li>And the other way round: when the <code>year</code> input changes, the <code>date</code> is updated too.</li>
</ul>
<p>But if you try to run this in your console, it will end as a reactive inferno: date updates year that updates date that updates year, and so on.</p>
<p>And the more you work on your app, the more complex it gets, and the more you will be likely to end up in a reactive inferno.
In this section, we will deal with reactivity, how to have more control over it, and how to share data across modules without relying on passing along reactive objects.</p>
<p>This application is in this state of infinite loop because it starts in a mutually inconsistent state: the <code>dateInput()</code> year value is the current year, while the <code>selectInput()</code> value is <code>2010</code>.
One way to solve this is to add some extra logic to the app by selecting the current year for <code>selectInput()</code>, and adding an <code>if</code> statement in the <code>observeEvent(input$year, {})</code>, as shown below.<a href="#fn59" class="footnote-ref" id="fnref59"><sup>59</sup></a></p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="common-app-caveats.html#cb256-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb256-2"><a href="common-app-caveats.html#cb256-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb256-3"><a href="common-app-caveats.html#cb256-3" tabindex="-1"></a>  <span class="fu">dateInput</span>(</span>
<span id="cb256-4"><a href="common-app-caveats.html#cb256-4" tabindex="-1"></a>    <span class="st">&quot;date&quot;</span>, </span>
<span id="cb256-5"><a href="common-app-caveats.html#cb256-5" tabindex="-1"></a>    <span class="st">&quot;choose a date&quot;</span></span>
<span id="cb256-6"><a href="common-app-caveats.html#cb256-6" tabindex="-1"></a>    ), </span>
<span id="cb256-7"><a href="common-app-caveats.html#cb256-7" tabindex="-1"></a>  <span class="fu">selectInput</span>(</span>
<span id="cb256-8"><a href="common-app-caveats.html#cb256-8" tabindex="-1"></a>    <span class="st">&quot;year&quot;</span>, </span>
<span id="cb256-9"><a href="common-app-caveats.html#cb256-9" tabindex="-1"></a>    <span class="st">&quot;Choose a year&quot;</span>, </span>
<span id="cb256-10"><a href="common-app-caveats.html#cb256-10" tabindex="-1"></a>    <span class="at">choices =</span> <span class="dv">2010</span><span class="sc">:</span><span class="dv">2030</span>, </span>
<span id="cb256-11"><a href="common-app-caveats.html#cb256-11" tabindex="-1"></a>    <span class="co"># Setting a state for the year</span></span>
<span id="cb256-12"><a href="common-app-caveats.html#cb256-12" tabindex="-1"></a>    <span class="at">selected =</span> <span class="fu">format</span>(</span>
<span id="cb256-13"><a href="common-app-caveats.html#cb256-13" tabindex="-1"></a>      <span class="fu">Sys.Date</span>(), </span>
<span id="cb256-14"><a href="common-app-caveats.html#cb256-14" tabindex="-1"></a>      <span class="st">&quot;%Y&quot;</span></span>
<span id="cb256-15"><a href="common-app-caveats.html#cb256-15" tabindex="-1"></a>    )</span>
<span id="cb256-16"><a href="common-app-caveats.html#cb256-16" tabindex="-1"></a>  )</span>
<span id="cb256-17"><a href="common-app-caveats.html#cb256-17" tabindex="-1"></a>)</span>
<span id="cb256-18"><a href="common-app-caveats.html#cb256-18" tabindex="-1"></a></span>
<span id="cb256-19"><a href="common-app-caveats.html#cb256-19" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb256-20"><a href="common-app-caveats.html#cb256-20" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>date, {</span>
<span id="cb256-21"><a href="common-app-caveats.html#cb256-21" tabindex="-1"></a>    year <span class="ot">&lt;-</span> <span class="fu">format</span>(input<span class="sc">$</span>date, <span class="st">&quot;%Y&quot;</span>)</span>
<span id="cb256-22"><a href="common-app-caveats.html#cb256-22" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Changing year to &quot;</span>, year)</span>
<span id="cb256-23"><a href="common-app-caveats.html#cb256-23" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(<span class="at">inputId =</span> <span class="st">&quot;year&quot;</span>, <span class="at">selected =</span> year)</span>
<span id="cb256-24"><a href="common-app-caveats.html#cb256-24" tabindex="-1"></a>  })</span>
<span id="cb256-25"><a href="common-app-caveats.html#cb256-25" tabindex="-1"></a>  </span>
<span id="cb256-26"><a href="common-app-caveats.html#cb256-26" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>year, {</span>
<span id="cb256-27"><a href="common-app-caveats.html#cb256-27" tabindex="-1"></a>    <span class="co"># Preventing this update to be sent at application launch</span></span>
<span id="cb256-28"><a href="common-app-caveats.html#cb256-28" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>year <span class="sc">!=</span> <span class="fu">format</span>(input<span class="sc">$</span>date, <span class="st">&quot;%Y&quot;</span>)) {</span>
<span id="cb256-29"><a href="common-app-caveats.html#cb256-29" tabindex="-1"></a>      date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">ISOdate</span>(input<span class="sc">$</span>year, <span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb256-30"><a href="common-app-caveats.html#cb256-30" tabindex="-1"></a>      <span class="fu">message</span>(<span class="st">&quot;Changing date to &quot;</span>, date)</span>
<span id="cb256-31"><a href="common-app-caveats.html#cb256-31" tabindex="-1"></a>      <span class="fu">updateDateInput</span>(<span class="at">inputId =</span> <span class="st">&quot;date&quot;</span>, <span class="at">value =</span> date)</span>
<span id="cb256-32"><a href="common-app-caveats.html#cb256-32" tabindex="-1"></a>    }</span>
<span id="cb256-33"><a href="common-app-caveats.html#cb256-33" tabindex="-1"></a>  })</span>
<span id="cb256-34"><a href="common-app-caveats.html#cb256-34" tabindex="-1"></a>}</span>
<span id="cb256-35"><a href="common-app-caveats.html#cb256-35" tabindex="-1"></a></span>
<span id="cb256-36"><a href="common-app-caveats.html#cb256-36" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
<div id="observe-vs-observeevent" class="section level3 hasAnchor" number="15.1.2">
<h3><span class="header-section-number">15.1.2</span> <code>observe</code> vs <code>observeEvent</code><a href="common-app-caveats.html#observe-vs-observeevent" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the most common features of reactive inferno is the use of <code>observe()</code> in cases where you should use <code>observeEvent</code>.
Spoiler: you should try to use <code>observeEvent()</code> as much as possible, and avoid <code>observe()</code>as much as possible.</p>
<p>At first, <code>observe()</code> seems easier to implement, and feels like a shortcut as you do not have to think about what to react to: everything gets updated without you thinking about it.
But the truth is, this stairway does not lead to heaven.</p>
<p>Let’s stop and think about <code>observe()</code> for a minute.
This function updates <strong>every time a reactive object it contains is invalidated</strong>.
Yes, this works well if you have a small number of reactive objects in the observer, but that gets tricky when you start adding a long list of things inside your <code>observe()</code>, as you might be launching a computation 10 times if your reactive scope contains 10 reactive objects that are somehow invalidated in chain.
And believe us, we have seen pieces of code where the <code>observe()</code> contains hundreds of lines of code, with reactive objects all over the place, with one <code>observe()</code> context being invalidated dozens of times when one input changes in the application.</p>
<p>For example, let’s start with that:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="common-app-caveats.html#cb257-1" tabindex="-1"></a><span class="do">## DO NOT DO GLOBAL VARIABLES, IT&#39;S JUST TO SIMPLIFY THE EXAMPLE</span></span>
<span id="cb257-2"><a href="common-app-caveats.html#cb257-2" tabindex="-1"></a><span class="co"># We initiate a counter that will help to track how many times </span></span>
<span id="cb257-3"><a href="common-app-caveats.html#cb257-3" tabindex="-1"></a><span class="co"># some pieces of the code are called</span></span>
<span id="cb257-4"><a href="common-app-caveats.html#cb257-4" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb257-5"><a href="common-app-caveats.html#cb257-5" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb257-6"><a href="common-app-caveats.html#cb257-6" tabindex="-1"></a><span class="fu">library</span>(cli)</span>
<span id="cb257-7"><a href="common-app-caveats.html#cb257-7" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb257-8"><a href="common-app-caveats.html#cb257-8" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb257-9"><a href="common-app-caveats.html#cb257-9" tabindex="-1"></a>    <span class="co"># We are adding a simple text input </span></span>
<span id="cb257-10"><a href="common-app-caveats.html#cb257-10" tabindex="-1"></a>    <span class="co"># that will be printed to the console</span></span>
<span id="cb257-11"><a href="common-app-caveats.html#cb257-11" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">&quot;txt&quot;</span>, <span class="st">&quot;Text&quot;</span>)</span>
<span id="cb257-12"><a href="common-app-caveats.html#cb257-12" tabindex="-1"></a>  )</span>
<span id="cb257-13"><a href="common-app-caveats.html#cb257-13" tabindex="-1"></a>}</span>
<span id="cb257-14"><a href="common-app-caveats.html#cb257-14" tabindex="-1"></a></span>
<span id="cb257-15"><a href="common-app-caveats.html#cb257-15" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb257-16"><a href="common-app-caveats.html#cb257-16" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb257-17"><a href="common-app-caveats.html#cb257-17" tabindex="-1"></a>    <span class="co"># Every time this reactive context is invalidated, </span></span>
<span id="cb257-18"><a href="common-app-caveats.html#cb257-18" tabindex="-1"></a>    <span class="co"># we add 1 to the i value</span></span>
<span id="cb257-19"><a href="common-app-caveats.html#cb257-19" tabindex="-1"></a>    i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb257-20"><a href="common-app-caveats.html#cb257-20" tabindex="-1"></a>    <span class="co"># We print the i value to the console, </span></span>
<span id="cb257-21"><a href="common-app-caveats.html#cb257-21" tabindex="-1"></a>    <span class="co"># and the value of input$txt</span></span>
<span id="cb257-22"><a href="common-app-caveats.html#cb257-22" tabindex="-1"></a>    <span class="fu">cat_rule</span>(<span class="fu">as.character</span>(i))</span>
<span id="cb257-23"><a href="common-app-caveats.html#cb257-23" tabindex="-1"></a>    <span class="fu">print</span>(input<span class="sc">$</span>txt)</span>
<span id="cb257-24"><a href="common-app-caveats.html#cb257-24" tabindex="-1"></a>  })</span>
<span id="cb257-25"><a href="common-app-caveats.html#cb257-25" tabindex="-1"></a>}</span>
<span id="cb257-26"><a href="common-app-caveats.html#cb257-26" tabindex="-1"></a></span>
<span id="cb257-27"><a href="common-app-caveats.html#cb257-27" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Oh, and then, let’s add a small <code>selectInput()</code>:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="common-app-caveats.html#cb258-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb258-2"><a href="common-app-caveats.html#cb258-2" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb258-3"><a href="common-app-caveats.html#cb258-3" tabindex="-1"></a><span class="fu">library</span>(cli)</span>
<span id="cb258-4"><a href="common-app-caveats.html#cb258-4" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb258-5"><a href="common-app-caveats.html#cb258-5" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb258-6"><a href="common-app-caveats.html#cb258-6" tabindex="-1"></a>    <span class="co"># We are adding a simple text input </span></span>
<span id="cb258-7"><a href="common-app-caveats.html#cb258-7" tabindex="-1"></a>    <span class="co"># that will be printed to the console</span></span>
<span id="cb258-8"><a href="common-app-caveats.html#cb258-8" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">&quot;txt&quot;</span>, <span class="st">&quot;Text&quot;</span>),</span>
<span id="cb258-9"><a href="common-app-caveats.html#cb258-9" tabindex="-1"></a>    <span class="co"># We add a selectInput() to allow text transformation</span></span>
<span id="cb258-10"><a href="common-app-caveats.html#cb258-10" tabindex="-1"></a>    <span class="fu">selectInput</span>(</span>
<span id="cb258-11"><a href="common-app-caveats.html#cb258-11" tabindex="-1"></a>      <span class="st">&quot;casefolding&quot;</span>, </span>
<span id="cb258-12"><a href="common-app-caveats.html#cb258-12" tabindex="-1"></a>      <span class="st">&quot;Casefolding&quot;</span>, </span>
<span id="cb258-13"><a href="common-app-caveats.html#cb258-13" tabindex="-1"></a>      <span class="fu">c</span>(<span class="st">&quot;lower&quot;</span>, <span class="st">&quot;upper&quot;</span>)</span>
<span id="cb258-14"><a href="common-app-caveats.html#cb258-14" tabindex="-1"></a>    )</span>
<span id="cb258-15"><a href="common-app-caveats.html#cb258-15" tabindex="-1"></a>  )</span>
<span id="cb258-16"><a href="common-app-caveats.html#cb258-16" tabindex="-1"></a>}</span>
<span id="cb258-17"><a href="common-app-caveats.html#cb258-17" tabindex="-1"></a></span>
<span id="cb258-18"><a href="common-app-caveats.html#cb258-18" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb258-19"><a href="common-app-caveats.html#cb258-19" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb258-20"><a href="common-app-caveats.html#cb258-20" tabindex="-1"></a>    <span class="co"># Every time this reactive context </span></span>
<span id="cb258-21"><a href="common-app-caveats.html#cb258-21" tabindex="-1"></a>    <span class="co"># is invalidated, we add 1 to the i value</span></span>
<span id="cb258-22"><a href="common-app-caveats.html#cb258-22" tabindex="-1"></a>    i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb258-23"><a href="common-app-caveats.html#cb258-23" tabindex="-1"></a>    <span class="co"># We print the i value to the console</span></span>
<span id="cb258-24"><a href="common-app-caveats.html#cb258-24" tabindex="-1"></a>    <span class="fu">cat_rule</span>(<span class="fu">as.character</span>(i))</span>
<span id="cb258-25"><a href="common-app-caveats.html#cb258-25" tabindex="-1"></a>    <span class="co"># If the user select lower, then the text is </span></span>
<span id="cb258-26"><a href="common-app-caveats.html#cb258-26" tabindex="-1"></a>    <span class="co"># passed through tolower, otherwise it&#39;s passed </span></span>
<span id="cb258-27"><a href="common-app-caveats.html#cb258-27" tabindex="-1"></a>    <span class="co"># through toupper</span></span>
<span id="cb258-28"><a href="common-app-caveats.html#cb258-28" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>casefolding <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>) {</span>
<span id="cb258-29"><a href="common-app-caveats.html#cb258-29" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">tolower</span>(input<span class="sc">$</span>txt))</span>
<span id="cb258-30"><a href="common-app-caveats.html#cb258-30" tabindex="-1"></a>    } <span class="cf">else</span>  {</span>
<span id="cb258-31"><a href="common-app-caveats.html#cb258-31" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">toupper</span>(input<span class="sc">$</span>txt))</span>
<span id="cb258-32"><a href="common-app-caveats.html#cb258-32" tabindex="-1"></a>    }</span>
<span id="cb258-33"><a href="common-app-caveats.html#cb258-33" tabindex="-1"></a>  })</span>
<span id="cb258-34"><a href="common-app-caveats.html#cb258-34" tabindex="-1"></a>}</span>
<span id="cb258-35"><a href="common-app-caveats.html#cb258-35" tabindex="-1"></a></span>
<span id="cb258-36"><a href="common-app-caveats.html#cb258-36" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>And, as time goes by, we add another control flow to our <code>observe()</code>:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="common-app-caveats.html#cb259-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb259-2"><a href="common-app-caveats.html#cb259-2" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb259-3"><a href="common-app-caveats.html#cb259-3" tabindex="-1"></a><span class="fu">library</span>(cli)</span>
<span id="cb259-4"><a href="common-app-caveats.html#cb259-4" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb259-5"><a href="common-app-caveats.html#cb259-5" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb259-6"><a href="common-app-caveats.html#cb259-6" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb259-7"><a href="common-app-caveats.html#cb259-7" tabindex="-1"></a>    <span class="co"># We are adding a simple text input </span></span>
<span id="cb259-8"><a href="common-app-caveats.html#cb259-8" tabindex="-1"></a>    <span class="co"># that will be printed to the console</span></span>
<span id="cb259-9"><a href="common-app-caveats.html#cb259-9" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">&quot;txt&quot;</span>, <span class="st">&quot;Text&quot;</span>),</span>
<span id="cb259-10"><a href="common-app-caveats.html#cb259-10" tabindex="-1"></a>    <span class="co"># We add a selectInput() to allow text transformation</span></span>
<span id="cb259-11"><a href="common-app-caveats.html#cb259-11" tabindex="-1"></a>    <span class="fu">selectInput</span>(</span>
<span id="cb259-12"><a href="common-app-caveats.html#cb259-12" tabindex="-1"></a>      <span class="st">&quot;casefolding&quot;</span>, </span>
<span id="cb259-13"><a href="common-app-caveats.html#cb259-13" tabindex="-1"></a>      <span class="st">&quot;Casefolding&quot;</span>, </span>
<span id="cb259-14"><a href="common-app-caveats.html#cb259-14" tabindex="-1"></a>      <span class="fu">c</span>(<span class="st">&quot;lower&quot;</span>, <span class="st">&quot;upper&quot;</span>)</span>
<span id="cb259-15"><a href="common-app-caveats.html#cb259-15" tabindex="-1"></a>    ),</span>
<span id="cb259-16"><a href="common-app-caveats.html#cb259-16" tabindex="-1"></a>    <span class="co"># A new checkbox to reverse (or not) the input text</span></span>
<span id="cb259-17"><a href="common-app-caveats.html#cb259-17" tabindex="-1"></a>    <span class="fu">checkboxInput</span>(<span class="st">&quot;rev&quot;</span>, <span class="st">&quot;reverse&quot;</span>)</span>
<span id="cb259-18"><a href="common-app-caveats.html#cb259-18" tabindex="-1"></a>  )</span>
<span id="cb259-19"><a href="common-app-caveats.html#cb259-19" tabindex="-1"></a>}</span>
<span id="cb259-20"><a href="common-app-caveats.html#cb259-20" tabindex="-1"></a></span>
<span id="cb259-21"><a href="common-app-caveats.html#cb259-21" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb259-22"><a href="common-app-caveats.html#cb259-22" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb259-23"><a href="common-app-caveats.html#cb259-23" tabindex="-1"></a>    <span class="co"># Every time this reactive context </span></span>
<span id="cb259-24"><a href="common-app-caveats.html#cb259-24" tabindex="-1"></a>    <span class="co"># is invalidated, we add 1 to the i value</span></span>
<span id="cb259-25"><a href="common-app-caveats.html#cb259-25" tabindex="-1"></a>    i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb259-26"><a href="common-app-caveats.html#cb259-26" tabindex="-1"></a>    <span class="co"># We print the i value to the console</span></span>
<span id="cb259-27"><a href="common-app-caveats.html#cb259-27" tabindex="-1"></a>    <span class="fu">cat_rule</span>(<span class="fu">as.character</span>(i))</span>
<span id="cb259-28"><a href="common-app-caveats.html#cb259-28" tabindex="-1"></a>    <span class="co"># Use input_txt as a container for our input</span></span>
<span id="cb259-29"><a href="common-app-caveats.html#cb259-29" tabindex="-1"></a>    input_txt <span class="ot">&lt;-</span> input<span class="sc">$</span>txt</span>
<span id="cb259-30"><a href="common-app-caveats.html#cb259-30" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>rev){</span>
<span id="cb259-31"><a href="common-app-caveats.html#cb259-31" tabindex="-1"></a>      <span class="co"># If the input$rev is select, we reverse the text</span></span>
<span id="cb259-32"><a href="common-app-caveats.html#cb259-32" tabindex="-1"></a>      input_txt <span class="ot">&lt;-</span> <span class="fu">stri_reverse</span>(input_txt)</span>
<span id="cb259-33"><a href="common-app-caveats.html#cb259-33" tabindex="-1"></a>    }</span>
<span id="cb259-34"><a href="common-app-caveats.html#cb259-34" tabindex="-1"></a>    <span class="co"># If the user select lower, then the text is </span></span>
<span id="cb259-35"><a href="common-app-caveats.html#cb259-35" tabindex="-1"></a>    <span class="co"># passed through tolower, otherwise it&#39;s passed </span></span>
<span id="cb259-36"><a href="common-app-caveats.html#cb259-36" tabindex="-1"></a>    <span class="co"># through toupper</span></span>
<span id="cb259-37"><a href="common-app-caveats.html#cb259-37" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>casefolding <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>) {</span>
<span id="cb259-38"><a href="common-app-caveats.html#cb259-38" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">tolower</span>(input_txt))</span>
<span id="cb259-39"><a href="common-app-caveats.html#cb259-39" tabindex="-1"></a>    } <span class="cf">else</span>  {</span>
<span id="cb259-40"><a href="common-app-caveats.html#cb259-40" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">toupper</span>(input_txt))</span>
<span id="cb259-41"><a href="common-app-caveats.html#cb259-41" tabindex="-1"></a>    }</span>
<span id="cb259-42"><a href="common-app-caveats.html#cb259-42" tabindex="-1"></a>  })</span>
<span id="cb259-43"><a href="common-app-caveats.html#cb259-43" tabindex="-1"></a>}</span>
<span id="cb259-44"><a href="common-app-caveats.html#cb259-44" tabindex="-1"></a></span>
<span id="cb259-45"><a href="common-app-caveats.html#cb259-45" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>And it would be nice to keep the selected values in a reactive list, so that we can reuse it elsewhere.
And maybe you would like to add a checkbox so that the logs are printed to the console only if checked.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="common-app-caveats.html#cb260-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb260-2"><a href="common-app-caveats.html#cb260-2" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb260-3"><a href="common-app-caveats.html#cb260-3" tabindex="-1"></a><span class="fu">library</span>(cli)</span>
<span id="cb260-4"><a href="common-app-caveats.html#cb260-4" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb260-5"><a href="common-app-caveats.html#cb260-5" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb260-6"><a href="common-app-caveats.html#cb260-6" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb260-7"><a href="common-app-caveats.html#cb260-7" tabindex="-1"></a>    <span class="co"># We are adding a simple text input </span></span>
<span id="cb260-8"><a href="common-app-caveats.html#cb260-8" tabindex="-1"></a>    <span class="co"># that will be printed to the console</span></span>
<span id="cb260-9"><a href="common-app-caveats.html#cb260-9" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">&quot;txt&quot;</span>, <span class="st">&quot;Text&quot;</span>),</span>
<span id="cb260-10"><a href="common-app-caveats.html#cb260-10" tabindex="-1"></a>    <span class="co"># We add a selectInput() to allow text transformation</span></span>
<span id="cb260-11"><a href="common-app-caveats.html#cb260-11" tabindex="-1"></a>    <span class="fu">selectInput</span>(</span>
<span id="cb260-12"><a href="common-app-caveats.html#cb260-12" tabindex="-1"></a>      <span class="st">&quot;casefolding&quot;</span>, </span>
<span id="cb260-13"><a href="common-app-caveats.html#cb260-13" tabindex="-1"></a>      <span class="st">&quot;Casefolding&quot;</span>, </span>
<span id="cb260-14"><a href="common-app-caveats.html#cb260-14" tabindex="-1"></a>      <span class="fu">c</span>(<span class="st">&quot;lower&quot;</span>, <span class="st">&quot;upper&quot;</span>)</span>
<span id="cb260-15"><a href="common-app-caveats.html#cb260-15" tabindex="-1"></a>    ),</span>
<span id="cb260-16"><a href="common-app-caveats.html#cb260-16" tabindex="-1"></a>    <span class="co"># A new checkbox to reverse (or not) the input text</span></span>
<span id="cb260-17"><a href="common-app-caveats.html#cb260-17" tabindex="-1"></a>    <span class="fu">checkboxInput</span>(<span class="st">&quot;rev&quot;</span>, <span class="st">&quot;reverse&quot;</span>)</span>
<span id="cb260-18"><a href="common-app-caveats.html#cb260-18" tabindex="-1"></a>  )</span>
<span id="cb260-19"><a href="common-app-caveats.html#cb260-19" tabindex="-1"></a>}</span>
<span id="cb260-20"><a href="common-app-caveats.html#cb260-20" tabindex="-1"></a></span>
<span id="cb260-21"><a href="common-app-caveats.html#cb260-21" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb260-22"><a href="common-app-caveats.html#cb260-22" tabindex="-1"></a>  <span class="co"># We are using a reactiveValues to keep this input value</span></span>
<span id="cb260-23"><a href="common-app-caveats.html#cb260-23" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">reactiveValues</span>()</span>
<span id="cb260-24"><a href="common-app-caveats.html#cb260-24" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb260-25"><a href="common-app-caveats.html#cb260-25" tabindex="-1"></a>    <span class="co"># Every time this reactive context </span></span>
<span id="cb260-26"><a href="common-app-caveats.html#cb260-26" tabindex="-1"></a>    <span class="co"># is invalidated, we add 1 to the i value</span></span>
<span id="cb260-27"><a href="common-app-caveats.html#cb260-27" tabindex="-1"></a>    i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb260-28"><a href="common-app-caveats.html#cb260-28" tabindex="-1"></a>    <span class="co"># We print the i value to the console</span></span>
<span id="cb260-29"><a href="common-app-caveats.html#cb260-29" tabindex="-1"></a>    <span class="fu">cat_rule</span>(<span class="fu">as.character</span>(i))</span>
<span id="cb260-30"><a href="common-app-caveats.html#cb260-30" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>rev){</span>
<span id="cb260-31"><a href="common-app-caveats.html#cb260-31" tabindex="-1"></a>      <span class="co"># If the input$rev is select, we reverse the text</span></span>
<span id="cb260-32"><a href="common-app-caveats.html#cb260-32" tabindex="-1"></a>      r<span class="sc">$</span>input_txt <span class="ot">&lt;-</span> <span class="fu">stri_reverse</span>(r<span class="sc">$</span>input_txt)</span>
<span id="cb260-33"><a href="common-app-caveats.html#cb260-33" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb260-34"><a href="common-app-caveats.html#cb260-34" tabindex="-1"></a>      <span class="co"># Otherwise, we leave it as it is</span></span>
<span id="cb260-35"><a href="common-app-caveats.html#cb260-35" tabindex="-1"></a>      r<span class="sc">$</span>input_txt <span class="ot">&lt;-</span> input<span class="sc">$</span>txt</span>
<span id="cb260-36"><a href="common-app-caveats.html#cb260-36" tabindex="-1"></a>    }</span>
<span id="cb260-37"><a href="common-app-caveats.html#cb260-37" tabindex="-1"></a>    <span class="co"># If the user select lower, then the text is </span></span>
<span id="cb260-38"><a href="common-app-caveats.html#cb260-38" tabindex="-1"></a>    <span class="co"># passed through tolower, otherwise it&#39;s passed </span></span>
<span id="cb260-39"><a href="common-app-caveats.html#cb260-39" tabindex="-1"></a>    <span class="co"># through toupper</span></span>
<span id="cb260-40"><a href="common-app-caveats.html#cb260-40" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>casefolding <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>) {</span>
<span id="cb260-41"><a href="common-app-caveats.html#cb260-41" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">tolower</span>(r<span class="sc">$</span>input_txt))</span>
<span id="cb260-42"><a href="common-app-caveats.html#cb260-42" tabindex="-1"></a>    } <span class="cf">else</span>  {</span>
<span id="cb260-43"><a href="common-app-caveats.html#cb260-43" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">toupper</span>(r<span class="sc">$</span>input_txt))</span>
<span id="cb260-44"><a href="common-app-caveats.html#cb260-44" tabindex="-1"></a>    }</span>
<span id="cb260-45"><a href="common-app-caveats.html#cb260-45" tabindex="-1"></a>  })</span>
<span id="cb260-46"><a href="common-app-caveats.html#cb260-46" tabindex="-1"></a>}</span>
<span id="cb260-47"><a href="common-app-caveats.html#cb260-47" tabindex="-1"></a></span>
<span id="cb260-48"><a href="common-app-caveats.html#cb260-48" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>Ok, now can you tell how many potential invalidation points we have here?
Three: whenever <code>input$txt</code>, <code>input$rev</code> or <code>input$casefolding</code> change.
Of course, three is not that much, but you get the idea.</p>
<p>Let’s pause a minute and think about why we use <code>observe()</code> here.
To update the values inside <code>r$input_txt</code>, yes.
But do we need to use <code>observe()</code> for, say, updating <code>r$input_txt</code> under dozens of conditions, each time the user types a letter?
Possibly not.</p>
<p>We generally want our observer to update its content under a small, controlled number of inputs, i.e. with a controlled number of invalidation points.
And, what we often forget is that users do not type/select correctly on the first try.
No, they usually try and miss, restart, change things, amplifying the reactivity “over-happening”.</p>
<p>Moreover, long <code>observe()</code> statements are hard to debug, and they make collaboration harder when the trigger to the observe logic can potentially live anywhere between line one and line 257 of your <code>observe()</code>.
That’s why (well, in 99% of cases), it is safer to go with <code>observeEvent</code>, as it allows you to see at a glance the condition under which the content is invalidated and re-evaluated.
Then, if a reactive context is invalidated, <strong>you know why</strong>.
For example, here is where the reactive invalidation can happen (lines with a <code>*</code>)<a href="#fn60" class="footnote-ref" id="fnref60"><sup>60</sup></a>:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="common-app-caveats.html#cb261-1" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb261-2"><a href="common-app-caveats.html#cb261-2" tabindex="-1"></a>    i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb261-3"><a href="common-app-caveats.html#cb261-3" tabindex="-1"></a>    <span class="fu">cat_rule</span>(<span class="fu">as.character</span>(i))</span>
<span id="cb261-4"><a href="common-app-caveats.html#cb261-4" tabindex="-1"></a><span class="sc">*</span>   <span class="cf">if</span> (input<span class="sc">$</span>rev){</span>
<span id="cb261-5"><a href="common-app-caveats.html#cb261-5" tabindex="-1"></a><span class="sc">*</span>     r<span class="sc">$</span>input_txt <span class="ot">&lt;-</span> <span class="fu">stri_reverse</span>(r<span class="sc">$</span>input_txt)</span>
<span id="cb261-6"><a href="common-app-caveats.html#cb261-6" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb261-7"><a href="common-app-caveats.html#cb261-7" tabindex="-1"></a><span class="sc">*</span>     r<span class="sc">$</span>input_txt <span class="ot">&lt;-</span> input<span class="sc">$</span>txt</span>
<span id="cb261-8"><a href="common-app-caveats.html#cb261-8" tabindex="-1"></a>    }</span>
<span id="cb261-9"><a href="common-app-caveats.html#cb261-9" tabindex="-1"></a><span class="sc">*</span>   <span class="cf">if</span> (input<span class="sc">$</span>casefolding <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>) {</span>
<span id="cb261-10"><a href="common-app-caveats.html#cb261-10" tabindex="-1"></a><span class="sc">*</span>     <span class="fu">print</span>(<span class="fu">tolower</span>(r<span class="sc">$</span>input_txt))</span>
<span id="cb261-11"><a href="common-app-caveats.html#cb261-11" tabindex="-1"></a>    } <span class="cf">else</span>  {</span>
<span id="cb261-12"><a href="common-app-caveats.html#cb261-12" tabindex="-1"></a><span class="sc">*</span>     <span class="fu">print</span>(<span class="fu">toupper</span>(r<span class="sc">$</span>input_txt))</span>
<span id="cb261-13"><a href="common-app-caveats.html#cb261-13" tabindex="-1"></a>    }</span>
<span id="cb261-14"><a href="common-app-caveats.html#cb261-14" tabindex="-1"></a>})</span></code></pre></div>
<p>Whereas in this refactored code using <code>observeEvent()</code>, it is easier to identify where the invalidation can happen:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="common-app-caveats.html#cb262-1" tabindex="-1"></a><span class="fu">observeEvent</span>( <span class="fu">c</span>(</span>
<span id="cb262-2"><a href="common-app-caveats.html#cb262-2" tabindex="-1"></a><span class="sc">*</span>  input<span class="sc">$</span>rev, </span>
<span id="cb262-3"><a href="common-app-caveats.html#cb262-3" tabindex="-1"></a><span class="sc">*</span>  input<span class="sc">$</span>txt</span>
<span id="cb262-4"><a href="common-app-caveats.html#cb262-4" tabindex="-1"></a>),{</span>
<span id="cb262-5"><a href="common-app-caveats.html#cb262-5" tabindex="-1"></a>  i <span class="ot">&lt;&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb262-6"><a href="common-app-caveats.html#cb262-6" tabindex="-1"></a>  <span class="fu">cat_rule</span>(<span class="fu">as.character</span>(i))</span>
<span id="cb262-7"><a href="common-app-caveats.html#cb262-7" tabindex="-1"></a>  <span class="cf">if</span> (input<span class="sc">$</span>rev){</span>
<span id="cb262-8"><a href="common-app-caveats.html#cb262-8" tabindex="-1"></a>    r<span class="sc">$</span>input_txt <span class="ot">&lt;-</span> <span class="fu">stri_reverse</span>(r<span class="sc">$</span>input_txt)</span>
<span id="cb262-9"><a href="common-app-caveats.html#cb262-9" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb262-10"><a href="common-app-caveats.html#cb262-10" tabindex="-1"></a>    r<span class="sc">$</span>input_txt <span class="ot">&lt;-</span> input<span class="sc">$</span>txt</span>
<span id="cb262-11"><a href="common-app-caveats.html#cb262-11" tabindex="-1"></a>  }</span>
<span id="cb262-12"><a href="common-app-caveats.html#cb262-12" tabindex="-1"></a>  <span class="cf">if</span> (input<span class="sc">$</span>casefolding <span class="sc">==</span> <span class="st">&quot;lower&quot;</span>) {</span>
<span id="cb262-13"><a href="common-app-caveats.html#cb262-13" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">tolower</span>(r<span class="sc">$</span>input_txt))</span>
<span id="cb262-14"><a href="common-app-caveats.html#cb262-14" tabindex="-1"></a>  } <span class="cf">else</span>  {</span>
<span id="cb262-15"><a href="common-app-caveats.html#cb262-15" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">toupper</span>(r<span class="sc">$</span>input_txt))</span>
<span id="cb262-16"><a href="common-app-caveats.html#cb262-16" tabindex="-1"></a>  }</span>
<span id="cb262-17"><a href="common-app-caveats.html#cb262-17" tabindex="-1"></a>})</span></code></pre></div>
</div>
<div id="building-triggers-and-watchers" class="section level3 hasAnchor" number="15.1.3">
<h3><span class="header-section-number">15.1.3</span> Building triggers and watchers<a href="common-app-caveats.html#building-triggers-and-watchers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To prevent this, one way to go is to create “flag” objects, which can be thought of as internal buttons to control what you want to invalidate: you create the button, set some places where you want these buttons to invalidate the context, and finally press these buttons.</p>
<p>These objects are launched with an <code>init</code> function, then these flags are triggered with <code>trigger()</code>, and wherever we want these flags to invalidate a reactive context, we <code>watch()</code> these flags.</p>
<p>The idea here is to get full control over the reactive flow: we only invalidate contexts when we want, making the general flow of the app more predictable.
These flags are available using the <code>{gargoyle}</code> <span class="citation">(<a href="#ref-R-gargoyle">Fay 2023e</a>)</span> package, that can be installed from GitHub with:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="common-app-caveats.html#cb263-1" tabindex="-1"></a><span class="co"># CRAN version </span></span>
<span id="cb263-2"><a href="common-app-caveats.html#cb263-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;gargoyle&quot;</span>)</span>
<span id="cb263-3"><a href="common-app-caveats.html#cb263-3" tabindex="-1"></a><span class="co"># Dev version</span></span>
<span id="cb263-4"><a href="common-app-caveats.html#cb263-4" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;ColinFay/gargoyle&quot;</span>)</span></code></pre></div>
<ul>
<li><p><code>gargoyle::init("this")</code> initiates a <code>"this"</code> flag: most of the time you will be generating them at the <code>app_server()</code> level.</p></li>
<li><p><code>gargoyle::watch("this")</code> sets the flag inside a reactive context, so that it will be invalidated every time you <code>trigger("this")</code> this flag.</p></li>
<li><p><code>gargoyle::trigger("this")</code> triggers the flags.</p></li>
</ul>
<p>And, bonus, as these functions use the <code>session</code> object, they are available across all modules.
That also means that you can easily trigger an event inside a module from another one.</p>
<p>This pattern is, for example, implemented in <code>{hexmake}</code> <span class="citation">(<a href="#ref-R-hexmake"><strong>R-hexmake?</strong></a>)</span> (though not with <code>{gargoyle}</code>), where the rendering of the image on the right is fully controlled by the <a href="https://github.com/ColinFay/hexmake/blob/master/R/mod_right.R#L40"><code>"render"</code> flag</a>.
The idea here is to allow complete control over when the image is recomputed: only when <code>trigger("render")</code> is called does the app regenerate the image, helping us lower the reactivity of the application.
That might seem like a lot of extra work, but that is definitely worth considering in the long run, as it will help in optimizing the rendering (fewer computations), and lowering the number of errors that can result from too much reactivity inside an application.</p>
<p>Here is a small example of this implementation, using an environment to store the value.
When using this pattern, we do not rely on any reactive value invalidating the reactive context: the second result is only displayed when the <code>"render2"</code> flag is triggered, giving us a full control on how the reactivity is propagated.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="common-app-caveats.html#cb264-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb264-2"><a href="common-app-caveats.html#cb264-2" tabindex="-1"></a><span class="fu">library</span>(gargoyle)</span>
<span id="cb264-3"><a href="common-app-caveats.html#cb264-3" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb264-4"><a href="common-app-caveats.html#cb264-4" tabindex="-1"></a>  <span class="fu">fluidPage</span>(</span>
<span id="cb264-5"><a href="common-app-caveats.html#cb264-5" tabindex="-1"></a>    <span class="fu">tagList</span>(</span>
<span id="cb264-6"><a href="common-app-caveats.html#cb264-6" tabindex="-1"></a>      <span class="co"># Creating an action button to launch the computation</span></span>
<span id="cb264-7"><a href="common-app-caveats.html#cb264-7" tabindex="-1"></a>      <span class="fu">actionButton</span>(<span class="st">&quot;compute&quot;</span>, <span class="st">&quot;Compute&quot;</span>), </span>
<span id="cb264-8"><a href="common-app-caveats.html#cb264-8" tabindex="-1"></a>      <span class="co"># Output for all runif()</span></span>
<span id="cb264-9"><a href="common-app-caveats.html#cb264-9" tabindex="-1"></a>      <span class="fu">verbatimTextOutput</span>(<span class="st">&quot;result&quot;</span>), </span>
<span id="cb264-10"><a href="common-app-caveats.html#cb264-10" tabindex="-1"></a>      <span class="co"># This output will change only if runif() &gt; 0.5</span></span>
<span id="cb264-11"><a href="common-app-caveats.html#cb264-11" tabindex="-1"></a>      <span class="fu">verbatimTextOutput</span>(<span class="st">&quot;result2&quot;</span>),</span>
<span id="cb264-12"><a href="common-app-caveats.html#cb264-12" tabindex="-1"></a>      <span class="co"># This button will reset x$results to 0, we use it </span></span>
<span id="cb264-13"><a href="common-app-caveats.html#cb264-13" tabindex="-1"></a>      <span class="co"># to show that it won&#39;t launch a series of reactivity </span></span>
<span id="cb264-14"><a href="common-app-caveats.html#cb264-14" tabindex="-1"></a>      <span class="co"># invalidation</span></span>
<span id="cb264-15"><a href="common-app-caveats.html#cb264-15" tabindex="-1"></a>      <span class="fu">actionButton</span>(<span class="st">&quot;reset&quot;</span>, <span class="st">&quot;Reset x&quot;</span>)</span>
<span id="cb264-16"><a href="common-app-caveats.html#cb264-16" tabindex="-1"></a>    )</span>
<span id="cb264-17"><a href="common-app-caveats.html#cb264-17" tabindex="-1"></a>  )</span>
<span id="cb264-18"><a href="common-app-caveats.html#cb264-18" tabindex="-1"></a>}</span>
<span id="cb264-19"><a href="common-app-caveats.html#cb264-19" tabindex="-1"></a></span>
<span id="cb264-20"><a href="common-app-caveats.html#cb264-20" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb264-21"><a href="common-app-caveats.html#cb264-21" tabindex="-1"></a>  input, </span>
<span id="cb264-22"><a href="common-app-caveats.html#cb264-22" tabindex="-1"></a>  output, </span>
<span id="cb264-23"><a href="common-app-caveats.html#cb264-23" tabindex="-1"></a>  session</span>
<span id="cb264-24"><a href="common-app-caveats.html#cb264-24" tabindex="-1"></a>){</span>
<span id="cb264-25"><a href="common-app-caveats.html#cb264-25" tabindex="-1"></a>  </span>
<span id="cb264-26"><a href="common-app-caveats.html#cb264-26" tabindex="-1"></a>  <span class="co"># Mimic an R6 class, i.e. a non-reactive object</span></span>
<span id="cb264-27"><a href="common-app-caveats.html#cb264-27" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">environment</span>()</span>
<span id="cb264-28"><a href="common-app-caveats.html#cb264-28" tabindex="-1"></a>  </span>
<span id="cb264-29"><a href="common-app-caveats.html#cb264-29" tabindex="-1"></a>  <span class="co"># Creating two watchers</span></span>
<span id="cb264-30"><a href="common-app-caveats.html#cb264-30" tabindex="-1"></a>  <span class="fu">init</span>(<span class="st">&quot;render_result&quot;</span>, <span class="st">&quot;render_result2&quot;</span>)</span>
<span id="cb264-31"><a href="common-app-caveats.html#cb264-31" tabindex="-1"></a>  </span>
<span id="cb264-32"><a href="common-app-caveats.html#cb264-32" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>compute , {</span>
<span id="cb264-33"><a href="common-app-caveats.html#cb264-33" tabindex="-1"></a>    <span class="co"># When the user presses compute, we launch runif()</span></span>
<span id="cb264-34"><a href="common-app-caveats.html#cb264-34" tabindex="-1"></a>    x<span class="sc">$</span>results <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>)</span>
<span id="cb264-35"><a href="common-app-caveats.html#cb264-35" tabindex="-1"></a>    <span class="co"># Every time a new value is stored, we render result</span></span>
<span id="cb264-36"><a href="common-app-caveats.html#cb264-36" tabindex="-1"></a>    <span class="fu">trigger</span>(<span class="st">&quot;render_result&quot;</span>)</span>
<span id="cb264-37"><a href="common-app-caveats.html#cb264-37" tabindex="-1"></a>    <span class="co"># Only render the second result if x$results is over 0.5</span></span>
<span id="cb264-38"><a href="common-app-caveats.html#cb264-38" tabindex="-1"></a>    <span class="cf">if</span> (x<span class="sc">$</span>results <span class="sc">&gt;</span> <span class="fl">0.5</span>){</span>
<span id="cb264-39"><a href="common-app-caveats.html#cb264-39" tabindex="-1"></a>      <span class="fu">trigger</span>(<span class="st">&quot;render_result2&quot;</span>)</span>
<span id="cb264-40"><a href="common-app-caveats.html#cb264-40" tabindex="-1"></a>    }</span>
<span id="cb264-41"><a href="common-app-caveats.html#cb264-41" tabindex="-1"></a>  })</span>
<span id="cb264-42"><a href="common-app-caveats.html#cb264-42" tabindex="-1"></a>  </span>
<span id="cb264-43"><a href="common-app-caveats.html#cb264-43" tabindex="-1"></a>  output<span class="sc">$</span>result <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb264-44"><a href="common-app-caveats.html#cb264-44" tabindex="-1"></a>    <span class="co"># Will be rendered every time</span></span>
<span id="cb264-45"><a href="common-app-caveats.html#cb264-45" tabindex="-1"></a>    <span class="fu">watch</span>(<span class="st">&quot;render_result&quot;</span>)</span>
<span id="cb264-46"><a href="common-app-caveats.html#cb264-46" tabindex="-1"></a>    <span class="co"># require x$results before rendering the output</span></span>
<span id="cb264-47"><a href="common-app-caveats.html#cb264-47" tabindex="-1"></a>    <span class="fu">req</span>(x<span class="sc">$</span>results)</span>
<span id="cb264-48"><a href="common-app-caveats.html#cb264-48" tabindex="-1"></a>    x<span class="sc">$</span>results</span>
<span id="cb264-49"><a href="common-app-caveats.html#cb264-49" tabindex="-1"></a>  })</span>
<span id="cb264-50"><a href="common-app-caveats.html#cb264-50" tabindex="-1"></a>  </span>
<span id="cb264-51"><a href="common-app-caveats.html#cb264-51" tabindex="-1"></a>  </span>
<span id="cb264-52"><a href="common-app-caveats.html#cb264-52" tabindex="-1"></a>  output<span class="sc">$</span>result2 <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb264-53"><a href="common-app-caveats.html#cb264-53" tabindex="-1"></a>    <span class="co"># This will only be rendered if trigger(&quot;render_result2&quot;)</span></span>
<span id="cb264-54"><a href="common-app-caveats.html#cb264-54" tabindex="-1"></a>    <span class="co"># is called</span></span>
<span id="cb264-55"><a href="common-app-caveats.html#cb264-55" tabindex="-1"></a>    <span class="fu">watch</span>(<span class="st">&quot;render_result2&quot;</span>)</span>
<span id="cb264-56"><a href="common-app-caveats.html#cb264-56" tabindex="-1"></a>    <span class="fu">req</span>(x<span class="sc">$</span>results)</span>
<span id="cb264-57"><a href="common-app-caveats.html#cb264-57" tabindex="-1"></a>    x<span class="sc">$</span>results</span>
<span id="cb264-58"><a href="common-app-caveats.html#cb264-58" tabindex="-1"></a>  })</span>
<span id="cb264-59"><a href="common-app-caveats.html#cb264-59" tabindex="-1"></a>  </span>
<span id="cb264-60"><a href="common-app-caveats.html#cb264-60" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>reset , {</span>
<span id="cb264-61"><a href="common-app-caveats.html#cb264-61" tabindex="-1"></a>    <span class="co"># This resets x$results. This code block is here</span></span>
<span id="cb264-62"><a href="common-app-caveats.html#cb264-62" tabindex="-1"></a>    <span class="co"># to show that reactivity is not triggered in this app </span></span>
<span id="cb264-63"><a href="common-app-caveats.html#cb264-63" tabindex="-1"></a>    <span class="co"># unless a trigger() is called</span></span>
<span id="cb264-64"><a href="common-app-caveats.html#cb264-64" tabindex="-1"></a>    x<span class="sc">$</span>results <span class="ot">&lt;-</span>  <span class="dv">0</span></span>
<span id="cb264-65"><a href="common-app-caveats.html#cb264-65" tabindex="-1"></a>    <span class="fu">print</span>(x<span class="sc">$</span>results)</span>
<span id="cb264-66"><a href="common-app-caveats.html#cb264-66" tabindex="-1"></a>  })</span>
<span id="cb264-67"><a href="common-app-caveats.html#cb264-67" tabindex="-1"></a>  </span>
<span id="cb264-68"><a href="common-app-caveats.html#cb264-68" tabindex="-1"></a>}</span>
<span id="cb264-69"><a href="common-app-caveats.html#cb264-69" tabindex="-1"></a></span>
<span id="cb264-70"><a href="common-app-caveats.html#cb264-70" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
<div id="using-r6-as-data-storage" class="section level3 hasAnchor" number="15.1.4">
<h3><span class="header-section-number">15.1.4</span> Using R6 as data storage<a href="common-app-caveats.html#using-r6-as-data-storage" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One pattern we have also been playing with is storing the app business logic inside one or more R6 objects.
Why would we want to do that?</p>
<div id="a.-sharing-data-across-modules" class="section level4 unnumbered hasAnchor">
<h4>A. Sharing data across modules<a href="common-app-caveats.html#a.-sharing-data-across-modules" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sharing an R6 object makes it simpler to create data that are shared across modules, but without the complexity generated by reactive objects, and the instability of using global variables.</p>
<p>Basically, the idea is to hold the whole logic of your <strong>data</strong> <strong>reading/cleaning/processing/outputting inside an R6 class</strong>.
An object of this class is then initiated at the top level of your application, and you can pass this object to the sub-modules.
Of course, this makes even more sense if you are combining it with the trigger/watch pattern from before!</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="common-app-caveats.html#cb265-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb265-2"><a href="common-app-caveats.html#cb265-2" tabindex="-1"></a>data_cleaning_ui <span class="ot">&lt;-</span> <span class="cf">function</span>(id){</span>
<span id="cb265-3"><a href="common-app-caveats.html#cb265-3" tabindex="-1"></a>  ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb265-4"><a href="common-app-caveats.html#cb265-4" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb265-5"><a href="common-app-caveats.html#cb265-5" tabindex="-1"></a>    <span class="co"># Defining the UI for your first module</span></span>
<span id="cb265-6"><a href="common-app-caveats.html#cb265-6" tabindex="-1"></a>    <span class="co"># [...]</span></span>
<span id="cb265-7"><a href="common-app-caveats.html#cb265-7" tabindex="-1"></a>  )</span>
<span id="cb265-8"><a href="common-app-caveats.html#cb265-8" tabindex="-1"></a>}</span>
<span id="cb265-9"><a href="common-app-caveats.html#cb265-9" tabindex="-1"></a></span>
<span id="cb265-10"><a href="common-app-caveats.html#cb265-10" tabindex="-1"></a>mod_data_cleaning_server <span class="ot">&lt;-</span> <span class="cf">function</span>(id, r6){</span>
<span id="cb265-11"><a href="common-app-caveats.html#cb265-11" tabindex="-1"></a>  <span class="fu">moduleServer</span>( id, <span class="cf">function</span>(input, output, session){</span>
<span id="cb265-12"><a href="common-app-caveats.html#cb265-12" tabindex="-1"></a>    ns <span class="ot">&lt;-</span> session<span class="sc">$</span>ns</span>
<span id="cb265-13"><a href="common-app-caveats.html#cb265-13" tabindex="-1"></a>    <span class="fu">observeEvent</span>( input<span class="sc">$</span>launch_cleaning , {</span>
<span id="cb265-14"><a href="common-app-caveats.html#cb265-14" tabindex="-1"></a>      <span class="co"># Once the launch_cleaning input is triggered, we </span></span>
<span id="cb265-15"><a href="common-app-caveats.html#cb265-15" tabindex="-1"></a>      <span class="co"># use the internal method from our r6 object </span></span>
<span id="cb265-16"><a href="common-app-caveats.html#cb265-16" tabindex="-1"></a>      r6<span class="sc">$</span><span class="fu">clean</span>(<span class="at">arg1 =</span> input<span class="sc">$</span>a, <span class="at">arg2 =</span> input<span class="sc">$</span>b)</span>
<span id="cb265-17"><a href="common-app-caveats.html#cb265-17" tabindex="-1"></a>      <span class="co"># Triggering the plot</span></span>
<span id="cb265-18"><a href="common-app-caveats.html#cb265-18" tabindex="-1"></a>      <span class="fu">trigger</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb265-19"><a href="common-app-caveats.html#cb265-19" tabindex="-1"></a>    })</span>
<span id="cb265-20"><a href="common-app-caveats.html#cb265-20" tabindex="-1"></a>  })</span>
<span id="cb265-21"><a href="common-app-caveats.html#cb265-21" tabindex="-1"></a>}</span>
<span id="cb265-22"><a href="common-app-caveats.html#cb265-22" tabindex="-1"></a></span>
<span id="cb265-23"><a href="common-app-caveats.html#cb265-23" tabindex="-1"></a>plotting_ui <span class="ot">&lt;-</span> <span class="cf">function</span>(id){</span>
<span id="cb265-24"><a href="common-app-caveats.html#cb265-24" tabindex="-1"></a>  ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb265-25"><a href="common-app-caveats.html#cb265-25" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb265-26"><a href="common-app-caveats.html#cb265-26" tabindex="-1"></a>    <span class="co"># Defining the UI for your second module</span></span>
<span id="cb265-27"><a href="common-app-caveats.html#cb265-27" tabindex="-1"></a>    <span class="co"># [...]</span></span>
<span id="cb265-28"><a href="common-app-caveats.html#cb265-28" tabindex="-1"></a>  )</span>
<span id="cb265-29"><a href="common-app-caveats.html#cb265-29" tabindex="-1"></a>}</span>
<span id="cb265-30"><a href="common-app-caveats.html#cb265-30" tabindex="-1"></a></span>
<span id="cb265-31"><a href="common-app-caveats.html#cb265-31" tabindex="-1"></a>mod_plotting_server <span class="ot">&lt;-</span> <span class="cf">function</span>(id, r6){</span>
<span id="cb265-32"><a href="common-app-caveats.html#cb265-32" tabindex="-1"></a>  <span class="fu">moduleServer</span>( id, <span class="cf">function</span>(input, output, session){</span>
<span id="cb265-33"><a href="common-app-caveats.html#cb265-33" tabindex="-1"></a>    ns <span class="ot">&lt;-</span> session<span class="sc">$</span>ns</span>
<span id="cb265-34"><a href="common-app-caveats.html#cb265-34" tabindex="-1"></a>    <span class="co"># Rendering, inside this second module, the plot based on the </span></span>
<span id="cb265-35"><a href="common-app-caveats.html#cb265-35" tabindex="-1"></a>    <span class="co"># cleaning done in the other module</span></span>
<span id="cb265-36"><a href="common-app-caveats.html#cb265-36" tabindex="-1"></a>    output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb265-37"><a href="common-app-caveats.html#cb265-37" tabindex="-1"></a>      <span class="co"># We use the trigger/watch pattern from before</span></span>
<span id="cb265-38"><a href="common-app-caveats.html#cb265-38" tabindex="-1"></a>      <span class="fu">watch</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb265-39"><a href="common-app-caveats.html#cb265-39" tabindex="-1"></a>      <span class="co"># Calling the plot() method from our R6 object</span></span>
<span id="cb265-40"><a href="common-app-caveats.html#cb265-40" tabindex="-1"></a>      r6<span class="sc">$</span><span class="fu">plot</span>()</span>
<span id="cb265-41"><a href="common-app-caveats.html#cb265-41" tabindex="-1"></a>    })</span>
<span id="cb265-42"><a href="common-app-caveats.html#cb265-42" tabindex="-1"></a>  })</span>
<span id="cb265-43"><a href="common-app-caveats.html#cb265-43" tabindex="-1"></a>}</span>
<span id="cb265-44"><a href="common-app-caveats.html#cb265-44" tabindex="-1"></a></span>
<span id="cb265-45"><a href="common-app-caveats.html#cb265-45" tabindex="-1"></a></span>
<span id="cb265-46"><a href="common-app-caveats.html#cb265-46" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb265-47"><a href="common-app-caveats.html#cb265-47" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb265-48"><a href="common-app-caveats.html#cb265-48" tabindex="-1"></a>    <span class="co"># Putting our two module UIs here</span></span>
<span id="cb265-49"><a href="common-app-caveats.html#cb265-49" tabindex="-1"></a>    <span class="fu">data_cleaning_ui</span>(<span class="st">&quot;data_cleaning_ui&quot;</span>),</span>
<span id="cb265-50"><a href="common-app-caveats.html#cb265-50" tabindex="-1"></a>    <span class="fu">plotting_ui</span>(<span class="st">&quot;plotting_ui&quot;</span>)</span>
<span id="cb265-51"><a href="common-app-caveats.html#cb265-51" tabindex="-1"></a>  )</span>
<span id="cb265-52"><a href="common-app-caveats.html#cb265-52" tabindex="-1"></a>}</span>
<span id="cb265-53"><a href="common-app-caveats.html#cb265-53" tabindex="-1"></a></span>
<span id="cb265-54"><a href="common-app-caveats.html#cb265-54" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb265-55"><a href="common-app-caveats.html#cb265-55" tabindex="-1"></a>  input, </span>
<span id="cb265-56"><a href="common-app-caveats.html#cb265-56" tabindex="-1"></a>  output, </span>
<span id="cb265-57"><a href="common-app-caveats.html#cb265-57" tabindex="-1"></a>  session</span>
<span id="cb265-58"><a href="common-app-caveats.html#cb265-58" tabindex="-1"></a>){</span>
<span id="cb265-59"><a href="common-app-caveats.html#cb265-59" tabindex="-1"></a>  <span class="co"># We start by creating a new instance of th</span></span>
<span id="cb265-60"><a href="common-app-caveats.html#cb265-60" tabindex="-1"></a>  r6 <span class="ot">&lt;-</span> MyDataProcessing<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb265-61"><a href="common-app-caveats.html#cb265-61" tabindex="-1"></a>  <span class="co"># Passing this object to the two server functions</span></span>
<span id="cb265-62"><a href="common-app-caveats.html#cb265-62" tabindex="-1"></a>  <span class="fu">mod_data_cleaning_server</span>(<span class="st">&quot;data_cleaning_ui_1&quot;</span>, r6)</span>
<span id="cb265-63"><a href="common-app-caveats.html#cb265-63" tabindex="-1"></a>  <span class="fu">mod_plotting_server</span>(<span class="st">&quot;plotting_ui_1&quot;</span>, r6)</span>
<span id="cb265-64"><a href="common-app-caveats.html#cb265-64" tabindex="-1"></a></span>
<span id="cb265-65"><a href="common-app-caveats.html#cb265-65" tabindex="-1"></a>}</span>
<span id="cb265-66"><a href="common-app-caveats.html#cb265-66" tabindex="-1"></a></span>
<span id="cb265-67"><a href="common-app-caveats.html#cb265-67" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
</div>
<div id="b.-be-sure-it-is-tested" class="section level4 unnumbered hasAnchor">
<h4>B. Be sure it is tested<a href="common-app-caveats.html#b.-be-sure-it-is-tested" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>During the process of building a robust <code>{shiny}</code> app, we strongly suggest that you test as many things as you can.
This is where using an R6 for the business logic of your app makes sense: this allows you to build the whole testing of your application data logic outside of any reactive context: you simply build unit tests just as any other function.</p>
<p>For example, let’s say we have the following R6 generator:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="common-app-caveats.html#cb266-1" tabindex="-1"></a>MyData <span class="ot">&lt;-</span> R6<span class="sc">::</span><span class="fu">R6Class</span>(</span>
<span id="cb266-2"><a href="common-app-caveats.html#cb266-2" tabindex="-1"></a>  <span class="st">&quot;MyData&quot;</span>, </span>
<span id="cb266-3"><a href="common-app-caveats.html#cb266-3" tabindex="-1"></a>  <span class="co"># Defining our public methods, that will be </span></span>
<span id="cb266-4"><a href="common-app-caveats.html#cb266-4" tabindex="-1"></a>  <span class="co"># the dataset container, and a summary function</span></span>
<span id="cb266-5"><a href="common-app-caveats.html#cb266-5" tabindex="-1"></a>  <span class="at">public =</span> <span class="fu">list</span>(</span>
<span id="cb266-6"><a href="common-app-caveats.html#cb266-6" tabindex="-1"></a>    <span class="at">data =</span> <span class="cn">NULL</span>,</span>
<span id="cb266-7"><a href="common-app-caveats.html#cb266-7" tabindex="-1"></a>    <span class="at">initialize =</span> <span class="cf">function</span>(data){</span>
<span id="cb266-8"><a href="common-app-caveats.html#cb266-8" tabindex="-1"></a>      self<span class="sc">$</span>data <span class="ot">&lt;-</span> data</span>
<span id="cb266-9"><a href="common-app-caveats.html#cb266-9" tabindex="-1"></a>    }, </span>
<span id="cb266-10"><a href="common-app-caveats.html#cb266-10" tabindex="-1"></a>    <span class="at">summarize =</span> <span class="cf">function</span>(){</span>
<span id="cb266-11"><a href="common-app-caveats.html#cb266-11" tabindex="-1"></a>      <span class="fu">summary</span>(self<span class="sc">$</span>data)</span>
<span id="cb266-12"><a href="common-app-caveats.html#cb266-12" tabindex="-1"></a>    }</span>
<span id="cb266-13"><a href="common-app-caveats.html#cb266-13" tabindex="-1"></a>  )</span>
<span id="cb266-14"><a href="common-app-caveats.html#cb266-14" tabindex="-1"></a>)</span></code></pre></div>
<p>We can then build a test for this class using <code>{testthat}</code>:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="common-app-caveats.html#cb267-1" tabindex="-1"></a><span class="fu">library</span>(testthat, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb267-2"><a href="common-app-caveats.html#cb267-2" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;R6 Class works&quot;</span>, {</span>
<span id="cb267-3"><a href="common-app-caveats.html#cb267-3" tabindex="-1"></a>  <span class="co"># We define a new instance of this class, that will contain </span></span>
<span id="cb267-4"><a href="common-app-caveats.html#cb267-4" tabindex="-1"></a>  <span class="co"># the mtcars data.frame</span></span>
<span id="cb267-5"><a href="common-app-caveats.html#cb267-5" tabindex="-1"></a>  my_data <span class="ot">&lt;-</span> MyData<span class="sc">$</span><span class="fu">new</span>(mtcars)</span>
<span id="cb267-6"><a href="common-app-caveats.html#cb267-6" tabindex="-1"></a>  <span class="co"># We will expect my_data to have two classes: </span></span>
<span id="cb267-7"><a href="common-app-caveats.html#cb267-7" tabindex="-1"></a>  <span class="co"># &quot;MyData&quot; and &quot;R6&quot;</span></span>
<span id="cb267-8"><a href="common-app-caveats.html#cb267-8" tabindex="-1"></a>  <span class="fu">expect_is</span>(my_data, <span class="st">&quot;MyData&quot;</span>)</span>
<span id="cb267-9"><a href="common-app-caveats.html#cb267-9" tabindex="-1"></a>  <span class="fu">expect_is</span>(my_data, <span class="st">&quot;R6&quot;</span>)</span>
<span id="cb267-10"><a href="common-app-caveats.html#cb267-10" tabindex="-1"></a>  <span class="co"># And the summarize method to return a table</span></span>
<span id="cb267-11"><a href="common-app-caveats.html#cb267-11" tabindex="-1"></a>  <span class="fu">expect_is</span>(my_data<span class="sc">$</span><span class="fu">summarize</span>(), <span class="st">&quot;table&quot;</span>)</span>
<span id="cb267-12"><a href="common-app-caveats.html#cb267-12" tabindex="-1"></a>  <span class="co"># We would expect the data contained in the object </span></span>
<span id="cb267-13"><a href="common-app-caveats.html#cb267-13" tabindex="-1"></a>  <span class="co"># to match the one taken as input to new()</span></span>
<span id="cb267-14"><a href="common-app-caveats.html#cb267-14" tabindex="-1"></a>  <span class="fu">expect_equal</span>(my_data<span class="sc">$</span>data, mtcars)</span>
<span id="cb267-15"><a href="common-app-caveats.html#cb267-15" tabindex="-1"></a>  <span class="co"># And the summarize method to be equal to the summary()</span></span>
<span id="cb267-16"><a href="common-app-caveats.html#cb267-16" tabindex="-1"></a>  <span class="co">#  on the input object</span></span>
<span id="cb267-17"><a href="common-app-caveats.html#cb267-17" tabindex="-1"></a>  <span class="fu">expect_equal</span>(my_data<span class="sc">$</span><span class="fu">summarize</span>(), <span class="fu">summary</span>(mtcars))</span>
<span id="cb267-18"><a href="common-app-caveats.html#cb267-18" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>Test passed 😸</code></pre>
<p>Using R6 allows to rely on these battle-tested tools when it comes to testing functions, something which is made more complex when using other patterns like <code>reactiveValues()</code>.</p>
</div>
</div>
<div id="logging-reactivity-with-whereami" class="section level3 hasAnchor" number="15.1.5">
<h3><span class="header-section-number">15.1.5</span> Logging reactivity with <code>{whereami}</code><a href="common-app-caveats.html#logging-reactivity-with-whereami" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Getting a good sense of how reactivity is actually working in your app is not an easy task: the reactivity logic is a graph, and it happens very quickly when you run the app, so it’s very hard to follow everything.</p>
<p><code>whereami::whereami()</code>’s <span class="citation">(<a href="#ref-R-whereami">Sidi and Müller 2022</a>)</span> goal is simple: informing you about where it is called, i.e. from what file and at which line, and how many times.
For example, if you add the following piece of code to your <code>app_server()</code>, the location of the function call will be printed to the logs.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="common-app-caveats.html#cb269-1" tabindex="-1"></a>whereami<span class="sc">::</span><span class="fu">cat_where</span>( whereami<span class="sc">::</span><span class="fu">whereami</span>() )</span></code></pre></div>
<pre><code>── Running server(...) at app_server.R#9 (2) ───────────────</code></pre>
<p>Combining <code>cat_where()</code> will implement a reactive logging to your console while developing: that way, you can instantaneously know what reactive contexts are invalidated while using the application.
Of course, you still have to implement it by hand, but that is definitely worth the effort: seeing in real time, in your console, which line is run allows you to detect unexpected behavior.
For example, you will be able to see that the <code>observeEvent()</code> from <code>mod_main.R#79</code> has been called 17 times when launching the app, which might be an unexpected behavior.</p>
<p>The screenshot in Figure <a href="common-app-caveats.html#fig:15-common-app-caveats-13">15.1</a> shows what a <code>{whereami}</code> log might look like, here, for the <code>{hexmake}</code> application.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:15-common-app-caveats-13"></span>
<img src="img/whereami.png" alt="{whereami} output for {hexmake}." width="100%" />
<p class="caption">
FIGURE 15.1: <code>{whereami}</code> output for <code>{hexmake}</code>.
</p>
</div>
<p>And bonus, once the app is closed, you can get a list of all the “counters” with <code>whereami::counter_get()</code>, and how many times they each have been called, and <code>plot(whereami::counter_get())</code> will draw a raw plot of the various counters, as shown in Figure <a href="common-app-caveats.html#fig:15-common-app-caveats-14">15.2</a>.</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:15-common-app-caveats-14"></span>
<img src="img/plot_whereami.png" alt="plot of {whereami} counters." width="100%" />
<p class="caption">
FIGURE 15.2: plot of <code>{whereami}</code> counters.
</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="r-does-too-much" class="section level2 hasAnchor" number="15.2">
<h2><span class="header-section-number">15.2</span> R does too much<a href="common-app-caveats.html#r-does-too-much" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rendering-the-ui-from-the-server-side" class="section level3 hasAnchor" number="15.2.1">
<h3><span class="header-section-number">15.2.1</span> Rendering the UI from the server side<a href="common-app-caveats.html#rendering-the-ui-from-the-server-side" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many reasons we would want to change things on the UI based on what happens in the server: changing the choices of a <code>selectInput()</code> based on the columns of a table which is uploaded by the user, showing and hiding pieces of the app according to an environment variable, allowing the user to create an indeterminate number of inputs, etc.</p>
<p>Chances are that to do that, you have been using the <code>uiOutput()</code> and <code>renderUI()</code> functions from <code>{shiny}</code> <span class="citation">(<a href="#ref-R-shiny">Chang et al. 2022</a>)</span>.
Even if convenient, and the functions of choice in some specific context, this pair of functions makes R do a little bit too much: you are making R regenerate the whole UI component instead of changing only what you need, which can be a suboptimal, be it from the user point of view, or from a developer perspective.</p>
<p><strong>One of the instance in which this pattern might not be optimal is in the case where your visitors do not have an high-speed internet or when visiting and using a smartphone, contexts where every byte counts</strong>.
Rendering large elements from the server side in your <code>{shiny}</code> app means that these elements will have to transit through the socket, i.e. they need to be sent by the server, and downloaded by the browser.
In this case, the smaller the message size the better!</p>
<p>From the developer perspective, you will create code that is harder to reason about, as we are used to having the UI parts in the UI functions (but that is not related to performance).</p>
<p>Here are three strategies to code without <code>uiOutput()</code> and <code>renderUI()</code>.</p>
<div id="a.-implement-ui-events-in-javascript" class="section level4 unnumbered hasAnchor">
<h4>A. Implement UI events in JavaScript<a href="common-app-caveats.html#a.-implement-ui-events-in-javascript" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<blockquote>
<p>Mixing languages is better than writing everything in one, if and only if using only that one is likely to overcomplicate the program.<br />
</p>
<p><em>The Art of UNIX Programming</em> <span class="citation">(<a href="#ref-ericraymond2003">Raymond 2003</a>)</span></p>
</blockquote>
<p>We will see in the last chapter of this book how you can integrate JS inside your <code>{shiny}</code> app, and how even basic functions can be useful for making your app server smaller.
For example, compare:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="common-app-caveats.html#cb271-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb271-2"><a href="common-app-caveats.html#cb271-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb271-3"><a href="common-app-caveats.html#cb271-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb271-4"><a href="common-app-caveats.html#cb271-4" tabindex="-1"></a>    <span class="co"># Adding a button with an onclick event, </span></span>
<span id="cb271-5"><a href="common-app-caveats.html#cb271-5" tabindex="-1"></a>    <span class="co"># that will show or hide the plot</span></span>
<span id="cb271-6"><a href="common-app-caveats.html#cb271-6" tabindex="-1"></a>    <span class="fu">actionButton</span>(</span>
<span id="cb271-7"><a href="common-app-caveats.html#cb271-7" tabindex="-1"></a>      <span class="st">&quot;change&quot;</span>, </span>
<span id="cb271-8"><a href="common-app-caveats.html#cb271-8" tabindex="-1"></a>      <span class="st">&quot;show/hide graph&quot;</span>, </span>
<span id="cb271-9"><a href="common-app-caveats.html#cb271-9" tabindex="-1"></a>      <span class="co"># The toggle() function hide or show the queried element</span></span>
<span id="cb271-10"><a href="common-app-caveats.html#cb271-10" tabindex="-1"></a>      <span class="at">onclick =</span> <span class="st">&quot;$(&#39;#plot&#39;).toggle()&quot;</span></span>
<span id="cb271-11"><a href="common-app-caveats.html#cb271-11" tabindex="-1"></a>    ), </span>
<span id="cb271-12"><a href="common-app-caveats.html#cb271-12" tabindex="-1"></a>    <span class="fu">plotOutput</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb271-13"><a href="common-app-caveats.html#cb271-13" tabindex="-1"></a>  )</span>
<span id="cb271-14"><a href="common-app-caveats.html#cb271-14" tabindex="-1"></a>}</span>
<span id="cb271-15"><a href="common-app-caveats.html#cb271-15" tabindex="-1"></a></span>
<span id="cb271-16"><a href="common-app-caveats.html#cb271-16" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb271-17"><a href="common-app-caveats.html#cb271-17" tabindex="-1"></a>  input, </span>
<span id="cb271-18"><a href="common-app-caveats.html#cb271-18" tabindex="-1"></a>  output, </span>
<span id="cb271-19"><a href="common-app-caveats.html#cb271-19" tabindex="-1"></a>  session</span>
<span id="cb271-20"><a href="common-app-caveats.html#cb271-20" tabindex="-1"></a>){</span>
<span id="cb271-21"><a href="common-app-caveats.html#cb271-21" tabindex="-1"></a>  output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb271-22"><a href="common-app-caveats.html#cb271-22" tabindex="-1"></a>    <span class="co"># This renderPlot will only be called once</span></span>
<span id="cb271-23"><a href="common-app-caveats.html#cb271-23" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cat_rule</span>(<span class="st">&quot;Rendering plot&quot;</span>)</span>
<span id="cb271-24"><a href="common-app-caveats.html#cb271-24" tabindex="-1"></a>    <span class="fu">plot</span>(iris)</span>
<span id="cb271-25"><a href="common-app-caveats.html#cb271-25" tabindex="-1"></a>  })</span>
<span id="cb271-26"><a href="common-app-caveats.html#cb271-26" tabindex="-1"></a>}</span>
<span id="cb271-27"><a href="common-app-caveats.html#cb271-27" tabindex="-1"></a></span>
<span id="cb271-28"><a href="common-app-caveats.html#cb271-28" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server) </span></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="common-app-caveats.html#cb272-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb272-2"><a href="common-app-caveats.html#cb272-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb272-3"><a href="common-app-caveats.html#cb272-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb272-4"><a href="common-app-caveats.html#cb272-4" tabindex="-1"></a>    <span class="co"># We use a pattern without JavaScript</span></span>
<span id="cb272-5"><a href="common-app-caveats.html#cb272-5" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">&quot;change&quot;</span>, <span class="st">&quot;show/hide graph&quot;</span>), </span>
<span id="cb272-6"><a href="common-app-caveats.html#cb272-6" tabindex="-1"></a>    <span class="fu">plotOutput</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb272-7"><a href="common-app-caveats.html#cb272-7" tabindex="-1"></a>  )</span>
<span id="cb272-8"><a href="common-app-caveats.html#cb272-8" tabindex="-1"></a>}</span>
<span id="cb272-9"><a href="common-app-caveats.html#cb272-9" tabindex="-1"></a></span>
<span id="cb272-10"><a href="common-app-caveats.html#cb272-10" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb272-11"><a href="common-app-caveats.html#cb272-11" tabindex="-1"></a>  input, </span>
<span id="cb272-12"><a href="common-app-caveats.html#cb272-12" tabindex="-1"></a>  output, </span>
<span id="cb272-13"><a href="common-app-caveats.html#cb272-13" tabindex="-1"></a>  session</span>
<span id="cb272-14"><a href="common-app-caveats.html#cb272-14" tabindex="-1"></a>){</span>
<span id="cb272-15"><a href="common-app-caveats.html#cb272-15" tabindex="-1"></a>  </span>
<span id="cb272-16"><a href="common-app-caveats.html#cb272-16" tabindex="-1"></a>  output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb272-17"><a href="common-app-caveats.html#cb272-17" tabindex="-1"></a>    <span class="co"># Here, every time the button is clicked, this reactive </span></span>
<span id="cb272-18"><a href="common-app-caveats.html#cb272-18" tabindex="-1"></a>    <span class="co"># context will be invalidated, and the code re-evaluated</span></span>
<span id="cb272-19"><a href="common-app-caveats.html#cb272-19" tabindex="-1"></a>    cli<span class="sc">::</span><span class="fu">cat_rule</span>(<span class="st">&quot;Rendering plot&quot;</span>)</span>
<span id="cb272-20"><a href="common-app-caveats.html#cb272-20" tabindex="-1"></a>    <span class="co"># Simulate a show and hide pattern</span></span>
<span id="cb272-21"><a href="common-app-caveats.html#cb272-21" tabindex="-1"></a>    <span class="fu">req</span>(input<span class="sc">$</span>change <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb272-22"><a href="common-app-caveats.html#cb272-22" tabindex="-1"></a>    <span class="fu">plot</span>(iris)</span>
<span id="cb272-23"><a href="common-app-caveats.html#cb272-23" tabindex="-1"></a>  })</span>
<span id="cb272-24"><a href="common-app-caveats.html#cb272-24" tabindex="-1"></a>  </span>
<span id="cb272-25"><a href="common-app-caveats.html#cb272-25" tabindex="-1"></a>}</span>
<span id="cb272-26"><a href="common-app-caveats.html#cb272-26" tabindex="-1"></a></span>
<span id="cb272-27"><a href="common-app-caveats.html#cb272-27" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>The result is the same, but the first version is shorter and easier to understand: we have one button, and the behavior of the button is self-contained.
The second solution redraws the plot every time the <code>reactiveValues</code> is updated, making R compute way more than it should, whereas with the JavaScript-only solution, the plot is not recomputed every time you need to show it: the plot is drawn by R only once.</p>
<p>At a local level, the improvements described in this section will not make your application way faster: for example, rendering UI elements (let’s say rendering a simple title) will not be computationally heavy.
But at a global level, less UI computation from the server side helps the general rendering of the app: let’s say you have an output that takes 3 seconds to run, then if the whole UI + output is to be rendered on the server side, the whole UI stays blank until everything is computed.</p>
<p>Compare:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="common-app-caveats.html#cb273-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb273-2"><a href="common-app-caveats.html#cb273-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb273-3"><a href="common-app-caveats.html#cb273-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb273-4"><a href="common-app-caveats.html#cb273-4" tabindex="-1"></a>    <span class="co"># We make the whole UI be generated by R</span></span>
<span id="cb273-5"><a href="common-app-caveats.html#cb273-5" tabindex="-1"></a>    <span class="fu">uiOutput</span>(<span class="st">&quot;caption&quot;</span>)</span>
<span id="cb273-6"><a href="common-app-caveats.html#cb273-6" tabindex="-1"></a>  )</span>
<span id="cb273-7"><a href="common-app-caveats.html#cb273-7" tabindex="-1"></a>}</span>
<span id="cb273-8"><a href="common-app-caveats.html#cb273-8" tabindex="-1"></a></span>
<span id="cb273-9"><a href="common-app-caveats.html#cb273-9" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb273-10"><a href="common-app-caveats.html#cb273-10" tabindex="-1"></a>  input, </span>
<span id="cb273-11"><a href="common-app-caveats.html#cb273-11" tabindex="-1"></a>  output, </span>
<span id="cb273-12"><a href="common-app-caveats.html#cb273-12" tabindex="-1"></a>  session</span>
<span id="cb273-13"><a href="common-app-caveats.html#cb273-13" tabindex="-1"></a>){</span>
<span id="cb273-14"><a href="common-app-caveats.html#cb273-14" tabindex="-1"></a>  output<span class="sc">$</span>caption <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb273-15"><a href="common-app-caveats.html#cb273-15" tabindex="-1"></a>    <span class="co"># Simulate something that takes 3 seconds to run</span></span>
<span id="cb273-16"><a href="common-app-caveats.html#cb273-16" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb273-17"><a href="common-app-caveats.html#cb273-17" tabindex="-1"></a>    <span class="co"># Returning the UI</span></span>
<span id="cb273-18"><a href="common-app-caveats.html#cb273-18" tabindex="-1"></a>    <span class="fu">tagList</span>(</span>
<span id="cb273-19"><a href="common-app-caveats.html#cb273-19" tabindex="-1"></a>      <span class="fu">h3</span>(<span class="st">&quot;test&quot;</span>), </span>
<span id="cb273-20"><a href="common-app-caveats.html#cb273-20" tabindex="-1"></a>      shinipsum<span class="sc">::</span><span class="fu">random_text</span>(<span class="dv">10</span>)</span>
<span id="cb273-21"><a href="common-app-caveats.html#cb273-21" tabindex="-1"></a>    )</span>
<span id="cb273-22"><a href="common-app-caveats.html#cb273-22" tabindex="-1"></a>    </span>
<span id="cb273-23"><a href="common-app-caveats.html#cb273-23" tabindex="-1"></a>  })</span>
<span id="cb273-24"><a href="common-app-caveats.html#cb273-24" tabindex="-1"></a>}</span>
<span id="cb273-25"><a href="common-app-caveats.html#cb273-25" tabindex="-1"></a></span>
<span id="cb273-26"><a href="common-app-caveats.html#cb273-26" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>to</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="common-app-caveats.html#cb274-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb274-2"><a href="common-app-caveats.html#cb274-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb274-3"><a href="common-app-caveats.html#cb274-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb274-4"><a href="common-app-caveats.html#cb274-4" tabindex="-1"></a>    <span class="co"># Only the text input will be rendered by R</span></span>
<span id="cb274-5"><a href="common-app-caveats.html#cb274-5" tabindex="-1"></a>    <span class="fu">h3</span>(<span class="st">&quot;test&quot;</span>), </span>
<span id="cb274-6"><a href="common-app-caveats.html#cb274-6" tabindex="-1"></a>    <span class="fu">textOutput</span>(<span class="st">&quot;caption&quot;</span>)</span>
<span id="cb274-7"><a href="common-app-caveats.html#cb274-7" tabindex="-1"></a>  )</span>
<span id="cb274-8"><a href="common-app-caveats.html#cb274-8" tabindex="-1"></a>}</span>
<span id="cb274-9"><a href="common-app-caveats.html#cb274-9" tabindex="-1"></a></span>
<span id="cb274-10"><a href="common-app-caveats.html#cb274-10" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb274-11"><a href="common-app-caveats.html#cb274-11" tabindex="-1"></a>  input, </span>
<span id="cb274-12"><a href="common-app-caveats.html#cb274-12" tabindex="-1"></a>  output, </span>
<span id="cb274-13"><a href="common-app-caveats.html#cb274-13" tabindex="-1"></a>  session</span>
<span id="cb274-14"><a href="common-app-caveats.html#cb274-14" tabindex="-1"></a>){</span>
<span id="cb274-15"><a href="common-app-caveats.html#cb274-15" tabindex="-1"></a>  output<span class="sc">$</span>caption <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb274-16"><a href="common-app-caveats.html#cb274-16" tabindex="-1"></a>    <span class="co"># Here, we only render the text, not the whole UI</span></span>
<span id="cb274-17"><a href="common-app-caveats.html#cb274-17" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="dv">3</span>)</span>
<span id="cb274-18"><a href="common-app-caveats.html#cb274-18" tabindex="-1"></a>    shinipsum<span class="sc">::</span><span class="fu">random_text</span>(<span class="dv">10</span>)</span>
<span id="cb274-19"><a href="common-app-caveats.html#cb274-19" tabindex="-1"></a>  })</span>
<span id="cb274-20"><a href="common-app-caveats.html#cb274-20" tabindex="-1"></a>}</span>
<span id="cb274-21"><a href="common-app-caveats.html#cb274-21" tabindex="-1"></a></span>
<span id="cb274-22"><a href="common-app-caveats.html#cb274-22" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>In the first example, the UI will wait for the server to have rendered, while in the second we will first see the title, then the rendered text after a few seconds.
That approach makes the user experience better: they know that something is happening, while a completely blank page is confusing.</p>
<p>Also, because R is single threaded, manipulating DOM elements from the server side causes R to be busy doing these DOM manipulations while it could be computing something else.
And let’s imagine it takes a quarter of a second to render the DOM element.
That is a full second for rendering four of them, while R should be busy doing something else!</p>
</div>
<div id="b.-update-inputs" class="section level4 unnumbered hasAnchor">
<h4>B. <code>update*</code> inputs<a href="common-app-caveats.html#b.-update-inputs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Almost every <code>{shiny}</code> input, even the custom ones from packages, come with an <code>update_</code> function that allows us to change the input values from the server side, instead of re-creating the UI entirely.
For example, here is a way to update the content of a <code>selectInput</code> from the server side:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="common-app-caveats.html#cb275-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb275-2"><a href="common-app-caveats.html#cb275-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb275-3"><a href="common-app-caveats.html#cb275-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb275-4"><a href="common-app-caveats.html#cb275-4" tabindex="-1"></a>    <span class="co"># We start the selectInput empty</span></span>
<span id="cb275-5"><a href="common-app-caveats.html#cb275-5" tabindex="-1"></a>    <span class="fu">selectInput</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;Species&quot;</span>, <span class="at">choices =</span> <span class="cn">NULL</span>), </span>
<span id="cb275-6"><a href="common-app-caveats.html#cb275-6" tabindex="-1"></a>    <span class="co"># The selectInput will be populate </span></span>
<span id="cb275-7"><a href="common-app-caveats.html#cb275-7" tabindex="-1"></a>    <span class="co"># when the update button is pressed</span></span>
<span id="cb275-8"><a href="common-app-caveats.html#cb275-8" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">&quot;update&quot;</span>, <span class="st">&quot;Update&quot;</span>)</span>
<span id="cb275-9"><a href="common-app-caveats.html#cb275-9" tabindex="-1"></a>  )</span>
<span id="cb275-10"><a href="common-app-caveats.html#cb275-10" tabindex="-1"></a>}</span>
<span id="cb275-11"><a href="common-app-caveats.html#cb275-11" tabindex="-1"></a></span>
<span id="cb275-12"><a href="common-app-caveats.html#cb275-12" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb275-13"><a href="common-app-caveats.html#cb275-13" tabindex="-1"></a>  input, </span>
<span id="cb275-14"><a href="common-app-caveats.html#cb275-14" tabindex="-1"></a>  output, </span>
<span id="cb275-15"><a href="common-app-caveats.html#cb275-15" tabindex="-1"></a>  session</span>
<span id="cb275-16"><a href="common-app-caveats.html#cb275-16" tabindex="-1"></a>){</span>
<span id="cb275-17"><a href="common-app-caveats.html#cb275-17" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>update , {</span>
<span id="cb275-18"><a href="common-app-caveats.html#cb275-18" tabindex="-1"></a>    <span class="co"># Update the selectInput with the species from iris</span></span>
<span id="cb275-19"><a href="common-app-caveats.html#cb275-19" tabindex="-1"></a>    spc <span class="ot">&lt;-</span> <span class="fu">unique</span>(iris<span class="sc">$</span>Species)</span>
<span id="cb275-20"><a href="common-app-caveats.html#cb275-20" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(</span>
<span id="cb275-21"><a href="common-app-caveats.html#cb275-21" tabindex="-1"></a>      session, </span>
<span id="cb275-22"><a href="common-app-caveats.html#cb275-22" tabindex="-1"></a>      <span class="st">&quot;species&quot;</span>, </span>
<span id="cb275-23"><a href="common-app-caveats.html#cb275-23" tabindex="-1"></a>      <span class="at">choices =</span> spc, </span>
<span id="cb275-24"><a href="common-app-caveats.html#cb275-24" tabindex="-1"></a>      <span class="at">selected =</span> spc[<span class="dv">1</span>]</span>
<span id="cb275-25"><a href="common-app-caveats.html#cb275-25" tabindex="-1"></a>    )</span>
<span id="cb275-26"><a href="common-app-caveats.html#cb275-26" tabindex="-1"></a>  })</span>
<span id="cb275-27"><a href="common-app-caveats.html#cb275-27" tabindex="-1"></a>  </span>
<span id="cb275-28"><a href="common-app-caveats.html#cb275-28" tabindex="-1"></a>}</span>
<span id="cb275-29"><a href="common-app-caveats.html#cb275-29" tabindex="-1"></a></span>
<span id="cb275-30"><a href="common-app-caveats.html#cb275-30" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<p>This switch to <code>updateSelectInput</code> makes the code easier to reason about as the <code>selectInput</code> is where it should be: inside the UI, instead of another pattern where we would use <code>renderUI()</code> and <code>uiOutput()</code>.
Plus, with the <code>update</code> method, we are only changing what is needed, not re-generating the whole input.</p>
</div>
<div id="c.-insertui-and-removeui" class="section level4 unnumbered hasAnchor">
<h4>C. <code>insertUI</code> and <code>removeUI</code><a href="common-app-caveats.html#c.-insertui-and-removeui" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Another way to dynamically change what is in the UI is with <code>insertUI()</code> and <code>removeUI()</code>.
It is more global than the solution we have seen before with setting the <code>reactiveValue</code> to <code>NULL</code> or to a value, as it allows us to target a larger UI element: we can insert or remove the whole input, instead of having the DOM element inserted but empty.
This method allows us to have a smaller DOM: <code>&lt;div&gt;</code> that are not rendered are not generated empty, they are simply not there.</p>
<p>Two things to note concerning this method, though:</p>
<ul>
<li>Removing an element from the app will not delete the input from the input list. In other words, if you have <code>selectInput("x", "x")</code>, and you remove this input using <code>removeUI()</code>, you will still have <code>input$x</code> in the server.</li>
</ul>
<p>For example, in the following example, the <code>input$val</code> value will not be removed once you have called <code>removeUI(selector = "#val")</code>.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="common-app-caveats.html#cb276-1" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb276-2"><a href="common-app-caveats.html#cb276-2" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb276-3"><a href="common-app-caveats.html#cb276-3" tabindex="-1"></a>  <span class="fu">tagList</span>(</span>
<span id="cb276-4"><a href="common-app-caveats.html#cb276-4" tabindex="-1"></a>    <span class="co"># Creating a text input that will be removed</span></span>
<span id="cb276-5"><a href="common-app-caveats.html#cb276-5" tabindex="-1"></a>    <span class="co">#  from the UI whenever the remove button is pressed</span></span>
<span id="cb276-6"><a href="common-app-caveats.html#cb276-6" tabindex="-1"></a>    <span class="fu">textInput</span>(<span class="st">&quot;value&quot;</span>, <span class="st">&quot;Value&quot;</span>, <span class="st">&quot;place&quot;</span>),</span>
<span id="cb276-7"><a href="common-app-caveats.html#cb276-7" tabindex="-1"></a>    <span class="fu">actionButton</span>(<span class="st">&quot;remove&quot;</span>, <span class="st">&quot;Remove UI&quot;</span>)</span>
<span id="cb276-8"><a href="common-app-caveats.html#cb276-8" tabindex="-1"></a>  )</span>
<span id="cb276-9"><a href="common-app-caveats.html#cb276-9" tabindex="-1"></a>}</span>
<span id="cb276-10"><a href="common-app-caveats.html#cb276-10" tabindex="-1"></a></span>
<span id="cb276-11"><a href="common-app-caveats.html#cb276-11" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb276-12"><a href="common-app-caveats.html#cb276-12" tabindex="-1"></a>  input, </span>
<span id="cb276-13"><a href="common-app-caveats.html#cb276-13" tabindex="-1"></a>  output, </span>
<span id="cb276-14"><a href="common-app-caveats.html#cb276-14" tabindex="-1"></a>  session</span>
<span id="cb276-15"><a href="common-app-caveats.html#cb276-15" tabindex="-1"></a>){</span>
<span id="cb276-16"><a href="common-app-caveats.html#cb276-16" tabindex="-1"></a>  </span>
<span id="cb276-17"><a href="common-app-caveats.html#cb276-17" tabindex="-1"></a>  <span class="fu">observeEvent</span>( input<span class="sc">$</span>remove , {</span>
<span id="cb276-18"><a href="common-app-caveats.html#cb276-18" tabindex="-1"></a>    <span class="co"># When the button is pressed,</span></span>
<span id="cb276-19"><a href="common-app-caveats.html#cb276-19" tabindex="-1"></a>    <span class="co">#  the textInput will be removed from the UI</span></span>
<span id="cb276-20"><a href="common-app-caveats.html#cb276-20" tabindex="-1"></a>    <span class="fu">removeUI</span>(<span class="at">selector =</span> <span class="st">&quot;#value&quot;</span>)</span>
<span id="cb276-21"><a href="common-app-caveats.html#cb276-21" tabindex="-1"></a>  })</span>
<span id="cb276-22"><a href="common-app-caveats.html#cb276-22" tabindex="-1"></a>  </span>
<span id="cb276-23"><a href="common-app-caveats.html#cb276-23" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb276-24"><a href="common-app-caveats.html#cb276-24" tabindex="-1"></a>    <span class="co"># We observe input$value every second. </span></span>
<span id="cb276-25"><a href="common-app-caveats.html#cb276-25" tabindex="-1"></a>    <span class="co"># You&#39;ll realize that even after the UI</span></span>
<span id="cb276-26"><a href="common-app-caveats.html#cb276-26" tabindex="-1"></a>    <span class="co"># is removed, input$value is still available.</span></span>
<span id="cb276-27"><a href="common-app-caveats.html#cb276-27" tabindex="-1"></a>    <span class="fu">invalidateLater</span>(<span class="dv">1000</span>)</span>
<span id="cb276-28"><a href="common-app-caveats.html#cb276-28" tabindex="-1"></a>    <span class="fu">print</span>(input<span class="sc">$</span>value)</span>
<span id="cb276-29"><a href="common-app-caveats.html#cb276-29" tabindex="-1"></a>  })</span>
<span id="cb276-30"><a href="common-app-caveats.html#cb276-30" tabindex="-1"></a>  </span>
<span id="cb276-31"><a href="common-app-caveats.html#cb276-31" tabindex="-1"></a>}</span>
<span id="cb276-32"><a href="common-app-caveats.html#cb276-32" tabindex="-1"></a></span>
<span id="cb276-33"><a href="common-app-caveats.html#cb276-33" tabindex="-1"></a><span class="fu">shinyApp</span>(ui, server)</span></code></pre></div>
<ul>
<li>Both these functions take a <code>jQuery</code> selector to select the element in the UI. We will introduce these selectors in Chapter <a href="using-javascript.html#using-javascript">17</a>.</li>
</ul>
</div>
</div>
<div id="too-much-data-in-memory" class="section level3 hasAnchor" number="15.2.2">
<h3><span class="header-section-number">15.2.2</span> Too much data in memory<a href="common-app-caveats.html#too-much-data-in-memory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are building a <code>{shiny}</code> application, there is a great chance you are building it to analyze data.
If you are dealing with large datasets, <strong>you should consider deporting the data handling and computation to an external database system: for example, to an SQL database</strong>.
Why?
Because these systems have been created to handle and manipulate data on disk: in other words, it will allow you to perform operations on your data without having to clutter R memory with a large dataset.</p>
<p>For example, if you have a <code>selectInput()</code> that is used to perform a filter on a dataset, you can do that filter straight inside SQL, instead of bringing all the data to R and then doing the filter.
That is even more necessary if you are building the app for a large number of users: for example if one <code>{shiny}</code> session takes up to 300MB, multiply that by the number of users that will need one session, and you will have a rough estimate of how much RAM you will need.
On the contrary, if you reduce the data manipulation so that it is done by the back-end, you will have, let’s say, one database with 300MB of data, so the database size will remain (more or less constant), and the only RAM used by <code>{shiny}</code> will be the data manipulation, not the data storage.
That’s even more true now that almost any operation you can do today in <code>{dplyr}</code> <span class="citation">(<a href="#ref-R-dplyr">Wickham, François, et al. 2023</a>)</span> would be doable with an SQL back-end, and that is the purpose of the <code>{dbplyr}</code> <span class="citation">(<a href="#ref-R-dbplyr">Wickham, Girlich, and Ruiz 2023</a>)</span> package: translates <code>{dplyr}</code> code into SQL.</p>
<p>If using a database as a back-end seems a little bit far-fetched right now, that is how it is done in most programming languages: if you are building a web app with NodeJS or Python for example, and need to interact with data, nothing will be stored in RAM: you will be relying on an external database to store your data.
Then your application will be used to make queries to this database back-end.</p>
</div>
</div>
<div id="reading-data" class="section level2 hasAnchor" number="15.3">
<h2><span class="header-section-number">15.3</span> Reading data<a href="common-app-caveats.html#reading-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>{shiny}</code> applications are a tool of choice when it comes to analyzing data.
But that also means that these data have to be imported/read at some point in time, and reading data can be time consuming.
How can we optimize that?
In this section, we will take a look at three strategies: including datasets inside your application, using R packages for fast data reading, and when and why you should move to an external database system.</p>
<div id="including-data-in-your-application" class="section level3 hasAnchor" number="15.3.1">
<h3><span class="header-section-number">15.3.1</span> Including data in your application<a href="common-app-caveats.html#including-data-in-your-application" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are building your application using the <code>{golem}</code> <span class="citation">(<a href="#ref-R-golem">Fay, Guyader, Rochette, et al. 2023</a>)</span> framework, you are building your application as a package.
R packages provide a way to include internal datasets, which can then be used as objects inside your app.
This is the solution you should go for if your data are never to rarely updated: the datasets are created during package development, then included inside the build of your package.
The plus side of this approach is that it makes the data fast to read, as they are serialized as R native objects.</p>
<p>To include data inside your application, you can use the <code>usethis::use_data_raw( name = "my_dataset", open = FALSE )</code> command, which is inside the <code>02_dev.R</code> script inside the <code>dev/</code> folder of your source application (if you are building the app with <code>{golem}</code>).
This will create a folder called <code>data-raw</code> at the root of your application folder, with a script to prepare your dataset.
Here, you can read the data, modify it if necessary, and then save it with <code>usethis::use_data(my_dataset)</code>.
Once this is done, you will have access to the <code>my_dataset</code> object inside your application.</p>
<p>This is, for example, what is done in the <code>{tidytuesday201942}</code> <span class="citation">(<a href="#ref-R-tidytuesday201942">Fay 2023k</a>)</span> application, in <a href="https://github.com/ColinFay/tidytuesday201942/blob/master/data-raw/big_epa_cars.R">data-raw/big_epa_cars.R</a>: the CSV data are read there, and then used as an internal dataset inside the application.</p>
</div>
<div id="reading-external-datasets" class="section level3 hasAnchor" number="15.3.2">
<h3><span class="header-section-number">15.3.2</span> Reading external datasets<a href="common-app-caveats.html#reading-external-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Other applications use data that are not available at build time: they are created to analyze data that are uploaded by users, or maybe they are fetched from an external service while using the app (for example, by calling an API).
When you are building an application for the “user data” use case, the first thing you will need is to provide users a way to upload their dataset: <code>shiny::fileInput()</code>.</p>
<p>One crucial thing to keep in mind when it comes to using user-uploaded files is that you have to be (very) strict with the way you handle files:</p>
<ul>
<li>Always specify what type of file you want: <code>shiny::fileInput()</code> has an <code>accept</code> parameter that allows you to set one or more <a href="https://en.wikipedia.org/wiki/Media_type">MIME types</a> or extensions. When using this argument (for example, with <code>text/csv</code>, <code>.csv</code>, or <code>.xlsx</code>), the user will only be able to select a subset of files from their computer: the ones that match the type.</li>
<li>Always perform checks once the file is uploaded, even more if it is tabular data: column type, naming, empty rows, etc. The more you check the file for potential errors, the less your application is likely to fail to analyze this uploaded dataset.</li>
<li>If the data reading takes a while, do not forget to add a visual progression cue: a <code>shiny::withProgress()</code> or tools from the <a href="https://github.com/JohnCoene/waiter"><code>{waiter}</code></a> package.</li>
</ul>
<p>Whenever you offer a user the possibility to upload anything, you can be sure that at some point, they will upload a file that will make the app crash.
By setting a specific MIME type and by doing a series of checks once the file is uploaded, you will make your application more stable.
Finally, having a visual cue that “something is happening” is very important for the user experience, because “something is happening” is better than not knowing what is happening, and it may also prevent the user from clicking again and again on the upload button, or worse, they will stop using the app.</p>
<p>Now that we have our <code>fileInput()</code> set, how do we read these data as fast as possible?
There are several options depending on the type of data you are reading.
Here are some packages that can make the file reading faster:</p>
<ul>
<li>For a tabular, flat dataset (typically csv, tsv, or text), <code>{vroom}</code> <span class="citation">(<a href="#ref-R-vroom">Hester, Wickham, and Bryan 2023</a>)</span> can read data at a 1.40 GB/sec speed. The <code>fread()</code> function from <code>{data.table}</code> <span class="citation">(<a href="#ref-R-data.table">Dowle and Srinivasan 2023</a>)</span> is also fast at reading delimited files.</li>
<li>For JSON files, <code>{jsonlite}</code> <span class="citation">(<a href="#ref-jsonlite2014">Ooms 2014</a>)</span>. Or more recently, <code>{RcppSimdJSON}</code> <span class="citation">(<a href="#ref-R-RcppSimdJson">Eddelbuettel, Knapp, and Lemire 2023</a>)</span>, which is a binding to the <code>simdjson</code> C++ library.</li>
<li>If you need to read Excel files inside your app, <code>{readxl}</code> <span class="citation">(<a href="#ref-R-readxl">Wickham and Bryan 2023</a>)</span> offers a binding to the <a href="http://rapidxml.sourceforge.net/"><code>RapidXML</code></a> C++ library, which reads Excel files fast.</li>
<li>Most files exported from statistical software (SAS, SPSS, etc.) can be read using either the <code>{foreign}</code> <span class="citation">(<a href="#ref-R-foreign">R Core Team 2022</a>)</span> or <code>{haven}</code> <span class="citation">(<a href="#ref-R-haven">Wickham, Miller, and Smith 2023</a>)</span> packages.</li>
</ul>
</div>
<div id="using-external-databases" class="section level3 hasAnchor" number="15.3.3">
<h3><span class="header-section-number">15.3.3</span> Using external databases<a href="common-app-caveats.html#using-external-databases" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another type of data analyzed in a shiny application is data that is contained inside an external database.
Databases are heavily used in the data science world and in software engineering as a whole.
Databases come with APIs and drivers that help retrieve and transfer data: be it SQL, NoSQL, or even a graph.</p>
<p>Using a database is one of the solutions for making your app smaller and more efficient in the long run, especially if you need to scale your app to thousands of visitors.
Indeed, <strong>if you plan on having your app scale to numerous people, that will mean that a lot of R processes will be triggered. And if your data is contained in your app, this will mean that each R process will take a significant amount of RAM if the dataset is large</strong>.
For example, if your dataset alone takes ~300 MB of RAM, that means that if you want to launch the app 10 times, you will need ~3GB of RAM.
On the other hand, if you decide to switch these data to an external database, it will lower the global RAM need: the DB will take these 300MB of data, and each shiny application will make a request to the database.
For instance, if the database needs 300MB, and one shiny app 50MB, then 10 apps will be 300MB (for the DB) + 50MB * 10 (for the 10 apps).
In practice, other things are to be considered: making database requests can be computationally expensive, and might need some network adjustments, but you get the idea.</p>
<p>How does one choose between database back-end?
Well, first of all you need to see what is available in the environment the application will be deployed: maybe the company you are building the application for already has database servers deployed.
If ever you are free to choose any database as a back-end, your choice should be driven by what kind of operations you want to make on these databases.
<strong>For example, SQL databases are designed to store tabular data, and they tend to be very fast when it comes to reading data: so if you have one or more large data.frames you want to use inside your application, and with no specific update of these data, an SQL back-end can be the perfect choice</strong>.
On the other hand, a NoSQL database like MongoDB will be faster when it comes to doing write operations, and can store any kind of object: for example, <code>{hexmake}</code> can use a MongoDB back-end to store RDS files.
But that comes with a price: read calls are a little bit slower, and you might have to work a little bit more on handling the JSON results that come out of MongoDB.
Another example of an app that uses on an external database is <code>{databasedemo}</code>, available at <a href="https://engineering-shiny.org/databasedemo/">engineering-shiny.org/databasedemo/</a>.
Feel free to follow this link for more information about this application!</p>
<p>Covering all the available types of databases and the packages associated with each is a very, very large topic: there are dozens of database systems, and as many (if not more) packages to interact with them.
For more extensive coverage of using databases in R, please follow these resources:</p>
<ul>
<li><p><a href="https://db.rstudio.com/">Databases using R</a>, the official RStudio documentation around databases and R.</p></li>
<li><p><a href="https://colinfay.me/r-db/">colinfay/r-db</a>, a Docker image that bundles the toolchain for a lot of database systems for R.</p></li>
<li><p><a href="https://cran.r-project.org/web/views/Databases.html">CRAN Task View: Databases with R</a>: the official task view from CRAN with a series of packages for database manipulation</p></li>
</ul>
</div>
<div id="data-source-checklist" class="section level3 hasAnchor" number="15.3.4">
<h3><span class="header-section-number">15.3.4</span> Data-source checklist<a href="common-app-caveats.html#data-source-checklist" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>How to choose between these three methodologies:</p>
<table>
<thead>
<tr class="header">
<th align="left">Choice</th>
<th align="left">Update</th>
<th align="left">Size</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Package data</td>
<td align="left">Never to very rare</td>
<td align="left">Low to medium</td>
</tr>
<tr class="even">
<td align="left">Reading files</td>
<td align="left">Uploaded by Users</td>
<td align="left">Preferably low</td>
</tr>
<tr class="odd">
<td align="left">External DataBase</td>
<td align="left">Never to Streaming</td>
<td align="left">Low to Big</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-R-shiny" class="csl-entry">
Chang, Winston, Joe Cheng, JJ Allaire, Carson Sievert, Barret Schloerke, Yihui Xie, Jeff Allen, Jonathan McPherson, Alan Dipert, and Barbara Borges. 2022. <em>Shiny: Web Application Framework for r</em>. <a href="https://shiny.rstudio.com/">https://shiny.rstudio.com/</a>.
</div>
<div id="ref-R-data.table" class="csl-entry">
Dowle, Matt, and Arun Srinivasan. 2023. <em>Data.table: Extension of ‘Data.frame‘</em>.
</div>
<div id="ref-R-RcppSimdJson" class="csl-entry">
Eddelbuettel, Dirk, Brendan Knapp, and Daniel Lemire. 2023. <em>RcppSimdJson: Rcpp Bindings for the Simdjson Header-Only Library for JSON Parsing</em>. <a href="https://github.com/eddelbuettel/rcppsimdjson/">https://github.com/eddelbuettel/rcppsimdjson/</a>.
</div>
<div id="ref-R-gargoyle" class="csl-entry">
———. 2023e. <em>Gargoyle: An Event-Based Mechanism for Shiny</em>. <a href="https://github.com/ColinFay/gargoyle">https://github.com/ColinFay/gargoyle</a>.
</div>
<div id="ref-R-tidytuesday201942" class="csl-entry">
———. 2023k. <em>Tidytuesday201942: A Golem App for Tidy Tuesday</em>. <a href="http://www.github.com/ColinFay/tidytuesday201942">http://www.github.com/ColinFay/tidytuesday201942</a>.
</div>
<div id="ref-R-golem" class="csl-entry">
Fay, Colin, Vincent Guyader, Sébastien Rochette, and Cervan Girard. 2023. <em>Golem: A Framework for Robust Shiny Applications</em>. <a href="https://github.com/ThinkR-open/golem">https://github.com/ThinkR-open/golem</a>.
</div>
<div id="ref-R-vroom" class="csl-entry">
Hester, Jim, Hadley Wickham, and Jennifer Bryan. 2023. <em>Vroom: Read and Write Rectangular Text Data Quickly</em>.
</div>
<div id="ref-jsonlite2014" class="csl-entry">
Ooms, Jeroen. 2014. <span>“The Jsonlite Package: A Practical and Consistent Mapping Between JSON Data and r Objects.”</span> <em>arXiv:1403.2805 [Stat.CO]</em>. <a href="https://arxiv.org/abs/1403.2805">https://arxiv.org/abs/1403.2805</a>.
</div>
<div id="ref-R-foreign" class="csl-entry">
R Core Team. 2022. <em>Foreign: Read Data Stored by Minitab, s, SAS, SPSS, Stata, Systat, Weka, dBase, ...</em> <a href="https://svn.r-project.org/R-packages/trunk/foreign/">https://svn.r-project.org/R-packages/trunk/foreign/</a>.
</div>
<div id="ref-ericraymond2003" class="csl-entry">
Raymond, Eric S. 2003. <em>The Art of UNIX Programming (the Addison-Wesley Professional Computng Series)</em>. Addison-Wesley.
</div>
<div id="ref-R-whereami" class="csl-entry">
Sidi, Jonathan, and Kirill Müller. 2022. <em>Whereami: Reliably Return the Source and Call Location of a Command</em>. <a href="https://github.com/yonicd/whereami">https://github.com/yonicd/whereami</a>.
</div>
<div id="ref-R-readxl" class="csl-entry">
———. 2023. <em>Readxl: Read Excel Files</em>.
</div>
<div id="ref-R-dplyr" class="csl-entry">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>.
</div>
<div id="ref-R-dbplyr" class="csl-entry">
Wickham, Hadley, Maximilian Girlich, and Edgar Ruiz. 2023. <em>Dbplyr: A Dplyr Back End for Databases</em>.
</div>
<div id="ref-R-haven" class="csl-entry">
Wickham, Hadley, Evan Miller, and Danny Smith. 2023. <em>Haven: Import and Export SPSS, Stata and SAS Files</em>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="59">
<li id="fn59"><p>We want to thank Hadley for his help simplifying this solution <a href="https://github.com/ThinkR-open/engineering-shiny-book/issues/276" class="uri">https://github.com/ThinkR-open/engineering-shiny-book/issues/276</a>.<a href="common-app-caveats.html#fnref59" class="footnote-back">↩︎</a></p></li>
<li id="fn60"><p>Of course it’s an over-simplification: the reactive context will not be invalidated in all of these contexts. The idea is to illustrate how <code>observe()</code> can lead to invalidation points that are spread all across the code bloc.<a href="common-app-caveats.html#fnref60" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<hr/>
<footer>
<a href="https://rtask.thinkr.fr"><img src="img/logo400_129.png" alt="ThinkR Website"/></a>
<!--https://yihui.org/en/2018/09/target-blank/-->
<script>
  (function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="need-for-optimization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="optimizing-shiny-code.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ThinkR-open/building-shiny-apps-workflow/edit/master/15-common-app-caveats.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
